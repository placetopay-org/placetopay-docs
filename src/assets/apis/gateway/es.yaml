---
openapi: "3.0.0"
info:
  title: "Gateway"
  version: "1.0"
  license:
    name: "Privative"
  description: "Este servicio web y su arquitectura permite a cualquier aplicación conectarse a Placetopay para procesar transacciones, independiente del lenguaje de desarrollo.

Para usar el servicio web, deberás tener un lenguaje de programación que pueda comunicarse con un servicio REST.

El método de integración contempla las operaciones básicas para el procesamiento de tarjetas no presenciales, esto es tipos de crédito, intereses, generación de OTP, autorización, reembolso.

A continuación se describirán cada uno de los usos y los datos requeridos en la trama para cada uno de los casos.  La respuesta para cada operación está unificada en un solo tipo de trama resultante.

Por defecto el lenguaje de las respuestas es en español, si se desea cambiar es necesario enviar el parámetro `locale` en las peticiones.

### Servicios

Todos los consumos se realizan a la URL base, que será proporcionada por el área de operaciones y se le adiciona a dicha URL el endpoint del servicio a consumir.

Por ejemplo si la URL base fuese https://placetopay.com para consumir el servicio se solicitud de información se realiza un POST con los datos del ejemplo a la URL https://placetopay.com/gateway/information"
  contact:
    name: "Diego Calle"
    email: "desarrollo@evertecinc.com"
servers:
  - url: "https://api-co-dev.placetopay.ws"
    description: "Pruebas Colombia"
  - url: "https://api-ec-dev.placetopay.ws"
    description: "Pruebas Ecuador"
tags:
  - name: "Obtener información"
    description: "Una vez se tengan los datos de la tarjeta permite determinar el flujo a seguir"
  - name: "Procesamiento de transacción"
    description: "Diferentes formas de procesar una petición"
  - name: "Consulta de una transacción"
    description: "Busqueda de información sobre una o más transacciones realizadas"
  - name: "Acciones sobre transacciones"
    description: "Permite realizar operaciones como anulación, checkout, procesar una transacción manual"
  - name: "Tokenización de tarjetas"
    description: "Permite almacenar de forma segura una tarjeta para realizar procesos de cobro automáticos posteriormente"
  - name: "Proceso 3DS"
    description: "Validar la transacción mediante 3DS"
  - name: "Proceso OTP"
    description: "Permite generar y posteriormente validar un One Time Password cuando se requiera"
  - name: "Operaciones con Pinpad"
    description: "Permite realizar validación de PIN con un Pinpad seguro"
  - name: "Reporte de operaciones realizadas"
    description: "Permite obtener un reporte de todas las transacciones realizadas en un periodo de tiempo para el sitio usado"
paths:
  /gateway/information:
    post:
      summary: "Solicitud de Información"
      operationId: "post-rest-gateway-information"
      description: "Este servicio proporciona información sobre la tarjeta del usuario que se va a procesar, tal como qué servicios son los que se usarán para ella y los tipos de crédito, si aplica, que hay para esta, si no hay tipos de crédito se retorna un arreglo vacío y si los hay, se debe iterar cada tipo de crédito con los installments que se encuentran en el arreglo."
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
                - title: "Tarjeta"
                  type: "object"
                  properties:
                    locale:
                      type: "string"
                      description: "Determina el idioma de la respuesta"
                      example: "es-CO"
                    auth:
                      $ref: "#/components/schemas/Authentication"
                    instrument:
                      $ref: "#/components/schemas/Instrument"
                    payment:
                      $ref: "#/components/schemas/Payment"
                    subscription:
                      $ref: "#/components/schemas/Subscription"
                - title: "PSE"
                  type: "object"
                  properties:
                    auth:
                      $ref: "#/components/schemas/Authentication"
                    locale:
                      type: "string"
                    payer:
                      $ref: "#/components/schemas/Person"
                    payment:
                      type: "object"
                      description: "Estructura que contiene la información acerca del pago de la transacción requerida al servicio web"
                      properties:
                        reference:
                          type: "string"
                          minLength: 1
                          maxLength: 32
                        description:
                          type: "string"
                          maxLength: 250
                        amount:
                          $ref: "#/components/schemas/Amount"
                    instrument:
                      type: "object"
                      description: "Estructura que contiene la información acerca del medio de pago a usar en una transacción, esta estructura es variable de acuerdo a la solicitud que se genere, cada servicio requiere que se usen unos u otros datos."
                      properties:
                        redirection:
                          type: "object"
                          description: "Representa un medio de pago de redirección, es decir que requiere que se envíe el usuario a otra URL para completar el proceso."
                          properties:
                            paymentMethod:
                              type: "string"
                              enum:
                                - "_PSE_"
                            returnURL:
                              type: "string"
                              format: "uri"
                              example: "http://your-site.com/your-return-route"
                              maxLength: 250
                              description: "URL para que una vez se termine el proceso de pago se retorne el control."
                    ipAddress:
                      type: "string"
                    userAgent:
                      type: "string"
                  required:
                    - "auth"
                    - "payment"
                    - "instrument"
                - title: "Botón Bancolombia"
                  type: "object"
                  properties:
                    auth:
                      $ref: "#/components/schemas/Authentication"
                    locale:
                      type: "string"
                    payer:
                      $ref: "#/components/schemas/Person"
                    payment:
                      type: "object"
                      description: "Estructura que contiene la información acerca del pago de la transacción requerida al servicio web"
                      properties:
                        reference:
                          type: "string"
                          minLength: 1
                          maxLength: 32
                        description:
                          type: "string"
                          maxLength: 250
                        amount:
                          $ref: "#/components/schemas/Amount"
                    instrument:
                      type: "object"
                      description: "Estructura que contiene la información acerca del medio de pago a usar en una transacción, esta estructura es variable de acuerdo a la solicitud que se genere, cada servicio requiere que se usen unos u otros datos."
                      properties:
                        redirection:
                          type: "object"
                          description: "Representa un medio de pago de redirección, es decir que requiere que se envíe el usuario a otra URL para completar el proceso."
                          properties:
                            paymentMethod:
                              type: "string"
                              enum:
                                - "BTNBC"
                            returnURL:
                              type: "string"
                              format: "uri"
                              example: "http://your-site.com/your-return-route"
                              maxLength: 250
                              description: "URL para que una vez se termine el proceso de pago se retorne el control."
                    ipAddress:
                      type: "string"
                    userAgent:
                      type: "string"
                  required:
                    - "auth"
                    - "payment"
                    - "instrument"
                - title: "Botón Aval"
                  type: "object"
                  properties:
                    auth:
                      $ref: "#/components/schemas/Authentication"
                    payment:
                      type: "object"
                      description: "Estructura que contiene la información acerca del pago de la transacción requerida al servicio web"
                      properties:
                        reference:
                          type: "string"
                          minLength: 1
                          maxLength: 32
                        description:
                          type: "string"
                          maxLength: 250
                        amount:
                          $ref: "#/components/schemas/Amount"
                    instrument:
                      type: "object"
                      description: "Estructura que contiene la información acerca del medio de pago a usar en una transacción, esta estructura es variable de acuerdo a la solicitud que se genere, cada servicio requiere que se usen unos u otros datos."
                      properties:
                        redirection:
                          type: "object"
                          description: "Representa un medio de pago de redirección, es decir que requiere que se envíe el usuario a otra URL para completar el proceso."
                          properties:
                            paymentMethod:
                              type: "string"
                              enum:
                                - "BTNAV"
                            returnURL:
                              type: "string"
                              format: "uri"
                              example: "http://your-site.com/your-return-route"
                              maxLength: 250
                              description: "URL para que una vez se termine el proceso de pago se retorne el control."
                    locale:
                      type: "string"
                    ipAddress:
                      type: "string"
                    userAgent:
                      type: "string"
                  required:
                    - "auth"
                    - "payment"
                    - "instrument"
                - title: "CeroPay"
                  type: "object"
                  properties:
                    locale:
                      type: "string"
                      description: "Determina el idioma de la respuesta"
                      example: "es-CO"
                    auth:
                      $ref: "#/components/schemas/Authentication"
                    payment:
                      type: "object"
                      description: "Estructura que contiene la información acerca del pago de la transacción requerida al servicio web"
                      properties:
                        reference:
                          type: "string"
                          minLength: 1
                          maxLength: 32
                        description:
                          type: "string"
                          maxLength: 250
                        amount:
                          title: "Amount"
                          type: "object"
                          description: "Estructura que contiene la información acerca del pago de la transacción requerida al servicio web"
                          required:
                            - "currency"
                            - "total"
                          properties:
                            currency:
                              type: "string"
                              enum:
                                - "COP"
                              example: "COP"
                              minLength: 3
                              maxLength: 3
                            total:
                              type: "number"
                            taxes:
                              type: "array"
                              items:
                                $ref: "#/components/schemas/TaxDetail"
                            details:
                              type: "array"
                              items:
                                $ref: "#/components/schemas/AmountDetail"
                    instrument:
                      type: "object"
                      description: "Estructura que contiene la información acerca del medio de pago a usar en una transacción, esta estructura es variable de acuerdo a la solicitud que se genere, cada servicio requiere que se usen unos u otros datos."
                      properties:
                        redirection:
                          type: "object"
                          description: "Representa un medio de pago de redirección, es decir que requiere que se envíe el usuario a otra URL para completar el proceso."
                          properties:
                            paymentMethod:
                              type: "string"
                              enum:
                                - "BB_CP"
                            returnURL:
                              type: "string"
                              format: "uri"
                              example: "http://your-site.com/your-return-route"
                              maxLength: 250
                              description: "URL para que una vez se termine el proceso de pago se retorne el control."

                    ipAddress:
                      type: "string"
                    userAgent:
                      type: "string"
                  required:
                    - "auth"
                    - "payment"
                    - "instrument"
            examples:
              Ejemplo:
                value:
                  auth:
                    login: "c51ce410c124a10e0db5e4b97fc2af39"
                    tranKey: "VQOcRcVH2DfL6Y4B4SaK6yhoH/VOUveZ3xT16OQnvxE="
                    nonce: "NjE0OWVkODgwYjNhNw=="
                    seed: "2021-09-21T09:34:48-05:00"
                  payment:
                    reference: "1234567890"
                    description: "Testing Payment"
                    amount:
                      currency: "COP"
                      total: "3000"
                  instrument:
                    card:
                      number: "4110760000000008"
                  ipAddress: "127.0.0.1"
                  userAgent: "Testing"
      tags:
        - "Obtener información"
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                oneOf:
                  - title: "Tarjeta"
                    type: "object"
                    properties:
                      status:
                        $ref: "#/components/schemas/Status"
                      provider:
                        type: "string"
                        example: "EBUS"
                        description: "Indica cual proveedor será utilizado en la transacción"
                      serviceCode:
                        type: "string"
                        description: "Indica el código del servicio que procesará la transacción"
                        example: "EB_VS"
                      cardTypes:
                        type: "array"
                        description: "Indica los tipos de tarjeta soportados por el proveedor"
                        items:
                          $ref: "#/components/schemas/CardType"
                      cardType:
                        $ref: "#/components/schemas/CardType"
                      requiereOtp:
                        type: "boolean"
                        description: "Indica si es necesario realizar el flujo de OTP"
                      requiereCvv2:
                        type: "boolean"
                        description: "Indica si es requerido enviar CVV para el procesamiento de la transacción"
                      threeDS:
                        type: "string"
                        enum:
                        - "optional"
                        - "required"
                        - "unsupported"
                        description: "Indica si es necesario 3DS"
                      credits:
                        type: "array"
                        description: "Indica los créditos disponibles por proveedor"
                        items:
                          $ref: "#/components/schemas/Credit"
                      requirePockets:
                        type: "boolean"
                        description: "Indica si es requerido bolsillo para el procesamiento de la transacción"
                      pockets:
                        type: "array"
                        description: "Estructura que contiene los bolsillos de la tarjeta"
                        items:
                          $ref: "#/components/schemas/Pocket"
                      requireAvs:
                        type: "boolean"
                        description: "Indica si es requerida la información de código postal"
                      zipCodeFormat:
                        type: "string"
                        description: "Formato a ser utilizado para la validación del código postal"
                        nullable: "true"
                      accountVerification:
                        type: "boolean"
                        description: "Indica si es necesario realizar el flujo de verificación de cuentas"
                      requirePin:
                        type: "boolean"
                        description: "Indica si es necesario pin para procesar la transacción"
                      requireRedirection:
                        type: "boolean"
                        description: "Indica si el medio de pago es del tipo redirección"
                      bankList:
                        type: "array"
                        description: "Lista de bancos disponibles para procesar un pago"
                        items:
                          $ref: "#/components/schemas/BankItem"
                      requireBalance:
                        type: "boolean"
                        description: "Indica si es requerido el consumo del servicio de balance"
                      hasForwarding:
                        type: "boolean"
                        description: "Indica si el medio de pago tiene configurado enrutamiento transaccional"
                    required:
                      - "status"
                      - "provider"
                      - "serviceCode"
                  - title: "PSE"
                    type: "object"
                    properties:
                      status:
                        $ref: "#/components/schemas/Status"
                      provider:
                        type: "string"
                        example: "ACH"
                        description: "Indica cual proveedor será utilizado en la transacción"
                      serviceCode:
                        type: "string"
                        description: "Indica el código del servicio que procesará la transacción"
                        example: "_PSE_"
                      requireRedirection:
                        type: "boolean"
                        description: "Indica si el medio de pago es del tipo redirección"
                      bankList:
                        type: "array"
                        description: "Lista de bancos disponibles para procesar un pago"
                        items:
                          $ref: "#/components/schemas/BankItem"
                      cardType:
                        $ref: "#/components/schemas/CardType"
                      cardTypes:
                        type: "array"
                        description: "Indica los tipos de tarjeta soportados por el proveedor"
                        items:
                          $ref: "#/components/schemas/CardType"
                      displayInterest:
                        type: "boolean"
                        description: "Indica si es requerido mostrar los intereses de la transacción"
                      requiereOtp:
                        type: "boolean"
                        description: "Indica si es necesario realizar el flujo de OTP"
                      requiereCvv2:
                        type: "boolean"
                        description: "Indica si es requerido enviar CVV para el procesamiento de la transacción"
                      threeDS:
                        type: "string"
                        enum:
                          - "optional"
                          - "required"
                          - "unsupported"
                        description: "Indica si es necesario 3DS"
                      credits:
                        type: "array"
                        description: "Indica los créditos disponibles por proveedor"
                        items:
                          $ref: "#/components/schemas/Credit"
                    required:
                      - "status"
                      - "provider"
                      - "serviceCode"
                  - title: "Botón Bancolombia"
                    type: "object"
                    properties:
                      status:
                        $ref: "#/components/schemas/Status"
                      provider:
                        type: "string"
                        example: "BANCOLOMBIA"
                        description: "Indica cual proveedor será utilizado en la transacción"
                      serviceCode:
                        type: "string"
                        description: "Indica el código del servicio que procesará la transacción"
                        example: "BTNBC"
                      requireRedirection:
                        type: "boolean"
                        description: "Indica si el medio de pago es del tipo redirección"
                      cardType:
                        $ref: "#/components/schemas/CardType"
                      cardTypes:
                        type: "array"
                        description: "Indica los tipos de tarjeta soportados por el proveedor"
                        items:
                          $ref: "#/components/schemas/CardType"
                      displayInterest:
                        type: "boolean"
                        description: "Indica si es requerido mostrar los intereses de la transacción"
                      requiereOtp:
                        type: "boolean"
                        description: "Indica si es necesario realizar el flujo de OTP"
                      requiereCvv2:
                        type: "boolean"
                        description: "Indica si es requerido enviar CVV para el procesamiento de la transacción"
                      threeDS:
                        type: "string"
                        enum:
                          - "optional"
                          - "required"
                          - "unsupported"
                        description: "Indica si es necesario 3DS"
                      credits:
                        type: "array"
                        description: "Indica los créditos disponibles por proveedor"
                        items:
                          $ref: "#/components/schemas/Credit"
                    required:
                      - "status"
                      - "provider"
                      - "serviceCode"
                  - title: "Botón Aval"
                    type: "object"
                    properties:
                      status:
                        $ref: "#/components/schemas/Status"
                      provider:
                        type: "string"
                        example: "AVAL"
                        description: "Indica cual proveedor será utilizado en la transacción"
                      serviceCode:
                        type: "string"
                        description: "Indica el código del servicio que procesará la transacción"
                        example: "BTNAV"
                      requireRedirection:
                        type: "boolean"
                        description: "Indica si el medio de pago es del tipo redirección"
                      bankList:
                        type: "array"
                        description: "Lista de bancos disponibles para procesar un pago"
                        items:
                          $ref: "#/components/schemas/BankItem"
                      cardType:
                        $ref: "#/components/schemas/CardType"
                      cardTypes:
                        type: "array"
                        description: "Indica los tipos de tarjeta soportados por el proveedor"
                        items:
                          $ref: "#/components/schemas/CardType"
                      displayInterest:
                        type: "boolean"
                        description: "Indica si es requerido mostrar los intereses de la transacción"
                      requiereOtp:
                        type: "boolean"
                        description: "Indica si es necesario realizar el flujo de OTP"
                      requiereCvv2:
                        type: "boolean"
                        description: "Indica si es requerido enviar CVV para el procesamiento de la transacción"
                      threeDS:
                        type: "string"
                        enum:
                          - "optional"
                          - "required"
                          - "unsupported"
                        description: "Indica si es necesario 3DS"
                      credits:
                        type: "array"
                        description: "Indica los créditos disponibles por proveedor"
                        items:
                          $ref: "#/components/schemas/Credit"
                    required:
                      - "status"
                      - "provider"
                      - "serviceCode"
                  - title: "CeroPay"
                    type: "object"
                    properties:
                      status:
                        $ref: "#/components/schemas/Status"
                      provider:
                        type: "string"
                        example: "BANCO_BOGOTA"
                        description: "Indica cual proveedor será utilizado en la transacción"
                      serviceCode:
                        type: "string"
                        description: "Indica el código del servicio que procesará la transacción"
                        example: "BB_CP"
                      requireRedirection:
                        type: "boolean"
                        description: "Indica si el medio de pago es del tipo redirección"
                      cardType:
                        $ref: "#/components/schemas/CardType"
                      cardTypes:
                        type: "array"
                        description: "Indica los tipos de tarjeta soportados por el proveedor"
                        items:
                          $ref: "#/components/schemas/CardType"
                      displayInterest:
                        type: "boolean"
                        description: "Indica si es requerido mostrar los intereses de la transacción"
                      requiereOtp:
                        type: "boolean"
                        description: "Indica si es necesario realizar el flujo de OTP"
                      requiereCvv2:
                        type: "boolean"
                        description: "Indica si es requerido enviar CVV para el procesamiento de la transacción"
                      threeDS:
                        type: "string"
                        enum:
                          - "optional"
                          - "required"
                          - "unsupported"
                        description: "Indica si es necesario 3DS"
                      credits:
                        type: "array"
                        description: "Indica los créditos disponibles por proveedor"
                        items:
                          $ref: "#/components/schemas/Credit"
                    required:
                      - "status"
                      - "provider"
                      - "serviceCode"
              examples:
                Ejemplo:
                  value:
                    status:
                      status: "OK"
                      reason: "00"
                      message: "La petición se ha procesado correctamente"
                      date: "2021-09-21T09:26:11-05:00"
                    provider: "CREDIBANCO"
                    serviceCode: "CR_VS"
                    cardType: "C"
                    cardTypes:
                      - "C"
                      - "R"
                      - "A"
                    displayInterest: "false"
                    requireOtp: "false"
                    requireCvv2: "true"
                    threeDS: "optional"
                    credits:
                      - description: "Cuotas"
                        code: "0"
                        groupCode: "C"
                        type: "00"
                        installments:
                          - "1"
                          - "2"
                          - "3"
                          - "4"
                          - "5"
                          - "6"
                          - "7"
                          - "8"
                          - "9"
                          - "10"
                          - "11"
                          - "12"
                          - "13"
                          - "14"
                          - "15"
                          - "16"
                          - "17"
                          - "18"
                          - "19"
                          - "20"
                          - "21"
                          - "22"
                          - "23"
                          - "24"
                          - "25"
                          - "26"
                          - "27"
                          - "28"
                          - "29"
                          - "30"
                          - "31"
                          - "32"
                          - "33"
                          - "34"
                          - "35"
                          - "36"
  /gateway/process:
    post:
      summary: "Procesamiento de transacción"
      operationId: "post-gateway-process"
      description: "Este servicio permite que se realice el cobro a la tarjeta del usuario, los parámetros del instrument son variables, si no se pide tipo de crédito ni otp no es necesario enviar esas variables, payer es siempre requerido, buyer es opcional pero recomendado."
      tags:
        - "Procesamiento de transacción"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                action:
                  type: "string"
                  description: "Este campo debe ser enviado únicamente cuando se realice un proceso de checkin, de lo contrario, no debe ser enviado en la solicitud"
                  enum:
                    - "checkin"
                locale:
                  type: "string"
                  example: "es_CO"
                auth:
                  $ref: "#/components/schemas/Authentication"
                payer:
                  $ref: "#/components/schemas/Person"
                buyer:
                  $ref: "#/components/schemas/Person"
                instrument:
                  $ref: "#/components/schemas/Instrument"
                payment:
                  $ref: "#/components/schemas/Payment"
                additional:
                  type: "object"
                  description: |
                    Objeto dinámico clave valor de información que se desee guardar con la transacción. Las siguientes claves **NO** son permitidas: `_accountNumber`, `userAgent`, `fingerprint`, `sourcePlatform`, `tokenizationID`, `trazabilyCode`, `transactionCycle`, `RequestId`, `PartnerAuthCode`, `onTest`, `threeDSEnrolled`, `threeDSAuthenticated`.
                    Ver más en [Datos adicionales](/gateway/additional-data)
                metadata:
                  type: "object"
                  description: |
                    Objeto dinámico clave valor de información adicional que solicitan los servicios externos para ser ejecutados.
                  properties:
                    EBTDeliveryIndicator: 
                      type: "string"
                      enum: 
                        - 'DIRECT_DELIVERY'
                        - 'CUSTOMER_PICKUP'
                        - 'COMMERCIAL_SHIPPING'
                        - 'OTHER'
                        - 'NOT_AVAILABLE'
                    openingDate:
                      type: "string"
                      description: "Fecha de apertura del producto. Requerido en transacciones PSE para comercios en la categoría de servicios financieros."
                      example: "2025-04-16"
                    beneficiaryId:
                      type: "string"
                      description: "ID del beneficiario. Requerido en transacciones PSE para comercios en la categoría de servicios financieros."
                      example: "12345"
                notificationURL:
                  type: "string"
                  description: "URL a la que se enviará una notificación HTTP con la información de la transacción una vez que esta haya sido procesada. Ver más en [Notificación](/gateway/notification)"
                  example: "https://your-site.com/your-notification-path"
                ipAddress:
                  type: "string"
                userAgent:
                  type: "string"
                  example: "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36"
                sourcePlatform:
                  type: "string"
              required:
                - "auth"
                - "payer"
                - "instrument"
                - "payment"
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  date:
                    type: "string"
                    example: "2021-09-20T21:51:59-05:00"
                  transactionDate:
                    type: "string"
                    example: "2021-09-20T21:51:59-05:00"
                  internalReference:
                    type: "integer"
                    nullable: true
                  reference:
                    type: "string"
                    minLength: 1
                  paymentMethod:
                    type: "string"
                    nullable: true
                    minLength: 1
                  franchise:
                    type: "string"
                    nullable: true
                    minLength: 1
                  franchiseName:
                    type: "string"
                    nullable: true
                    minLength: 1
                    example: "Botón Aval"
                  issuerName:
                    type: "string"
                    minLength: 1
                    nullable: true
                    description: "Nombre del banco procesador"
                    example: "Banco Bogotá"
                  amount:
                    $ref: "#/components/schemas/Amount"
                  conversion:
                    $ref: "#/components/schemas/AmountConversion"
                  authorization:
                    type: "string"
                    minLength: 1
                    nullable: true
                  receipt:
                    type: "string"
                    maxLength: 16
                    nullable: true
                  type:
                    type: "string"
                    minLength: 1
                    enum:
                      - "AUTH_ONLY"
                      - "CHECKIN"
                  refunded:
                    type: "boolean"
                    nullable: true
                  lastDigits:
                    type: "string"
                    minLength: 1
                    nullable: true
                  provider:
                    type: "string"
                    nullable: true
                    enum:
                      - "ACH"
                      - "ATH-AVALNET"
                      - "ATH-MOVIL"
                      - "AUSTRO"
                      - "AVAL"
                      - "BANCOLOMBIA"
                      - "BRASPAG"
                      - "COMFANDI"
                      - "CREDIBANCO"
                      - "DATAFAST"
                      - "EBUS"
                      - "EVERTEC"
                      - "FLAMINGO"
                      - "INTERDIN"
                      - "MEDIANET"
                      - "PAYSTUDIO"
                      - "REDEBAN"
                      - "SABRE"
                      - "SUPERGIROS"
                      - "TECNICARD"
                      - "TRANSERVER"
                      - "TUYA-DIRECT"
                  discount:
                    type: "object"
                    nullable: true
                    properties:
                      code:
                        type: string
                      type:
                        type: string
                      amount:
                        type: number
                      base:
                        type: number
                      percentage:
                        type: number
                  processorFields:
                    type: "object"
                    properties:
                      id:
                        type: "string"
                        nullable: true
                        example: "e67122e3b9af1f7f72eacd430996d94b"
                      b24:
                        type: "string"
                        example: "?-"
                      paymentURL:
                        type: "string"
                        nullable: true
                        example: "https://avalpaycenter.labdigbdbstgpb.com/?trazabilityCode=000000437981"
                  additional:
                    type: "object"
                    description: |
                      Ver más en [Datos adicionales](/gateway/additional-data)
                    properties:
                      merchantCode:
                        type: "string"
                        nullable: true
                        description: "Código de entidad"
                      terminalNumber:
                        type: "string"
                        nullable: true
                        description: "Número de terminal del medio de pago"
                      trazabilyCode:
                        type: "string"
                      _wcTransactionId_:
                        type: "string"
                        description: "Identificador de transacción en comercio"
                  preAuthorization:
                    type: "object"
                    items:
                      type: "object"
                      properties:
                        condition:
                          enum:
                            - "ACTIVE"
                            - "PENDING"
                            - "COMPLETED"
                        internalReference:
                          type: "integer"
                        authorization:
                          type: "string"
                          minLength: 1
                          nullable: true
                        receipt:
                          type: "string"
                          minLength: 1
                          nullable: true
                        amount:
                          $ref: "#/components/schemas/Amount"
                        salt:
                          type: "string"
                  dispersion:
                    type: "array"
                    items:
                      type: "object"
                      properties:
                        status:
                          $ref: "#/components/schemas/Status"
                        type:
                          type: "string"
                          minLength: 1
                          enum:
                            - "AUTH_ONLY"
                        agreement:
                          type: "integer"
                          nullable: true
                        agreementType:
                          type: "string"
                          enum:
                            - "AIRLINE"
                            - "MERCHANT"
                        authorization:
                          type: "string"
                          minLength: 1
                          nullable: true
                        receipt:
                          type: "string"
                          minLength: 1
                          nullable: true
                        amount:
                          $ref: "#/components/schemas/Amount"
                        conversion:
                          $ref: "#/components/schemas/AmountConversion"
                        refunded:
                          type: "boolean"
                        paymentMethod:
                          type: "string"
                  redirection:
                    $ref: "#/components/schemas/Redirection"
                  notificationURL:
                    type: "string"
                    description: "URL a la que se enviará una notificación HTTP con la información de la transacción una vez que esta haya sido procesada. Ver más en [Notificación](/gateway/notification)"
                    example: "https://your-site.com/your-notification-path"
  /gateway/tokenize:
    post:
      summary: "Tokenización (tokenize)"
      operationId: "post-gateway-tokenize"
      description: "Este servicio permite almacenar un instrumento de pago como: tarjetas de crédito o cuenta bancaria de manera segura, a través de una petición que contenga la información de la misma, se generará un token que puede ser usado en el servicio de procesamiento y para todos los efectos, en PlacetoPay equivale a una tarjeta de crédito o cuenta bancaria, la diferencia es que se envía la estructura token en vez de card o account.

        Previamente al consumo de este servicio se debe consultar el de información para saber si es necesario o no generar un OTP al cliente y en caso de ser necesario, solicitar el token a la persona y enviarlo en el consumo."
      tags:
        - "Tokenización de tarjetas"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              required:
                - "instrument"
              properties:
                locale:
                  type: "string"
                auth:
                  $ref: "#/components/schemas/Authentication"
                payer:
                  $ref: "#/components/schemas/Person"
                instrument:
                  $ref: "#/components/schemas/Instrument"
                payment:
                  $ref: "#/components/schemas/Payment"
                subscription:
                  $ref: "#/components/schemas/Subscription"
                ipAddress:
                  type: "string"
                userAgent:
                  type: "string"
            examples:
              Tarjeta de crédito :
                value:
                  auth:
                    login: "c4ca4238a0b923820dcc509a6f75849b"
                    tranKey: "ytIEiMHa8W4V09lBjztshdczGcv4SvJh6VclvVa1/hI="
                    nonce: "NjBjYjc3YTYwZGZhYw=="
                    seed: "2021-06-17T11:26:14-05:00"
                  payer:
                    name: "Diego"
                    surname: "Calle"
                    email: "dnetix@yopmail.com"
                  instrument:
                    card:
                      number: "5180300000000005"
                      expiration: "12/18"
                      cvv: "123"
                      installments: 3
                  ipAddress: "127.0.0.1"
                  userAgent: "Testing"
              Cuenta bancaria:
                value:
                  auth:
                    login: "c4ca4238a0b923820dcc509a6f75849b"
                    tranKey: "ytIEiMHa8W4V09lBjztshdczGcv4SvJh6VclvVa1/hI="
                    nonce: "NjBjYjc3YTYwZGZhYw=="
                    seed: "2021-06-17T11:26:14-05:00"
                  payer:
                    name: "Diego"
                    surname: "Calle"
                    email: "dnetix@yopmail.com"
                  instrument:
                    account:
                      bankName: "Test Bank"
                      bankCode: "0001234"
                      accountType: "SAV"
                      accountNumber: "4111111111111111"
                  ipAddress: "127.0.0.1"
                  userAgent: "Testing"
              Con cobro:
                value:
                  auth:
                    login: "c4ca4238a0b923820dcc509a6f75849b"
                    tranKey: "ytIEiMHa8W4V09lBjztshdczGcv4SvJh6VclvVa1/hI="
                    nonce: "NjBjYjc3YTYwZGZhYw=="
                    seed: "2021-06-17T11:26:14-05:00"
                  payer:
                    name: "Diego"
                    surname: "Calle"
                    email: "dnetix@yopmail.com"
                  instrument:
                    card:
                      number: "5180300000000005"
                      expiration: "12/18"
                      cvv: "123"
                      installments: 3
                  payment:
                    reference: "TEST_PAYMENT_12345"
                    amount:
                      currency: "COP"
                      total: "100"
                  ipAddress: "127.0.0.1"
                  userAgent: "Testing"
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  provider:
                    type: "string"
                  instrument:
                    $ref: "#/components/schemas/Instrument"
                  additional:
                    type: "object"
                    description: "Objeto que almacena información adicional de la respuesta de tokenización."
                    properties:
                      bin:
                        type: "string"
                        description: "Primeros 6 dígitos del número de la tarjeta"
              examples:
                Ok:
                  value:
                    status:
                      status: "OK"
                      reason: "00"
                      message: "La petición se ha procesado correctamente"
                      date: "2021-06-17T11:29:37-05:00"
                    provider: "CREDIBANCO"
                    instrument:
                      token:
                        token: faketoken12f233bd8f5d42138d681bf07ea8295429df07a4af287703e30c891
                        subtoken: 'fakesubtoken00005'
                        franchise: "master"
                        franchiseName: "Mastercard"
                        lastDigits: "0005"
                        validUntil: "2018-12-31"
  /invalidate:
    post:
      summary: "Tokenización (invalidate)"
      operationId: "post-gateway-tokenize"
      description: "Este servicio permite invalidar y eliminar un token asociado a una tarjeta de crédito."
      tags:
        - "Tokenización de tarjetas"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                instrument:
                  required:
                    - "token"
                  type: "object"
                  properties:
                    token:
                      type: "object"
                      required:
                        - "token"
                      properties:
                        token:
                          type: "string"
              required:
                - "auth"
                - "instrument"
            examples:
              Ejemplo:
                value:
                  auth:
                    login: "c4ca4238a0b923820dcc509a6f75849b"
                    tranKey: "/svw0VZ1UML5qEmaPbefQO7OXt098zOdfWsc/vHclGM="
                    nonce: "NjQ0MWFlNGY0MWE1OQ=="
                    seed: "2023-04-20T16:27:43-05:00"
                  instrument:
                    token:
                      token: "239bd2573205e974c4bed7c99cc1125c464f6350a905565333fff041d8f5ef79"
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
              examples:
                Ok:
                  value:
                    status:
                      status: "OK"
                      reason: "00"
                      message: "La petición se ha procesado correctamente"
                      date: "2021-06-17T11:29:37-05:00"
  /gateway/transaction:
    post:
      summary: "Operaciones sobre una transacción"
      operationId: "post-gateway-transaction"
      responses:
        200:
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Transaction"
              examples:
                Ejemplo:
                  value:
                    status:
                      status: "APPROVED"
                      reason: "00"
                      message: "Aprobada"
                      date: "2021-09-20T21:56:29-05:00"
                    date: "2021-09-20T21:56:29-05:00"
                    transactionDate: "2021-09-20T21:56:29-05:00"
                    internalReference: 455
                    description: |
                      Usuario dueño de la cuenta a validar
                    reference: "1945768"
                    paymentMethod: "CR_VS"
                    franchise: "visa"
                    franchiseName: "Visa"
                    issuerName: "Testing Bank"
                    amount:
                      taxes:
                      - kind: "valueAddedTax"
                        amount: 705.66
                        base: "0"
                      currency: "USD"
                      total: 3714
                    conversion:
                      from:
                        currency: "USD"
                        total: 3714
                      to:
                        currency: "USD"
                        total: 3714
                      factor: 1
                    authorization: "000000"
                    receipt: "455"
                    type: "CREDIT"
                    refunded: "false"
                    lastDigits: "0008"
                    provider: "CREDIBANCO"
                    discount:
                    processorFields:
                      id: "f4ec45ea4c83039384b189df2c1a6891"
                      b24: "000"
                    additional:
                      merchantCode:
                      terminalNumber:
                      bin: "411076"
                      expiration: "1228"
                      installments: 1
      description: "Permite realizar un reembolso, re-autorización o checkout sobre una transacción existente"
      tags:
        - "Acciones sobre transacciones"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                locale:
                  type: "string"
                  example: "es-CO"
                auth:
                  $ref: "#/components/schemas/Authentication"
                action:
                  type: "string"
                  description: |
                    Tipo de operación a realizar sobre la transacción

                    `reverse` para revesar una transacción.
                    `reauthorization` para modificar una transacción de checkin.
                    `checkout` para cerrar y cobrar una transacción de checkin.
                    `refund` para rembolsar una transacción.
                    `process`, para aprobar de manera manual una transacción.
                    `void` para cancelar el procesamiento de una transacción pendiente de aprobación manual.
                  enum:
                    - "reverse"
                    - "refund"
                    - "process"
                    - "void"
                    - "dispersion"
                    - "checkout"
                    - "reauthorization"
                  example: "reverse"
                internalReference:
                  type: "number"
                  description: |
                    Referencia interna única de la transacción

                    EJ: `543423`
                authorization:
                  type: "string"
                  description: |
                    Autorización de la transacción

                    EJ: `9999999`
                payment:
                  type: "object"
                  description: |
                    Estructura que contiene la información acerca del pago de la transacción
                  items:
                    type: "object"
                    properties:
                      amount:
                        type: "object"
                        properties:
                          currency:
                              type: "number"
                              description: |
                                Código alfabético de la moneda a usar (ISO 4217 alpha code)

                                EJ: `USD`
                          total:
                            type: "number"
                            description: |
                              Valor total en la moneda base indicada

                              EJ: `1000` Valor total en la moneda base indicada
              required:
                - "auth"
                - "action"
                - "internalReference"
            examples:
              Reembolsos:
                value:
                  auth:
                    login: "6dd490faf9cb87a9862245da41170ff2"
                    tranKey: "JUfKi8+W//kX43WZd8FcnNsdl7zkaeAQdmSOudWcVi0="
                    nonce: "MzgwYWYwMjc2ZWUzODA5YmI1MDQ1YmNjYzdlNzY1MTY="
                    seed: "2021-03-02T17:03:50+01:00"
                  internalReference: "1505723583"
                  authorization: "999999"
                  action: "reverse"
              Checkout:
                value:
                  auth:
                    login: "184053a1c192227c2f53964fdb109e00"
                    tranKey: "JmQcGgEUKPY9NZR9ID4ffH4jmBxLeWkRB6LCPwZp/EY="
                    nonce: "NjE0ZTNiZGEzZTNlNA=="
                    seed: "2021-09-24T15:58:02-05:00"
                  internalReference: "62342"
                  authorization: "580883"
                  action: "checkout"
                  payment:
                    amount:
                      total: "2000"
  /gateway/query:
    post:
      summary: "Consulta de transacción por referencia interna"
      operationId: "post-rest-gateway-query"
      description: "Permite consultar una transacción en particular usando su referencia interna"
      tags:
        - "Consulta de una transacción"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                locale:
                  type: "string"
                auth:
                  $ref: "#/components/schemas/Authentication"
                internalReference:
                  type: "number"
              required:
              - "auth"
              - "internalReference"
            examples:
              Ejemplo:
                value:
                  auth:
                    login: "6dd490faf9cb87a9862245da41170ff2"
                    tranKey: "JUfKi8+W//kX43WZd8FcnNsdl7zkaeAQdmSOudWcVi0="
                    nonce: "MzgwYWYwMjc2ZWUzODA5YmI1MDQ1YmNjYzdlNzY1MTY="
                    seed: "2021-03-02T17:03:50+01:00"
                  internalReference: "230364"
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Transaction"
              examples:
                Ejemplo:
                  value:
                    status:
                      status: "APPROVED"
                      reason: "00"
                      message: "Aprobada"
                      date: "2021-09-24T14:04:23-05:00"
                    date: "2021-09-24T10:02:17-05:00"
                    transactionDate: "2021-09-24T10:02:18-05:00"
                    internalReference: "230364"
                    reference: "800166551"
                    paymentMethod: "ID_DN"
                    franchise: "diners"
                    franchiseName: "Diners"
                    issuerName: "Diners"
                    amount:
                      taxes:
                      - kind: "valueAddedTax"
                        amount: 0
                        base: 0
                      currency: "USD"
                      total: 120
                    conversion:
                      from:
                        currency: "USD"
                        total: 120
                      to:
                        currency: "USD"
                        total: 120
                      factor: 1
                    authorization: "999999"
                    receipt: "230364"
                    type: "AUTH_ONLY"
                    refunded: "false"
                    lastDigits: "0008"
                    provider: "INTERDIN"
                    discount:
                    processorFields:
                      id: "cf3e77878a07d6e3ee667c60081dc39d"
                      b24: "00"
                    additional:
                      merchantCode: "1065152"
                      terminalNumber: "00990099"
                      credit:
                        code: "1"
                        type: "03"
                        groupCode: "X"
                        installments: 3
                      totalAmount: 120
                      interestAmount: 0
                      installmentAmount: 40
                      iceAmount: 0
                      batch:
                      line:
                      bin: "365454"
                      expiration: "1122"
                    notificationURL: "https://test.placetopay.ec/redirection/api/notify"
  /gateway/search:
    post:
      summary: "Búsqueda de transacciones"
      operationId: "post-gateway-search"
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                description: ""
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  transactions:
                    type: "array"
                    uniqueItems: "true"
                    minItems: "1"
                    items:
                      $ref: "#/components/schemas/Transaction"
                required:
                  - "status"
                  - "transactions"
              examples:
                Ejemplo:
                  value:
                    status:
                      status: "OK"
                      reason: "00"
                      message: "La petición se ha procesado correctamente"
                      date: "2021-09-20T21:51:59-05:00"
                    transactions:
                    -
                      status:
                        status: "PENDING"
                        reason: "?-"
                        message: "Transacción pendiente"
                        date: "2021-09-20T21:51:59-05:00"
                      date: "2021-09-20T21:51:59-05:00"
                      transactionDate: "2021-09-20T21:51:59-05:00"
                      internalReference: 453
                      reference: "TEST_3"
                      paymentMethod: "ID_VS"
                      franchise: "visa"
                      franchiseName: "Visa"
                      issuerName: "Testing Bank"
                      amount:
                        taxes:
                        - kind: "valueAddedTax"
                          amount: 3.27
                          base: 0
                        currency: "USD"
                        total: 17.2
                      conversion:
                        from:
                          currency: "USD"
                          total: 17.2
                        to:
                          currency: "USD"
                          total: 17.2
                        factor: 1
                      authorization:
                      receipt:
                      type: "AUTH_ONLY"
                      refunded: "false"
                      lastDigits: "0008"
                      provider: "INTERDIN"
                      discount:
                      processorFields:
                        id: "a9cb4b7a7aa03f681a0545ba6807e1fc"
                        b24: "?-"
                      additional:
                        merchantCode: "000468232"
                        terminalNumber: "00990101"
                        credit:
                        totalAmount: 17.2
                        interestAmount: 0
                        installmentAmount: 0
                        iceAmount: 0
                        batch:
                        line:
                        bin: "411076"
                        expiration: "1228"
                    -
                      status:
                        status: "PENDING"
                        reason: "?-"
                        message: "Transacción pendiente"
                        date: "2021-09-20T21:51:59-05:00"
                      date: "2021-09-20T21:51:59-05:00"
                      transactionDate: "2021-09-20T21:51:59-05:00"
                      internalReference: 452
                      reference: "TEST_3"
                      paymentMethod: "ID_VS"
                      franchise: "visa"
                      franchiseName: "Visa"
                      issuerName: "Testing Bank"
                      amount:
                        taxes:
                        - kind: "valueAddedTax"
                          amount: 3.27
                          base: 0
                        details:
                        - kind: "shipping"
                          amount: 100
                        currency: "USD"
                        total: 17.2
                      conversion:
                        from:
                          currency: "USD"
                          total: 17.2
                        to:
                          currency: "USD"
                          total: 17.2
                        factor: 1
                      authorization:
                      receipt:
                      type: "AUTH_ONLY"
                      refunded: "false"
                      lastDigits: "0008"
                      provider: "INTERDIN"
                      discount:
                      processorFields:
                        id: "cbc65da9667ca078dc774cad2fd510e4"
                        b24: "?-"
                      additional:
                        merchantCode: "000468232"
                        terminalNumber: "00990101"
                        credit:
                        totalAmount: 17.2
                        interestAmount: 0
                        installmentAmount: 0
                        iceAmount: 0
                        batch:
                        line:
                        bin: "411076"
                        expiration: "1228"
      tags:
        - "Consulta de una transacción"
      description: "Este servicio permite la búsqueda de transacciones por referencia y monto, suele utilizarse en caso de pérdida de comunicación al crear una transacción para obtener la referencia interna nuevamente."
      requestBody:
        content:
          application/json:
            schema:
              description: ""
              type: "object"
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                reference:
                  type: "string"
                  minLength: 1
                amount:
                  $ref: "#/components/schemas/Amount"
              required:
                - "auth"
                - "reference"
                - "amount"
            examples:
              Ejemplo:
                value:
                  auth:
                    login: "6dd490faf9cb87a9862245da41170ff2"
                    tranKey: "+FSGHsW3e6WrrHcIdBmqI+j6FFeUN4bidfPL7LeZgvE="
                    nonce: "N2YzMGM1M2QxOTU3YzZmMzVlYmIzZTAyOGMwNjNkMmU="
                    seed: "2021-03-03T19:40:37+01:00"
                  reference: "TEST_20171108_144400"
                  amount:
                    currency: "COP"
                    total: 1000
  /gateway/interests:
    post:
      summary: "Cálculo de Intereses (solo Ecuador)"
      operationId: "post-rest-gateway-interests"
      description: "Este servicio se debe consumir si la tarjeta requiere que se muestren los intereses (displayInterest en true) y como ejemplo de esta manera se muestran los valores en el servicio de redirección."
      tags:
      - "Obtener información"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                locale:
                  type: "string"
                auth:
                  $ref: "#/components/schemas/Authentication"
                instrument:
                  $ref: "#/components/schemas/Instrument"
                payment:
                  $ref: "#/components/schemas/Payment"
            examples:
              Consumo:
                value:
                  auth:
                    login: "c4ca4238a0b923820dcc509a6f75849b"
                    tranKey: "E0gHh8C6fceHnbsLlgBq2n7nRNjr8MVPcz0um1ZYCfs="
                    nonce: "NjE0YjUwZGNlYjJiNA=="
                    seed: "2021-09-22T10:50:52-05:00"
                  payer:
                    name: "Diego"
                    email: "diego.calle@placetopay.com"
                  payment:
                    reference: "1234567890"
                    amount:
                      currency: "USD"
                      total: "1"
                  instrument:
                    card:
                      number: "4111111111111111"
                      expiration: "12/20"
                      cvv: "123"
                    credit:
                      code: "1"
                      type: "02"
                      groupCode: "P"
                      installment: "24"
                  ipAddress: "127.0.0.1"
                  userAgent: "Testing"
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  provider:
                    type: "string"
                  values:
                    $ref: "#/components/schemas/InterestValues"
                  conversion:
                    $ref: "#/components/schemas/AmountConversion"
              examples:
                Ejemplo:
                  value:
                    status:
                      status: "OK"
                      reason: "00"
                      message: "La petición se ha procesado correctamente"
                      date: "2021-09-22T16:08:19-05:00"
                    provider: "INTERDIN"
                    values:
                      original: "1"
                      installment: "0.04"
                      interest: "0.03"
                      total: "1.03"
                    conversion:
                      from:
                        currency: "COP"
                        total: "3000"
                      to:
                        currency: "USD"
                        total: "1"
                      factor: "0.0003333333333333333"
    parameters:
  /gateway/otp/generate:
    post:
      summary: "Generación de OTP (solo Ecuador)"
      operationId: "post-rest-otp-generate"
      description: "Este servicio se consume si es necesario el otp para la tarjeta provista por el cliente (requireOtp en true) y debe permitirsele al usuario ingresar el OTP para enviarlo posteriormente en el servicio de procesamiento, a manera de ejemplo de esta manera se captura en la interfaz de redirección"
      tags:
        - "Proceso OTP"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                locale:
                  type: "string"
                auth:
                  $ref: "#/components/schemas/Authentication"
                instrument:
                  $ref: "#/components/schemas/Instrument"
            examples:
              Ejemplo:
                value:
                  auth:
                    login: "c4ca4238a0b923820dcc509a6f75849b"
                    tranKey: "q/7k0WUshvLEpQ5gqNWqne+ZfWXSXUP/b7T80TuAUSY="
                    nonce: "NjE0YTM3OGIwNjA2NA=="
                    seed: "2021-09-21T14:50:35-05:00"
                  payer:
                    name: "Diego"
                    email: "diego.calle@evertecinc.com"
                  payment:
                    reference: "1234567890"
                    amount:
                      currency: "USD"
                      total: 3
                  instrument:
                    card:
                      number: "36545400000008"
                      expiration: "12/20"
                      cvv: "123"
                  ipAddress: "127.0.0.1"
                  userAgent: "Testing"
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  provider:
                    type: "string"
              examples:
                Ejemplo:
                  value:
                    status:
                      status: "OK"
                      reason: "00"
                      message: "La petición se ha procesado correctamente"
                      date: "2021-09-21T14:52:28-05:00"
                    provider: "INTERDIN"
                No Requerido:
                  value:
                    status:
                      status: "REJECTED"
                      reason: "NR"
                      message: "OTP is not required with this card"
                      date: "2021-09-21T14:53:21-05:00"
                    provider: "INTERDIN"
  /gateway/otp/validate:
    post:
      summary: "Validación de OTP (solo Ecuador)"
      operationId: "post-rest-otp-validate"
      description: "Permite validar que el OTP provisto concuerde con el enviado por el proveedor y proporcionará una firma que sirve para autenticar la transacción
        > Nota Importante
        >
        > Es necesario enviar el valor retornado como `signature` en la respuesta como `instrument.otp` en la petición de procesamiento para que se registre en la transacción"
      tags:
        - "Proceso OTP"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                locale:
                  type: "string"
                auth:
                  $ref: "#/components/schemas/Authentication"
                instrument:
                  $ref: "#/components/schemas/Instrument"
                payment:
                  $ref: "#/components/schemas/Payment"
                subscription:
                  $ref: "#/components/schemas/Subscription"
            examples:
              Ejemplo:
                value:
                  auth:
                    login: "c4ca4238a0b923820dcc509a6f75849b"
                    tranKey: "q/7k0WUshvLEpQ5gqNWqne+ZfWXSXUP/b7T80TuAUSY="
                    nonce: "NjE0YTM3OGIwNjA2NA=="
                    seed: "2021-09-21T14:50:35-05:00"
                  payer:
                    name: "Diego"
                    email: "diego.calle@evertecinc.com"
                  payment:
                    reference: "1234567890"
                    amount:
                      currency: "USD"
                      total: 3
                  instrument:
                    card:
                      number: "36545400000008"
                      expiration: "12/20"
                      cvv: "123"
                    otp: "123456"
                  ipAddress: "127.0.0.1"
                  userAgent: "Testing"
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  provider:
                    type: "string"
                  signature:
                    type: "string"
                    nullable: "true"
                  validated:
                    type: "boolean"
              examples:
                Ejemplo:
                  value:
                    status:
                      status: "OK"
                      reason: "00"
                      message: "OTP Validation successful"
                      date: "2021-09-21T15:12:01-05:00"
                    provider: "INTERDIN"
                    signature: "a586077cd77ec2dbcb9b7f68b896368a"
                    validated: "true"
                Errado:
                  value:
                    status:
                      status: "FAILED"
                      reason: "OT1"
                      message: "El OTP ingresado no coincide con el que se te ha provisto"
                      date: "2021-09-21T15:14:41-05:00"
                    provider: "INTERDIN"
                    signature:
                    validated: "false"
  /gateway/report:
    post:
      summary: "Solicitar un reporte"
      operationId: "post-report"
      responses:
        200:
          description: ""
          content:
            application/json:
              schema:
                description: ""
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  id:
                    type: "number"
                required:
                - "status"
                - "id"
              examples:
                example:
                  value:
                    status:
                      status: "OK"
                      reason: "00"
                      message: "La solicitud se ha procesado exitosamente"
                      date: "2020-01-18T18:00:00-05:00"
                    id: "1231"
                error:
                  value:
                    status:
                      status: "FAILED"
                      reason: "BR"
                      message: "El reporte solicitado supera los 10 días"
                      date: "2020-01-18T18:00:00-05:00"
                    id: "0"
      description: "Permite solicitar que se genere un reporte de transacciones y retorna un identificador para el proceso, el cúal una vez sea llamado el callback puede ser obtenido en el endpoint siguiente"
      tags:
        - "Reporte de operaciones realizadas"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                filters:
                  type: "object"
                  required:
                    - "startDate"
                    - "endDate"
                  properties:
                    startDate:
                      type: "string"
                      format: "date-time"
                      example: "2021-01-10T18:01:27-05:00"
                    endDate:
                      type: "string"
                      format: "date-time"
                      example: "2021-01-12T18:01:27-05:00"
                    state:
                      type: "array"
                      description: "Permite definir el estado de las transacciones, es un arreglo: APPROVED, REJECTED, FAILED y PENDING"
                      items:
                        type: "string"
                        example: "['APPROVED', 'REJECTED']"
                        enum:
                          - "APPROVED"
                          - "REJECTED"
                          - "PENDING"
                          - "FAILED"
                    type:
                      type: "array"
                      description: "Permite definir el tipo de las transacciones, es un arreglo: AUTH_ONLY, CAPTURE_ONLY, CREDIT, REFUND, SETTLE, AUTH_CAPTURE, VOID, DISPUTE, CHARGEBACK, DISPUTE_LOSS, DISPUTE_WIN, PRE_AUTH, CHECKIN, CHECKOUT, RE_AUTH"
                      items:
                        type: "string"
                        example: "['AUTH_ONLY', 'CHARGEBACK']"
                        enum:
                        - "AUTH_ONLY"
                        - "CAPTURE_ONLY"
                        - "CREDIT"
                        - "REFUND"
                        - "SETTLE"
                        - "AUTH_CAPTURE"
                        - "VOID"
                        - "DISPUTE"
                        - "CHARGEBACK"
                        - "DISPUTE_LOSS"
                        - "DISPUTE_WIN"
                        - "PRE_AUTH"
                        - "CHECKIN"
                        - "CHECKOUT"
                        - "RE_AUTH"
                callbackUrl:
                  type: "string"
                  format: "uri"
              required:
                - "auth"
                - "filters"
            examples:
              Básico:
                value:
                  auth:
                    login: "c4ca4238a0b923820dcc509a6f75849b"
                    tranKey: "cV5MJlkUgPq/BLG40M1Cp2mSkJcZg7FPL4FBxKo+t5A="
                    nonce: "NjQ4MjMzMjY0MDIyYw=="
                    seed: "2023-06-08T14:59:34-05:00"
                  filters:
                    startDate: "2023-06-07 14:59:34"
                    endDate: "2023-06-08 14:59:34"
                  callbackUrl: "https://dnetix.co/ping/report"
              Con estado:
                value:
                  auth:
                    login: "c4ca4238a0b923820dcc509a6f75849b"
                    tranKey: "cV5MJlkUgPq/BLG40M1Cp2mSkJcZg7FPL4FBxKo+t5A="
                    nonce: "NjQ4MjMzMjY0MDIyYw=="
                    seed: "2023-06-08T14:59:34-05:00"
                  filters:
                    startDate: "2023-06-07 14:59:34"
                    endDate: "2023-06-08 14:59:34"
                    state:
                      - "APPROVED"
                      - "REJECTED"
                  callbackUrl: "https://dnetix.co/ping/report"
  /gateway/report/obtain:
    post:
      summary: "Obtener un reporte previamente solicitado"
      operationId: "post-report-obtain"
      responses:
        200:
          description: "OK

            Una vez se tiene el reporte retorna la información, el cúal es un archivo separado por tabs con los siguientes encabezados

            La columna de type es agragada cuando el reporte usa el filtro de type


            ```
            id
            date
            transaction_date
            reference
            currency_code
            amount
            tax
            payment_method
            internal_reference
            status
            reason
            merchant
            terminal
            authorization
            refunded
            installments
            last_digits
            bank_currency
            bank_factor
            bank_amount
            issuer_name
            payer_document
            payer_first_name
            payer_last_name
            payer_email
            ip_address
            batch_number
            line_number
            type
            ```"
          content:
            text/plain:
              schema:
                type: "string"
              examples:
                example:
                  value: "id	date transaction_date		reference	currency_code		amount tax payment_method	internal_reference	 status		reason merchant		terminal	 authorization refunded		installments	 last_digits	 bank_currency bank_factor bank_amount issuer_name payer_document	payer_first_name payer_last_name payer_email ip_address	batch_number line_number	 type
                  c42977b5d4ff9d9613320c7ee98e9eb0		2021-01-13T01:54:50-05:00	2021-01-13T01:54:50-05:00		4113943		USD		2327	 442.13		ID_VS	221			 APPROVED	 000468232	00990101				1 0008		USD		1	2327 Testing Bank		32694548	 Miss Joanne Fadel MD	Price		blangworth@hotmail.com 237.234.250.30	AUTH_ONLY
                  315c9ca9e64bed46f24a2e18bdd76468		2021-01-13T01:54:50-05:00	2021-01-13T01:54:50-05:00		8122	 USD	 4457	846.83	 ID_VS 222 			APPROVED		 000468232 00990101				 1		0008	 USD	 1 4457		Testing Bank	 44056172	Charlotte Maggio Steuber drutherford@gmail.com	 164.233.22.247	AUTH_ONLY
                  fd239e99125c326e92137197fd5d1959		2021-01-13T01:54:50-05:00	2021-01-13T01:54:50-05:00		753446151	USD	3798 721.62	ID_VS		223				 APPROVED	 000468232		00990101			1	 0008	USD	1		3798	 Testing Bank	51751981 Mr. Abdiel Schroeder DDS		McKenzie	 leonard.beier@runte.com	 250.136.231.200		AUTH_ONLY
                  be945b27ff13291409b929cc9cb15274		2021-01-13T01:54:50-05:00	2021-01-13T01:54:50-05:00		482657 USD 1401		266.19 ID_VS	 224					APPROVED	 0468232	 00990101			 1	0008 USD 1	 1401	Testing Bank 98958097		Dr. Mia Abshire		Douglas		antonia.blanda@wyman.com	 32.1.213.30 	AUTH_ONLY
                  3aaa74df49cf3634276675c95e49f2af		2021-01-13T01:54:50-05:00	2021-01-13T01:54:50-05:00		77616851	 USD	 1921	364.99	 ID_VS 225 			APPROVED		 000468232 00990101				 1		0008	 USD	 1 1921		Testing Bank	 6211299	 Dr. Marcelina Huel I	Considine		vlangworth@emard.biz	 249.218.136.4	AUTH_ONLY
                  6e89e692975bb117db78360c8ebf0a00		2021-01-13T01:54:50-05:00	2021-01-13T01:54:50-05:00		74141	USD	773	146.87	 ID_VS 226 				APPROVED		 000468232 00990101				 1		0008	 USD	 1 773 Testing Bank		22736252	 Melody Goodwin DDS		Gerlach		iblock@ohara.com	 168.87.8.132	AUTH_ONLY
                  b50e4e8cca851a578fa40917030397a3		2021-01-13T01:54:50-05:00	2021-01-13T01:54:50-05:00		828		USD		473		89.87	ID_VS		227					APPROVED	 000468232		00990101			1	 0008	USD	1		473		Testing Bank	 9397147	 Freeman Kirlin		Aufderhar	drobel@kshlerin.com	21.185.38.170		AUTH_ONLY
                  b66ffe1bff91a15986cba677bbaeaa7f		2021-01-13T01:54:50-05:00	2021-01-13T01:54:50-05:00		581122 USD 1767		335.73 ID_VS	 228					APPROVED	 0468232	 00990101			 1	0008 USD 1	 1767	Testing Bank 62818359		Mrs. Rosina Mann	 Schaefer	ctremblay@gmail.com	15.8.188.238 	AUTH_ONLY
                  135afcb2f872cf55168461e7e874242a		2021-01-13T01:54:50-05:00	2021-01-13T01:54:50-05:00		3896507		USD		7	1.33 ID_VS	 229					APPROVED	 0468232	 00990101			 1	0008 USD 1	 7 Testing Bank		10597030	 Kristy Purdy IV	 Mills clyde68@hotmail.com 148.232.85.97 	AUTH_ONLY
                  19868ea1110eca766186806ef0e38f71		2021-01-13T01:54:50-05:00	2021-01-13T01:54:50-05:00		68490	USD	4987 947.53	ID_VS		230				 APPROVED	 000468232		00990101			1	 0008	USD	1		4987	 Testing Bank	32385057 Mr. Harley Howe Rogahn	oreilly.onie@hotmail.com 87.121.113.190		AUTH_ONLY	 "
        425:
          description: "Cuando la petición se realiza antes de que se termine de generar el reporte"
          content:
            application/json:
              schema:
                description: ""
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                required:
                  - "status"
      requestBody:
        content:
          application/json:
            schema:
              description: ""
              type: "object"
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                id:
                  type: "number"
              required:
                - "auth"
                - "id"
        description: ""
      description: "Permite obtener un reporte previamente generado"
      tags:
        - "Reporte de operaciones realizadas"
      parameters:
        - schema:
            type: "string"
            enum:
              - "gzip"
          in: "header"
          name: "accept-encoding"
          description: "Permite proporcionar gzip como formato de compresión."
  /gateway/mpi/lookup:
    post:
      summary: "3DS Lookup"
      operationId: "post-mpi-lookup"
      description: "Realiza el proceso inicial de validación de 3DS retornando los datos para que el usuario pueda continuar con el proceso"
      tags:
        - "Proceso 3DS"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                userAgent:
                  type: "string"
                  description: "Información del agente de usuario"
                  example: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.212 Safari/537.36"
                buyer:
                  $ref: "#/components/schemas/Buyer"
                payer:
                  $ref: "#/components/schemas/Payer"
                instrument:
                  $ref: "#/components/schemas/Instrument"
                payment:
                  $ref: "#/components/schemas/Payment"
                subscription:
                  $ref: "#/components/schemas/Subscription"
                version:
                  type: "string"
                  nullable: true
                  description: "Versión de 3DS en la que se procesara la petición."
                  enum:
                    - v2
                    - v2x
                returnUrl:
                  type: "string"
                  format: "uri"
                  maxLength: 250
                  description: "Url de retorno para retomar el control del usuario"
                additional:
                  type: object
                  properties:
                    initiatorIndicator:
                      type: string
                      description: "Actor que genera la transacción. Puede ser AGENT cuando es diferente al tarjeta habiente"
                      nullable: true
                      enum:
                        - AGENT
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    oneOf:
                      - $ref: "#/components/schemas/LookupResponseDataV2X"
                      - $ref: "#/components/schemas/LookupResponseDataV2"
        400:
          description: "Bad request"
          content:
            application/json:
              schema:
                description: ""
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
  /gateway/mpi/query:
    post:
      summary: "3DS Query"
      operationId: "post-mpi-query"
      tags:
        - "Proceso 3DS"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                instrument:
                  $ref: "#/components/schemas/Instrument"
                id:
                  type: "string"
                  description: "Identificador retornado en el lookup inicial sobre el cual se va a consultar"
              required:
                - "auth"
                - "id"
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    $ref: "#/components/schemas/ThreeDS"
                required:
                  - "status"
                  - "data"
  /gateway/balance:
    post:
      summary: "Servicio de consulta de balance"
      operationId: "post-rest-gateway-balance"
      description: "Este servicio permite la consulta de balance, debe consumirse cuando el medio de pago lo requiera ('requireBalance' en true)."
      tags:
        - "Obtener información"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                locale:
                  type: "string"
                auth:
                  $ref: "#/components/schemas/Authentication"
                instrument:
                  $ref: "#/components/schemas/BalanceInstrument"
                payment:
                  $ref: "#/components/schemas/Payment"
            examples:
              Consumo:
                value:
                  auth:
                    login: "c4ca4238a0b923820dcc509a6f75849b"
                    tranKey: "E0gHh8C6fceHnbsLlgBq2n7nRNjr8MVPcz0um1ZYCfs="
                    nonce: "NjE0YjUwZGNlYjJiNA=="
                    seed: "2021-09-22T10:50:52-05:00"
                  payment:
                    reference: "1234567890"
                    amount:
                      currency: "CRC"
                      total: "1000"
                  instrument:
                    card:
                      number: "4111111111111111"
                      expiration: "12/30"
                      cvv: "123"
                  ipAddress: "127.0.0.1"
                  userAgent: "Testing"
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  total:
                    type: "number"
                    example: "4973.19"
              examples:
                Ejemplo:
                  value:
                    status:
                      status: "OK"
                      reason: "00"
                      message: "La petición se ha procesado correctamente"
                      date: "2021-09-22T16:08:19-05:00"
                    total: 42356.32
        400:
          description: "FAILED"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
              examples:
                Ejemplo:
                  value:
                    status:
                      status: "FAILED"
                      reason: "BR"
                      message: "El campo instrument.card.expiration es obligatorio."
                      date: "2024-11-01T07:12:57-05:00"
  /security/pinpad/transaction:
    post:
      summary: "Solicitud de Pinpad"
      operationId: "post-rest-security-transaction"
      description: "Un PINPAD es un dispositivo electrónico que se utiliza en una transacción de débito, crédito o tarjeta inteligente para aceptar y cifrar el número de identificación personal (PIN) del titular de la tarjeta.

        Esta API proporciona un servicio PinPad con generación de PinBlock cifrada según ISO 9564."
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                instrument:
                  $ref: "#/components/schemas/Instrument"
            examples:
              Solicitud por tarjeta:
                value:
                  auth:
                    login: "613822f45568191a8cdf4ad2299f6d23"
                    tranKey: "bHehjzNcMQVQ1zto0GhmZxjeMhwA+3OlFPbOup16HGc="
                    nonce: "NjE1MWQ4MDE5YWViMw=="
                    seed: "2021-09-27T09:41:05-05:00"
                  instrument:
                    card:
                      number: "4111111111111111"
              Solicitud por token:
                value:
                  auth:
                    login: "613822f45568191a8cdf4ad2299f6d23"
                    tranKey: "bHehjzNcMQVQ1zto0GhmZxjeMhwA+3OlFPbOup16HGc="
                    nonce: "NjE1MWQ4MDE5YWViMw=="
                    seed: "2021-09-27T09:41:05-05:00"
                  instrument:
                    token:
                      token: faketoken12f233bd8f5d42138d681bf07ea8295429df07a4af287703e30c891
        description: ""
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    type: "object"
                    properties:
                      pinPad:
                        $ref: "#/components/schemas/PinPad"
              examples:
                Respuesta exitosa:
                  value:
                    status:
                      status: "APPROVED"
                      reason: "00"
                      message: "Aprobada"
                      date: "2021-09-14T17:43:48-05:00"
                    data:
                      pinPad:
                        positions: "7915864032"
                        transactionId: "b0c62f97-3b06-4c33-b68f-e281e95eb4bb"
                        pinLength: "4"
                Error:
                  value:
                    status:
                      status: "FAILED"
                      reason: "0"
                      message: ""
                      date: "2021-09-22T16:53:48-05:00"
                Rechazo:
                  value:
                    status:
                      status: "REJECTED"
                      reason: "05"
                      message: "El servicio requerido no se encuentra disponible en el sitio"
                      date: "2021-09-27T09:35:03-05:00"
                Servicio no disponible:
                  value:
                    status:
                      status: "REJECTED"
                      reason: "SU"
                      message: "El servicio requerido no se encuentra disponible en el sitio"
                      date: "2021-09-27T09:35:03-05:00"
      tags:
      - "Operaciones con Pinpad"
    parameters:
  /security/pinpad/pinblock:
    post:
      summary: "Generación de PinBlock a partir de PinPad"
      operationId: "post-rest-security-pinblock"
      description: "Permite generar el pinblock con una transaccion en base a las posiciones entregadas por el usuario que se seleccionaron del PinPad"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                instrument:
                  $ref: "#/components/schemas/Instrument"
            examples:
              Solicitud de PinBlock por tarjeta:
                value:
                  auth:
                    login: "613822f45568191a8cdf4ad2299f6d23"
                    tranKey: "bHehjzNcMQVQ1zto0GhmZxjeMhwA+3OlFPbOup16HGc="
                    nonce: "NjE1MWQ4MDE5YWViMw=="
                    seed: "2021-09-27T09:41:05-05:00"
                  instrument:
                    card:
                      number: "0215020177972730"
                    pinPad:
                      transactionId: "b0c62f97-3b06-4c33-b68f-e281e95eb4bb"
                      positions: "0123"
              Solicitud de Pinblock por token:
                value:
                  auth:
                    login: "613822f45568191a8cdf4ad2299f6d23"
                    tranKey: "bHehjzNcMQVQ1zto0GhmZxjeMhwA+3OlFPbOup16HGc="
                    nonce: "NjE1MWQ4MDE5YWViMw=="
                    seed: "2021-09-27T09:41:05-05:00"
                  instrument:
                    token:
                      token: faketoken12f233bd8f5d42138d681bf07ea8295429df07a4af287703e30c891
                    pinPad:
                      transactionId: "b0c62f97-3b06-4c33-b68f-e281e95eb4bb"
                      positions: "0123"
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    type: "object"
                    properties:
                      pinPad:
                        $ref: "#/components/schemas/PinPad"
              examples:
                Generación exitosa:
                  value:
                    status:
                      status: "APPROVED"
                      reason: "00"
                      message: "Aprobada"
                      date: "2021-09-14T17:43:48-05:00"
                    data:
                      pinPad:
                        positions: "0123"
                        transactionId: "b0c62f97-3b06-4c33-b68f-e281e95eb4bb"
                        pinBlock: "106C56A4819B68EA"
                        pinLength: "4"
                Error:
                  value:
                    status:
                      status: "FAILED"
                      reason: "0"
                      message: ""
                      date: "2021-09-22T16:53:48-05:00"
                Rechazo:
                  value:
                    status:
                      status: "REJECTED"
                      reason: "05"
                      message: "El servicio requerido no se encuentra disponible en el sitio"
                      date: "2021-09-27T09:35:03-05:00"
                Servicio no disponible:
                  value:
                    status:
                      status: "REJECTED"
                      reason: "SU"
                      message: "El servicio requerido no se encuentra disponible en el sitio"
                      date: "2021-09-27T09:35:03-05:00"
            application/xml:
              schema:
                $ref: "#/components/schemas/Authentication"
      tags:
        - "Operaciones con Pinpad"
  /cash/orders:
    post:
      summary: "Consultar orden de pago"
      operationId: post-gateway-search-cashorder
      description: "Este servicio permite consultar ordenes de pago mediante los valores de referencia, total y moneda."
      tags:
        - "Operaciones con ordenes de pago"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              required:
                - "auth"
                - "payment"
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                payment:
                  title: "Datos del pago"
                  type: "object"
                  properties:
                    reference:
                      title: "Referencia de pago"
                      type: "string"
                    amount:
                      $ref: "#/components/schemas/AmountBase"
                  required:
                    - "reference"
                    - "amount"
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    type: "array"
                    description: "Estructura que contiene las ordenes de pago encontradas. Si no se encontraron registros que coincidan con los filtros proporcionados será un arreglo vacio."
                    items:
                      type: "object"
                      properties:
                        id:
                          type: "number"
                        status:
                          type: "string"
                          enum:
                          - "PAYED"
                          - "EXPIRED"
                          - "ACTIVE"
                        payment:
                          type: "object"
                          properties:
                            reference:
                              type: "string"
                            description:
                              type: "string"
                            amount:
                              $ref: "#/components/schemas/Amount"
                            allowPartial:
                              type: "boolean"
                            subscribe:
                              type: "boolean"
                        createdAt:
                          type: "string"
                        expirationDate:
                          type: "string"
                        notificationUrl:
                          type: "string"
                        sessionId:
                          type: "number"
  /cash/delete:
    post:
      summary: "Eliminar orden de pago"
      operationId: post-gateway-delete-cashorder
      description: "Este servicio permite eliminar una orden de pago en estado pendiente."
      tags:
        - "Operaciones con ordenes de pago"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              required:
                - "auth"
                - "id"
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                id:
                  type: "number"
                  description: "Id de la orden de pago a eliminar."
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  id:
                    type: "number"
                    description: "Id de la orden de pago eliminada."
  /gateway/token:
    post:
      summary: "Consulta de token"
      operationId: "post-gateway-search-token"
      description: "Este servicio permite buscar un token mediante el valor del token o subtoken."
      tags:
        - "Tokenización de tarjetas"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              required:
                - "auth"
                - "instrument"
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                instrument:
                  title: "Instrument"
                  type: "object"
                  properties:
                    token:
                      title: "Token"
                      type: "object"
                      description: "Estructura que contiene la información de la tokenización a buscar."
                      properties:
                        token:
                          type: "string"
                          description: "Código generado para identificar la tarjeta en el sistema."
                        subtoken:
                          type: "string"
                          description: "Código alterno generado para identificar la tarjeta."
                  required:
                    - "token"
            examples:
              Consulta por token :
                value:
                  auth:
                    login: "613822f45568191a8cdf4ad2299f6d23"
                    tranKey: "bHehjzNcMQVQ1zto0GhmZxjeMhwA+3OlFPbOup16HGc="
                    nonce: "NjE1MWQ4MDE5YWViMw=="
                    seed: "2021-09-27T09:41:05-05:00"
                  instrument:
                    token:
                      token: faketoken12f233bd8f5d42138d681bf07ea8295429df07a4af287703e30c891
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    type: "object"
                    description: "Objeto con la información de la tokenización encontrada."
                    properties:
                      id:
                        type: "number"
                        description: "Identificador de la tokenización."
                      type:
                        type: "string"
                        description: "Tipo de tokenización."
                      token:
                        type: "string"
                        description: "Código generado para identificar la tarjeta en el sistema"
                      subtoken:
                        type: "string"
                        description: "Código alterno generado para identificar la tarjeta"
                      franchise:
                        type: "string"
                        description: "Franquicia de la tarjeta"
                      franchiseName:
                        type: "string"
                        description: "Nombre de la franquicia de la tarjeta"
                      issuerName:
                        type: "string"
                        description: "Nombre del banco emisor de la tarjeta"
                      lastDigits:
                        type: "string"
                        description: "Últimos dígitos de la tarjeta"
                      validUntil:
                        type: "string"
                        format: "date"
                        description: "Fecha de expiración de la tarjeta"
                      owner:
                        type: "string"
                        description: "Nombre del propietario de la tarjeta"
              examples:
                Ok:
                  value:
                    status:
                      status: "OK"
                      reason: "00"
                      message: "La petición se ha procesado correctamente"
                      date: "2021-06-17T11:29:37-05:00"
                    data:
                      id: 1
                      type: "card"
                      token: "faketoken12f233bd8f5d42138d681bf07ea8295429df07a4af287703e30c891"
                      subtoken: "fakesubtoken00005"
                      franchise: "visa"
                      franchiseName: "Visa"
                      issuerName: "TESTING"
                      lastDigits: "1111"
                      validUntil: "12/29"
                      owner: "John Doe"
components:
  schemas:
    Status:
      title: "Status"
      type: "object"
      description: "Estructura que contiene la información sobre una solicitud o pago, informa al estado actual de la misma."
      properties:
        status:
          type: "string"
          enum:
            - "OK"
            - "FAILED"
            - "APPROVED"
            - "APPROVED_PARTIAL"
            - "PARTIAL_EXPIRED"
            - "REJECTED"
            - "PENDING"
            - "PENDING_VALIDATION"
            - "PENDING_PROCESS"
            - "REFUNDED"
            - "REVERSED"
            - "ERROR"
            - "UNKNOWN"
            - "MANUAL"
            - "DISPUTE"
        reason:
          type: "string"
          minLength: "1"
          maxLength: "4"
        message:
          type: "string"
        date:
          type: "string"
          example: "2021-09-21T09:34:48-05:00"
    Subscription:
      title: "Subscription"
      x-stoplight:
        id: "vip3u3guypqyd"
      type: "object"
      description: "Estructura que contiene la información sobre una suscripción o transacción que no requiera un monto en específico"
      properties:
        reference:
          type: "string"
          x-stoplight:
            id: "hpkr64f4l7gwo"
          maxLength: "32"
        description:
          type: "string"
          minLength: "1"
          x-stoplight:
            id: "cc6z3gqusoy1k"
          maxLength: "254"
    Document:
      title: "Document"
      type: "object"
      description: "Estructura que contiene información acerca de un documento"
      properties:
        type:
          type: "string"
          maxLength: "3"
          enum:
            - "NIT"
            - "CC"
            - "CE"
            - "RUT"
            - "TI"
          example: "NIT"
          description: "Tipo de documento de identificación. [Para más información](/gateway/document-types)"
        number:
          type: "string"
          example: "123456123"
          description: "Número de documento de identificación."
        expeditionDate:
          type: "string"
          description: "Fecha de expedición "
        expirationDate:
          type: "string"
          description: "Fecha de expiración"
      required:
        - "type"
        - "number"
    Address:
      title: "Address"
      type: "object"
      description: "Estructura que contiene la información sobre una dirección física"
      properties:
        street:
          type: "string"
          maxLength: "128"
          description: "Calle"
        city:
          type: "string"
          maxLength: "30"
          description: "Ciudad"
        state:
          type: "string"
          maxLength: "3"
          description: "Código de la subdivisión del país que representa el estado o provincia. Formato ISO 3166-2"
          example: "CUN"
        postalCode:
          type: "string"
          maxLength: "10"
          description: "Código postal"
          example: "110111"
        country:
          type: "string"
          maxLength: "2"
          example: "CO"
          description: "País. Código ISO 3166-1 alpha-2"
        phone:
          type: "string"
          maxLength: "20"
          description: "Teléfono"
          example: "3003003000"
    Account:
      title: "Account"
      type: "object"
      description: "Estructura que contiene la información de la cuenta bancaria.
"
      required:
        - "bankCode"
        - "accountType"
        - "accountNumber"
      properties:
        bankName:
          type: "string"
          maxLength: "30"
          description: "Nombre del banco de la cuenta a procesar"
        bankCode:
          type: "string"
          maxLength: "17"
          description: "Código que identifica al banco en la red"
        accountType:
          type: "string"
          description: "tipo de cuenta"
          enum:
            - "SAV"
            - "DDA"
            - "CCD"
        accountNumber:
          type: "string"
          maxLength: "17"
          description: "Número de cuenta"
        franchise:
          type: "string"
          x-stoplight:
            id: "bhbb4cpy3me8p"
          maxLength: "20"
        verificationCode:
          type: "string"
          x-stoplight:
            id: "jpxori5mf80z2"
          example: "eyJhbGciOiJSUzI1NiJ9.eyJhY2NvdW50SGFzaCI6ImM5YWM2ZjFhZDhjNDA3Y2ZjNzMyNDljNTE2MTJjNTdmMWQxZGNiNTA4YjE4ZGJlYWE1MWQ0NDI5NjBjMjUwNDUyMzY4ZTg2YmUzMWQ3MDMxMDY4ZDM2MjM2NzVjYzhkYTUzNzhhODNmMTUwZjg5OTczOTBiZTEyMGU1ZmExN2RhIiwib25UZXN0Ijp0cnVlLCJzZXJ2aWNlIjoibW9jayIsImlkIjo0MDB9.dFMY4EwCrWq9EBmERFkKCoLHExPH4vgaCgnZaqB_mf8n3Sv6Qnu6Pb79onluX1OZecmYmBuHqZ_ykKXWSD4RMZSpckYFCiO3mlcJKI4qb91COhl_c2qXxYJuLEdbLfGlzf0k8-oJgFcO9gAS1Xm0hpTP4iiXF6st1hFwlfR3fpX4rr-bTsKgMvRSReMuxa0Vs92DykfqUR_3udlc0DFCPB9ZTaSqeRNHFAPAWNniUPWURQlW5c9J9xcyKTgKGzfI1_7h2I4ALQeRifptE2nC-HZtEMwtcToNh7hn0oL9lNFXnXGK9sWKORcyWKVfpEChS8z30UfX6kOhU6fp_qUwmA"
          description: "El verificationCode es un JSON Web Signature (JWS). Tiene el fin de ser el instrumento verificador del estado de la cuenta."
    Person:
      title: "Person"
      type: "object"
      description: "Estructura que refleja la información de una persona involucrada en una transacción."
      properties:
        documentType:
          type: "string"
          description: "[Tipo de documento de identificación](/gateway/document-types)"
          enum:
            - "CC"
            - "NIT"
            - "RUT"
            - "TI"
            - "PNN"
          example: "CC"
          maxLength: "3"
        Document:
          type: "string"
          description: "Número de documento de identificación."
        name:
          type: "string"
          description: "Nombre "
        surname:
          type: "string"
          description: "Apellidos"
        company:
          type: "string"
          description: "Compañia"
        email:
          type: "string"
          description: "Correo electrónico."
        address:
          $ref: "#/components/schemas/Address"
          description: "Objeto que contiene información de la dirección de una persona."
        mobile:
          type: "string"
          description: "Teléfono movil"
    Authentication:
      title: "Autenticación"
      type: "object"
      properties:
        login:
          type: "string"
        tranKey:
          type: "string"
        nonce:
          type: "string"
        seed:
          type: "string"
      description: "Estructura que contiene la información de autenticación del sitio generada de acuerdo al WSSE
        UsernameToken Profile 1.1"
    Instrument:
      title: "Instrument"
      type: "object"
      description: "Estructura que contiene la información acerca del medio de pago a usar en una transacción, esta estructura
es variable de acuerdo a la solicitud que se genere, cada servicio requiere que se usen unos u otros datos."
      properties:
        card:
          $ref: "#/components/schemas/Card"
        account:
          $ref: "#/components/schemas/Account"
        token:
          $ref: "#/components/schemas/Token"
        credit:
          $ref: "#/components/schemas/Credit"
        threeDS:
          $ref: "#/components/schemas/ThreeDS"
        otp:
          type: "string"
        pinPad:
          $ref: "#/components/schemas/PinPad"
        pin:
          type: "string"
          example: "0B880E2326F6409E"
          minLength: "2"
          maxLength: "20"
          description: "Recibe el código PIN cuando es plano o cuando se trata de un PinBlock"
        redirection:
          $ref: "#/components/schemas/Redirection"
        kount:
          $ref: "#/components/schemas/Kount"
        pocket:
          type: "string"
          description: "Bolsillo de la tarjeta utilizado para el pago"
    Card:
      title: "Card"
      type: "object"
      description: "Estructura que contiene la información de la tarjeta."
      properties:
        number:
          type: "string"
          maxLength: "20"
        expiration:
          type: "string"
          example: "12/22"
          pattern: "^[01]\\d\\/\\d{2}$"
        cvv:
          type: "string"
        installments:
          type: "number"
      required:
        - "number"
    Token:
      title: "Token"
      type: "object"
      description: "Estructura que contiene la información del token que asocia a la tarjeta

        Para la entrada solo es necesario el token o el subtoken y el cvv si se trata de una operación donde el usuario está presente

        Para la salida si se devuelven todos los datos al tokenizar
        "
      properties:
        token:
          type: "string"
          maxLength: "64"
          minLength: "64"
          description: "Código generado para identificar la tarjeta en el sistema"
        subtoken:
          type: "string"
          maxLength: "16"
          minLength: "16"
          description: "Código alterno generado para identificar la tarjeta"
        franchise:
          type: "string"
          enum:
            - "visa"
            - "visa_electron"
            - "amex"
            - "master"
            - "codensa"
            - "diners"
            - "jbc"
            - "discover"
            - "ris"
            - "credencial"
            - "comfama"
            - "colsubsidio"
            - "falabella"
            - "elo"
            - "somos"
            - "tuya"
            - "exito"
            - "alkosto"
            - "maestro"
            - "mefia"
            - "ath_card"
          description: "Codigo de la franquicia asociada al token (Solo como respuesta no es necesario enviarla)"
        franchiseName:
          type: "string"
        issuerName:
          type: "string"
        lastDigits:
          type: "string"
        validUntil:
          type: "string"
        cvv:
          type: "string"
          minLength: 3
          maxLength: 4
          description: "CVV solicitado al usuario en caso de que esté presente en la operación"
      x-examples:
        Ejemplo respuesta:
          value:
            token: faketoken12f233bd8f5d42138d681bf07ea8295429df07a4af287703e30c891
            subtoken: 'fakesubtoken00005'
            franchise: "master"
            franchiseName: "Mastercard"
            lastDigits: "0005"
            validUntil: "2018-12-31"
            installments: "3"
        Ejemplo en solicitud:
          value:
            token: faketoken12f233bd8f5d42138d681bf07ea8295429df07a4af287703e30c891
            cvv: "123"
    Credit:
      title: "Credit"
      type: "object"
      description: "Estructura que contiene la información del tipo de crédito"
      properties:
        code:
          type: "string"
        type:
          type: "string"
        groupCode:
          type: "string"
        installment:
          type: "integer"
    Pocket:
      title: "Pocket"
      type: "object"
      description: "Estructura que contiene la información del bolsillo de la tarjeta"
      properties:
        code:
          type: "string"
          description: "Valor del bolsillo"
        description:
          type: "string"
          description: "Descripción del bolsillo"
      x-examples:
    Payment:
      title: "Payment"
      type: "object"
      description: "Estructura que contiene la información acerca del pago de la transacción requerida al servicio web"
      properties:
        reference:
          type: "string"
          minLength: 1
          maxLength: 32
        description:
          type: "string"
          maxLength: 250
        amount:
          $ref: "#/components/schemas/Amount"
        dispersion:
          type: "array"
          items:
            $ref: "#/components/schemas/Dispersion"
        modifiers:
          type: "array"
          description: "Estructura que contiene modificadores de pago"
          items:
            $ref: "#/components/schemas/PaymentModifier"
        shipping:
          $ref: "#/components/schemas/Person"
          description: "Estructura para relacionar información de envío."
    Amount:
      title: "Amount"
      type: "object"
      description: "Estructura que contiene la información acerca del pago de la transacción requerida al servicio web"
      required:
        - "currency"
        - "total"
      properties:
        currency:
          type: "string"
          enum:
            - "USD"
            - "COP"
            - "CRC"
            - "EUR"
            - "CAD"
            - "AUD"
            - "GBP"
            - "MXN"
            - "CLP"
          example: "COP"
          minLength: 3
          maxLength: 3
        total:
          type: "number"
        taxes:
          type: "array"
          items:
            $ref: "#/components/schemas/TaxDetail"
        details:
          type: "array"
          items:
            $ref: "#/components/schemas/AmountDetail"
    TaxDetail:
      title: "TaxDetail"
      type: "object"
      description: "Estructura para almacenar información sobre un impuesto."
      properties:
        kind:
          type: "string"
          example: "valueAddedTax"
          description: "Tipo de impuesto reportado"
          enum:
            - valueAddedTax
            - exciseDuty
            - ice
            - airportTax
            - stateTax
            - reducedStateTax
            - municipalTax
        amount:
          type: "number"
        base:
          type: "number"
    PaymentModifier:
      title: "PaymentModifier"
      type: "object"
      description: "Estructura para almacenar información sobre un modificador de pago.

        NOTA: Si se envia un modificador que aplica descuento, no se tomará los descuentos configurados por promociones en el sítio."
      x-examples:
        law-discount:
          type: "FEDERAL_GOVERNMENT"
          code: "17934"
          additional:
            invoice: "123456"
      properties:
        type:
          type: "string"
          enum:
            - "FEDERAL_GOVERNMENT"
          description: "Tipo de modificador"
        code:
          type: "string"
          example: "17934"
          description: "Código del modificador. Cuando el tipo es FEDERAL_GOVERMENT, representa el número de ley para descuento."
        additional:
          type: "object"
          description: "Informaciones adicionales del modificador"
          properties:
            invoice:
              type: "string"
              description: "Número de factura. Requerido cuando tipo es FEDERAL_GOVERMENT."
    AmountDetail:
      title: "AmountDetail"
      type: "object"
      description: "Estructura para almacenar información sobre un valor adicional."
      properties:
        kind:
          type: "string"
        amount:
          type: "number"
    Dispersion:
      title: "Dispersion"
      type: "object"
      description: "Estructura que contiene la información requerida para un pago de dispersión"
      properties:
        agreement:
          type: "number"
          description: "Identificador de destinatario de la transacción. Para el sitio principal de la transacción, el valor debe ser null."
          nullable: true
        agreementType:
          type: "string"
          enum:
            - "AIRLINE"
            - "MERCHANT"
        amount:
          $ref: "#/components/schemas/Amount"
    InterestValues:
      title: "InterestValues"
      type: "object"
      description: "Estructura que contiene la información del cálculo de intereses para un tipo de crédito y monto"
      properties:
        original:
          type: "number"
        installment:
          type: "number"
        interest:
          type: "number"
        total:
          type: "number"
    AmountConversion:
      title: "AmountConversion"
      type: "object"
      description: "Estructura para definir el factor de conversión y los valores."
      properties:
        from:
          $ref: "#/components/schemas/AmountBase"
        to:
          $ref: "#/components/schemas/AmountBase"
        factor:
          type: "number"
    AmountBase:
      title: "AmountBase"
      type: "object"
      description: "Estructura que representa una cantidad que define la moneda y el total."
      properties:
        currency:
          type: "string"
        total:
          type: "number"
    Transaction:
      description: "Contiene información sobre una transacción"
      type: "object"
      x-examples:
        Ejemplo:
          status:
            status: "APPROVED"
            reason: "00"
            message: "Aprobada"
            date: "2021-09-20T20:10:57-05:00"
          date: "2021-09-20T20:10:56-05:00"
          transactionDate: "2021-09-20T20:10:56-05:00"
          internalReference: 2
          reference: "1234567890"
          paymentMethod: "DF_VS"
          franchise: "visa"
          franchiseName: "Visa"
          issuerName: "Testing Bank"
          amount:
            currency: "USD"
            total: 1
          conversion:
            from:
              currency: "USD"
              total: 1
            to:
              currency: "USD"
              total: 1
            factor: 1
          authorization: "000000"
          receipt: "2"
          type: "AUTH_ONLY"
          refunded: "false"
          lastDigits: "0008"
          provider: "DATAFAST"
          discount:
          processorFields:
            id: "de7c331a0f5bebdd1996250296cdaf37"
            b24: "000"
          additional:
            merchantCode: "1000000505"
            terminalNumber: "PY100404"
            credit:
              code: "0"
              type: "00"
              groupCode: "C"
              installments: 0
            totalAmount: 1
            iceAmount: 0
            batch:
            line:
            bin: "411076"
            expiration: "1221"
      title: ""
      properties:
        status:
          $ref: "#/components/schemas/Status"
        date:
          type: "string"
          description: |
            EJ: `2021-09-20T21:51:59-05:00`
        transactionDate:
          type: "string"
          description: |
            EJ: `2021-09-20T21:51:59-05:00`
        internalReference:
          type: "number"
        reference:
          type: "string"
          minLength: 1
        paymentMethod:
          type: "string"
          minLength: 1
        franchise:
          type: "string"
          minLength: 1
        franchiseName:
          type: "string"
          minLength: 1
        issuerName:
          type: "string"
          minLength: 1
          nullable: true
        amount:
          $ref: "#/components/schemas/Amount"
        conversion:
          $ref: "#/components/schemas/AmountConversion"
        authorization:
          type: "string"
          minLength: 1
          nullable: true
        receipt:
          type: "string"
          maxLength: 16
          nullable: true
        type:
          type: "string"
          minLength: 1
        refunded:
          type: "boolean"
        lastDigits:
          type: "string"
          minLength: 1
          nullable: true
        provider:
          type: "string"
          enum:
            - "CREDIBANCO"
            - "REDEBAN"
            - "INTERDIN"
            - "DATAFAST"
            - "TUYA-DIRECT"
            - "BRASPAG"
            - "TRANSERVER"
            - "SABRE"
            - "EVERTEC"
            - "ACH"
            - "ATH-AVALNET"
            - "SUPERGIROS"
            - "TECNICARD"
            - "MEDIANET"
            - "AUSTRO"
            - "COMFANDI"
            - "PAYSTUDIO"
            - "FLAMINGO"
            - "ATH-MOVIL"
            - "EBUS"
            - "BANCOLOMBIA"
        discount:
          type: "object"
          nullable: true
          properties:
            code:
              type: string
            type:
              type: string
            amount:
              type: number
            base:
              type: number
            percentage:
              type: number
        processorFields:
          type: "object"
          properties:
            id:
              type: "string"
            b24:
              type: "string"
        additional:
          type: "object"
          description: |
            Ver más en [Datos adicionales](/gateway/additional-data)
        preAuthorization:
          type: "object"
          items:
            type: "object"
            properties:
              condition:
                type: "string"
              internalReference:
                type: "number"
              authorization:
                type: "string"
                minLength: 1
                nullable: true
              receipt:
                type: "string"
                minLength: 1
                nullable: true
              amount:
                $ref: "#/components/schemas/Amount"
              salt:
                type: "string"
        dispersion:
          type: "array"
          items:
            type: "object"
            properties:
              status:
                $ref: "#/components/schemas/Status"
              agreement:
                type: "integer"
                nullable: true
              agreementType:
                type: "string"
                enum:
                  - "AIRLINE"
                  - "MERCHANT"
              authorization:
                type: "string"
                minLength: 1
                nullable: true
              receipt:
                type: "string"
                minLength: 1
                nullable: true
              amount:
                $ref: "#/components/schemas/Amount"
              refunded:
                type: "boolean"
              paymentMethod:
                type: "string"
      required:
        - "status"
        - "provider"
        - "internalReference"
        - "reference"
        - "paymentMethod"
        - "franchise"
        - "franchiseName"
        - "issuerName"
        - "amount"
        - "conversion"
        - "authorization"
        - "receipt"
        - "type"
        - "refunded"
        - "lastDigits"
        - "discount"
        - "processorFields"
        - "additional"
    ThreeDS:
      type: "object"
      properties:
        version:
          type: "string"
          enum:
            - "v2"
            - "v2x"
        id:
          type: "number"
          description: "Este valor solo aplica si la validación se hizo con el servicio de 3DS de Placetopay"
        enrolled:
          type: "string"
          minLength: 1
          enum:
            - "Y"
            - "N"
            - "U"
          description: "Informa si la tarjeta se encuentra registrada en 3DS"
        authenticated:
          type: "string"
          minLength: 1
          enum:
            - "Y"
            - "N"
            - "U"
            - "A"
            - "I"
            - "C"
            - "D"
            - "R"
          maxLength: 1
        eci:
          type: "string"
          minLength: 1
          description: "Indicador del resultado de la autenticación generado por el comercio electrónico."
          enum:
            - "02"
            - "01"
            - "00"
            - "05"
            - "06"
            - "07"
        cavv:
          type: "string"
          minLength: 28
          maxLength: 28
          nullable: true
          description: "Valor de autenticación para la franquicia generado por el ACS. (3DS campo `authenticationValue`)."
          example: "AJkBABIWcQAAAAM5FwIzdGiYeHM"
        xid:
          type: "string"
          minLength: 1
          description: "ID de Transacción DS (3DS campo `dsTransID`)."
        extra:
          type: "object"
          properties:
            transStatusReason:
              type: string
              description: "Proporciona información sobre el estado de la transacción."
              nullable: true
            acsTransId:
              type: string
              description: "Identificador único de transacción generado por el ACS."
              example: "37a7b6e0-fd58-4e38-98de-79c70c526a47"
            threeDSServerTransID:
              type: string
              description: "Identificador único de transacción generado por el 3DS Server."
              example: "eadd3a60-b870-41d0-977f-921b3dbe6323/MkGJDl2Y5E="
        validSignature:
          type: "boolean"
      required:
        - "enrolled"
        - "authenticated"
        - "eci"
        - "cavv"
        - "xid"
        - "version"
    LookupResponseDataV2:
      title: "LookupResponseDataV2"
      type: "object"
      description: "Esta estructura contiene las propiedades necesarias para continuar con una autenticación 3DS."
      properties:
        version:
          type: "string"
          description: "Versión del api en la que se hizo la sesión de autenticación."
          enum:
            - "v2"
        sessionToken:
          type: "string"
          example: "1bbf97e3660511d0ce82c15fca343307ba2f87fe84ba421368afb041ba1f638f"
        redirectUrl:
          type: "string"
          description: "URL a la cual se debe redirigir al cliente para continuar con el proceso de autenticación."
          example: "https://3dss-test.placetopay.com/threeds/v2/sessions/100950/examplea974d40500a650b6a77973985d367ad389a28b747dfdc918756a4ddc1"
        identifier:
          type: "number"
          description: "Identificador de la sesión de autenticación."
          example: 263325
      required:
        - "version"
        - "identifier"
        - "sessionToken"
        - "redirectUrl"
    LookupResponseDataV2X:
      title: "LookupResponseDataV2X"
      type: "object"
      description: "Los campos aquí descritos corresponden a una respuesta del servicio [3DS](/three-d-s-server/api/transactions/values)."
      properties:
        action:
          type: "string"
          enum:
            - "continue"
            - "redirect"
          example: "continue"
        version:
          type: "string"
          enum:
            - "v2x"
        sessionToken:
          type: "string"
          example: "1bbf97e3660511d0ce82c15fca343307ba2f87fe84ba421368afb041ba1f638f"
        redirectUrl:
          type: "string"
          description: "URL a la cual se debe redirigir al cliente para continuar con el proceso de autenticación"
          example: "https://3dss-test.placetopay.com/threeds/v2/sessions/100950/examplea974d40500a650b6a77973985d367ad389a28b747dfdc918756a4ddc1"
        id:
          type: "number"
          description: "Identificador de la sesión de autenticación."
          example: 263325
        enrolled:
          type: "string"
          enum:
            - "Y"
            - "N"
            - "U"
          description: "Presente si `action` fue `continue`. Indica si la tarjeta con la cual se realizó la transacción está enrolada (está registrada en los rangos de tarjeta para el emisor específico)."
        authenticated:
          type: "string"
          description: "Presente si `action` fue `continue`. Informa el estado de la autenticación"
          enum:
            - "Y"
            - "N"
            - "U"
            - "A"
            - "I"
            - "C"
            - "D"
            - "R"
          maxLength: 1
        validSignature:
          type: "boolean"
          description: "Presente si `action` fue `continue`. Informa si la firma de la respuesta es válida"
        eci:
          type: "string"
          description: "Código de autenticación por franquicia. Indicador del resultado de la autenticación generado por el comercio electrónico."
          enum:
            - "02"
            - "01"
            - "00"
            - "05"
            - "06"
            - "07"
        cavv:
          type: "string"
          minLength: 28
          maxLength: 28
          nullable: true
          description: "Presente si `action` fue `continue`. Valor de autenticación para la franquicia generado por el ACS. (3DS campo `authenticationValue`)."
          example: "AJkBABIWcQAAAAM5FwIzdGiYeHM"
        xid:
          type: "string"
          minLength: 1
          description: "Presente si `action` fue `continue`. ID de Transacción DS (3DS campo `dsTransID`)."
        extra:
          type: "object"
          description: "presente si `action` fue `continue`. Información adicional de la transacción."
          properties:
            transStatusReason:
              type: string
              description: "Proporciona información sobre el estado de la transacción."
              nullable: true
            acsTransId:
              type: string
              description: "Identificador único de transacción generado por el ACS."
              example: "37a7b6e0-fd58-4e38-98de-79c70c526a47"
            threeDSServerTransID:
              type: string
              description: "Identificador único de transacción generado por el 3DS Server."
              example: "eadd3a60-b870-41d0-977f-921b3dbe6323/MkGJDl2Y5E="
      required:
        - "enrolled"
        - "authenticated"
        - "eci"
        - "cavv"
        - "xid"
        - "version"
    PinPad:
      title: "PinPad"
      type: "object"
      description: "Estructura que contiene la información del servicio pinPad"
      properties:
        transactionId:
          type: "string"
        positions:
          type: "string"
        pinBlock:
          type: "string"
        length:
          type: "integer"
    Redirection:
      title: "Redirection"
      type: "object"
      description: "Representa un medio de pago de redirección, es decir que requiere que se envíe el usuario a otra URL para completar el proceso"
      properties:
        paymentMethod:
          type: "string"
          enum:
            - "_PSE_"
            - "BTNBC"
            - "PGEFT"
            - "BTNAV"
        returnURL:
          type: "string"
          format: "uri"
          maxLength: 250
          description: "URL para que una vez se termine el proceso de pago se retorne el control (cuando aplica)"
          example: "http://your-site.com/your-return-route"
        processURL:
          type: "string"
          format: "uri"
          maxLength: 250
          description: "URL a la cual se debe enviar al cliente para continuar el proceso, está es proporcionada por el servicio"
        additional:
          type: "object"
          description: "Estructura para relacionar datos adicionales en el proceso."
          properties:
            bankCode:
              type: "string"
              description: "Código que identifica al banco en la red."
              example: "1007"
            userType:
              type: "string"
              example: "person"
    Kount:
      title: "Kount"
      x-stoplight:
        id: "qevzv57mju2tp"
      type: "object"
      description: "Maneja información especifica para usar con el filtro de riesgo Kount"
      properties:
        session:
          type: "string"
          description: "Identificador de esta operación en Kount, debe ser único por transacción"
        type:
          type: "string"
          description: "Describe el tipo de operación que se está manejando en la sesión para definir los campos adicionales a enviar"
          enum:
            - "airline"
            - "soat"
      required:
        - "session"
    CardType:
      title: "CardType"
      x-stoplight:
        id: "x4y03rkspgz0b"
      type: "string"
      enum:
        - "C"
        - "R"
        - "A"
      description: "Indica el tipo de la tarjeta. C = credito, R = debito, A = ahorros"
    BankItem:
      title: "BankItem"
      x-stoplight:
        id: "60487hsjhovs9"
      type: "object"
      properties:
        code:
          type: "string"
          description: "Código de la entidad bancaria"
        description:
          type: "string"
          description: "Nombre de la entidad bancaria"
    BalanceInstrument:
      title: "Instrument"
      type: "object"
      description: "Estructura que contiene la información acerca del medio de pago a usar en una transacción, esta estructura
    es variable de acuerdo a la solicitud que se genere, cada servicio requiere que se usen unos u otros datos."
      properties:
        card:
          $ref: "#/components/schemas/BalanceCard"
    BalanceCard:
      title: "Card"
      type: "object"
      description: "Estructura que contiene la información de la tarjeta."
      properties:
        number:
          type: "string"
          maxLength: "20"
        expiration:
          type: "string"
          example: "12/22"
          pattern: "^[01]\\d\\/\\d{2}$"
      required:
        - "number"
        - "expiration"
    Payer:
      type: "object"
      properties:
        name:
          type: "string"
          example: "John"
        surname:
          type: "string"
          example: "Doe"
        email:
          type: "string"
          example: "johnDoe@email.com"
        mobile:
          type: "string"
          description: "El numero celular puede contener el indicativo del país"
          example: "+573195505452"
        address:
          $ref: "#/components/schemas/Address"
    Buyer:
      type: "object"
      properties:
        address:
          $ref: "#/components/schemas/Address"
