openapi: 3.0.0
info:
  title: Scudo
  version: '1.0'
  description: |-
    ## Secuencia de SCUDO

    ![MicrosoftTeams-image (10).png](https://stoplight.io/api/v1/projects/cHJqOjE1MDQz/images/IxHwMaAerqc)


    ## Conceptos

    ### Motor de reglas
    Sistema que permite analizar transacciones a través de reglas y grupos de reglas con flujos dinámicos definidos por el cliente.

    ### Riesgo Historico de Placetopay
    Consiste en realizar un análisis histórico de las compras que ha tenido el usuario pagando a través de la plataforma Placetopay. Con esta información, el sistema de control de fraude genera un Score de riesgo y, dependiendo de la parametrización definida por el cliente, define si la transacción puede ser procesada o requiere validación por otros módulos de seguridad.

    ### Riesgo central
    Permite validar si la tarjeta que están utilizando para la compra está asociada o no al documento de identificación del usuario, adicionalmente valida números telefónicos y correos electrónicos registrados en el pago contra la información que se encuentra en centros de riesgo generando un Score que permite al sistema decidir si la transacción es procesada o si continúa con otros módulos de seguridad. Este módulo solo aplica para Colombia.

    ### Puntaje de riesgo externo
    Valida la reputación del correo electrónico, direcciones IP, nombres, teléfonos y otros asociados a la transacción con el fin de identificar correlaciones con operaciones fraudulentas en otros sitios, generando un puntaje de riesgo que permite la toma de decisiones del sistema.

    ### Puntaje de riesgo internacional
    Valida la información de los usuarios contra motores de riesgo internacionales, permitiendo la validación de seguridad a través de sistemas de aprendizaje automático, generando un puntaje de riesgo basado en el análisis de múltiples variables asociadas con el comportamiento de pago de los usuarios en todo el mundo.

    ### Acceso a la consola administrativa
    A través de nuestra plataforma Placetopay es posible configurar el sistema de control de fraude, visualizar transacciones, reglas aplicadas, usuarios, crear invitaciones, generar reportes y estadísticas.
servers:
  - description: UAT
    url: 'https://scudo-uat.placetopay.net'
  - description: PRODUCTION
    url: 'https://scudo.placetopay.com'
paths:
  /api/v1/validate:
    post:
      summary: Validar transacción
      operationId: post-validate
      description: Este endpoint validará una transacción de acuerdo con las reglas que se definieron previamente.
      parameters:
        - schema:
            type: string
            example: application/json;charset=UTF-8
          in: header
          name: Content-Type
        - schema:
            type: string
            example: H0zMsPiLzegkYMFJxAuKJhUsyEimYstc
          in: header
          name: Api-Key
          description: Este parámetro contiene la clave de api proporcionada por Evertec
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - payer
                - payment
                - ip_address
                - user_agent
              properties:
                locale:
                  type: string
                  description: 2 letras idioma y 2 letras país (es_CO)
                  pattern: '^[a-z]{2}_[A-Z]{2}$'
                  example: es_CO
                payer:
                  $ref: '#/components/schemas/Person'
                buyer:
                  $ref: '#/components/schemas/Person'
                shipping:
                  $ref: '#/components/schemas/Person'
                payment:
                  $ref: '#/components/schemas/Payment'
                instrument:
                  $ref: '#/components/schemas/Instrument'
                ip_address:
                  type: string
                  description: Dirección IP del cliente
                user_agent:
                  type: string
                  maxLength: 255
                  minLength: 1
                  description: Agente de usuario del cliente
                additional:
                  type: object
                  description: Es un objeto que permite enviar datos adicionalmes en formato JSON.
                  nullable: true
                fingerprints:
                  type: object
                  description: Objeto que agrupa los diferentes 'fingerprints' que se pueden validar
                  minProperties: 1
                  maxProperties: 7
                  nullable: true
                  properties:
                    placetopay:
                      type: string
                      maxLength: 64
                    kount:
                      type: string
                      maxLength: 64
                    RSA:
                      type: string
                      maxLength: 64
                    lexis_nexis:
                      type: string
                      maxLength: 64
                    device_1:
                      type: string
                      maxLength: 64
                    device_2:
                      type: string
                      maxLength: 64
                    device_app:
                      type: string
                      maxLength: 64
            examples:
              ejemplo exitoso:
                value:
                  locale: es_CO
                  payer:
                    document: '555777888'
                    document_type: CC
                    first_name: jhon
                    last_name: doe
                    email: john@example.com
                    mobile: '5557788'
                    phone: '2223344'
                    address:
                      address: 199-129 E 43rd St
                      state: New York
                      city: New York
                      postal_code: '10017'
                      country: US
                  buyer:
                    document: '555777888'
                    document_type: CC
                    first_name: jhon
                    last_name: doe
                    email: jhon@example.com
                    mobile: '5557788'
                    phone: '2223344'
                    address:
                      address: 199-129 E 43rd St
                      city: New York
                      state: New York
                      postal_code: '10017'
                      country: US
                  shipping:
                    document: '555777888'
                    document_type: CC
                    first_name: jane
                    last_name: doe
                    email: jane@exampe.com
                    mobile: '4445566'
                    phone: '9990011'
                    address:
                      address: 199-129 E 43rd St
                      city: New York
                      state: New York
                      postal_code: '10017'
                      country: US
                  payment:
                    reference: 1567e989-86a1-41ca-b208-ca1acd694856
                    amount:
                      currency: USD
                      total: 355
                  instrument:
                    card:
                      pan_hash: 9bbef19476623ca56c17da75fd57734dbf82530686043a6e491c6d71befe8f6e
                      expiration_date: 12/22
                      bin: '411111'
                      last_4: '1111'
                    kount:
                      session: 1567e98986a141cab208ca1acd694856
                    merchant_code: '8888'
                  ip_address: 127.0.0.1
                  user_agent: 'Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:47.0) Gecko/20100101 Firefox/47.3'
                  additional:
                    key: 'first value '
                    second_key: 'second value '
                    array_object:
                      - first_value: 'first value '
                      - second_value: 'first value '
                    single_array:
                      - one
                      - two
                    object:
                      key: value
                      second_key: 'second value '
                  fingerprints:
                    placetopay: 16aa112b4ebb8bf7152421c1a0ae7dc5c2a4c8046877b9c9264bceec24a4d3da
                    kount: 26aa112b4ebb8bf7152421c1a0ae7dc5c2a4c8046877b9c9264bceec24a4d3da
                    RSA: 36aa112b4ebb8bf7152421c1a0ae7dc5c2a4c8046877b9c9264bceec24a4d3da
                    lexis_nexis: 46aa112b4ebb8bf7152421c1a0ae7dc5c2a4c8046877b9c9264bceec24a4d3da
                    device_2: 56aa112b4ebb8bf7152421c1a0ae7dc5c2a4c8046877b9c9264bceec24a4d3da
                    device_1: 66aa112b4ebb8bf7152421c1a0ae7dc5c2a4c8046877b9c9264bceec24a4d3da
                    device_app: 76aa112b4ebb8bf7152421c1a0ae7dc5c2a4c8046877b9c9264bceec24a4d3da
              ejemplo campo faltante:
                value:
                  locale: es_CO
                  payer:
                    document: '555777888'
                    document_type: CC
                    first_name: jhon
                    last_name: doe
                    email: john@example.com
                    mobile: '5557788'
                    phone: '2223344'
                    address:
                      address: 199-129 E 43rd St
                      city: New York
                      postal_code: '10017'
                      country: US
                  buyer:
                    document: '555777888'
                    document_type: CC
                    first_name: jhon
                    last_name: doe
                    email: jhon@example.com
                    mobile: '5557788'
                    phone: '2223344'
                    address:
                      address: 199-129 E 43rd St
                      city: New York
                      postal_code: '10017'
                      country: US
                  shipping:
                    document: '555777888'
                    document_type: CC
                    first_name: jane
                    last_name: doe
                    email: jane@exampe.com
                    mobile: '4445566'
                    phone: '9990011'
                    address:
                      address: 199-129 E 43rd St
                      city: New York
                      postal_code: '10017'
                      country: US
                  instrument:
                    card:
                      pan_hash: 9bbef19476623ca56c17da75fd57734dbf82530686043a6e491c6d71befe8f6e
                      expiration_date: 12/22
                      bin: '411111'
                      last_4: '1111'
                  ip_address: 127.0.0.1
                  user_agent: 'Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:47.0) Gecko/20100101 Firefox/47.3'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: '#/components/schemas/Status'
                  data:
                    type: object
                    description: Objeto que agrupa los resultados de la validación
                    nullable: true
                    required:
                      - id
                      - transaction
                      - action
                    properties:
                      id:
                        type: string
                        description: Id de la validación de scudo
                      transaction:
                        type: object
                        description: Objeto que agrupa la información de la transacción del cliente
                        required:
                          - reference
                        properties:
                          reference:
                            type: string
                            maxLength: 40
                            description: Referencia de la transacción del cliente
                      action:
                        type: object
                        description: Objeto que agrupa la acción recomendada
                        required:
                          - name
                          - performed_by
                        properties:
                          name:
                            type: string
                            enum:
                              - reject_transaction
                              - manual_transaction
                              - process_transaction
                            description: Acción recomendada de la validación
                          performed_by:
                            type: string
                            description: Nombre de la regla que define la acción recomendada
                          performed_by_code:
                            type: string
                            enum:
                              - emailage
                              - kount
                              - historical
                              - transunion
                              - allowed_countries_for_issuer_bank
                              - exclude_country_match_for_issuers
                              - allowed_countries_for_buyers
                              - amount_by_client
                              - number_of_emails_by_ip
                              - number_of_transactions_by_client
                              - number_of_cards_by_client
                              - match_country_ip_and_issuer_bank
                              - custom
                              - amount_by_transaction
                              - CLIENT_IDENTIFIER
                              - IP_ADDRESS
                              - CREDIT_CARD
                              - EMAIL
                              - BIN
                              - number_of_emails_by_card
                              - number_of_transactions_by_card
                            description: Código de la regla que define la acción recomendada
                      rules:
                        type: array
                        description: Reglas ejecutadas en la validación
                        items:
                          type: object
                          description: Objeto que agrupa la ejecución de una regla
                          required:
                            - name
                            - rule_code
                            - type
                            - response
                          properties:
                            action:
                              type: string
                              enum:
                                - continue_with_next_rule
                                - reject_transaction
                                - manual_transaction
                                - process_transaction
                                - continue_with_specific_rule
                                - continue_with_specific_ruleset
                              description: Acción de la regla
                            name:
                              type: string
                              description: Nombre de la regla
                            rule_code:
                              type: string
                              enum:
                                - emailage
                                - kount
                                - historical
                                - transunion
                                - behavioral_network
                                - allowed_countries_for_issuer_bank
                                - exclude_country_match_for_issuers
                                - allowed_countries_for_buyers
                                - amount_by_client
                                - number_of_emails_by_ip
                                - number_of_transactions_by_client
                                - number_of_cards_by_client
                                - match_country_ip_and_issuer_bank
                                - custom
                                - amount_by_transaction
                                - CLIENT_IDENTIFIER
                                - IP_ADDRESS
                                - CREDIT_CARD
                                - EMAIL
                                - BIN
                                - number_of_emails_by_card
                                - number_of_transactions_by_card
                              description: Código de la regla
                            type:
                              enum:
                                - filter
                                - score
                              type: string
                              description: Tipo de la regla
                            response:
                              type: object
                              oneOf:
                                - $ref: '#/components/schemas/Filter'
                                - $ref: '#/components/schemas/Score'
                                - $ref: '#/components/schemas/Details'
              examples:
                ejemplo exitoso:
                  value:
                    status:
                      code: 1200
                      name: successful
                      message: La transacción se valida con éxito
                    data:
                      id: 5da0c6a0-bc88-4482-821f-13428d1d8bac
                      transaction:
                        reference: 75c7bcc7-93ab-41a9-9bc9-2cf18f4d5003
                      action:
                        name: process_transaction
                        performed_by: Transunion
                        performed_by_code: transunion
                      rules:
                        - action: continue_with_next_rule
                          name: Paises permitidos según banco emisor
                          rule_code: allowed_countries_for_issuer_bank
                          type: filter
                          response:
                            match: null
                            failed: true
                        - action: continue_with_next_rule
                          name: Excluir coincidencia de pais para emisores
                          rule_code: exclude_country_match_for_issuers
                          type: filter
                          response:
                            match: null
                            failed: true
                        - action: continue_with_next_rule
                          name: Kount
                          rule_code: kount
                          type: score
                          response:
                            match: false
                            failed: false
                            score: '10'
                            service_response:
                              isExecuted: true
                              score: '30'
                              omniscore: '67'
                              system:
                                version: '0720'
                                mode: Q
                                merchantId: '201000'
                                sessonId: '40'
                                orderReference: 7e53ebb0-ae84-4f4d-9d98-36c3d74a0136
                              decision:
                                code: A
                                description: APPROVE
                                shouldApprove: true
                                shouldDecline: false
                                shouldReview: false
                              verification:
                                geolocationCountry: CO
                                geolocationRegion: CO_02
                                cardBrand: VISA
                                cardIsBlacklisted: false
                                aCatchVerificationHasBeenPerformed: false
                                threeDsMerchantResponse: ''
                                denialReasonCode: ''
                              transaction:
                                id: KNZ501674051
                                usedCardsCount: 1
                                usedDevicesCount: 1
                                deviceLayers: DF651ACF30..99CF09F417.E3D16F2CB7.061826EF2B
                                usedEmailsCount: 1
                                velocity: 0
                                maxAllowedVelocity: 0
                                site: DEFAULT
                                fingerprint: 4C2410BA22A64E21BF0C73EA88E48D7E
                                timezone: '300'
                                localtime: '2017-05-31 00:19'
                                region: CO_02
                                country: CO
                                httpCountry: US
                                hasProxy: false
                                hasJavascript: true
                                hasFlash: false
                                hasCookies: true
                                language: en
                                processedFromMobileDevice: false
                                mobileType: ''
                                mobileIsThroughMobileForwarder: false
                                processedFromVoiceDevice: false
                                processedFromRemotePC: false
                              ip:
                                address: 181.128.85.221
                                latitude: '6.2518'
                                longitude: '-75.5636'
                                country: CO
                                state: Antioquia
                                city: Medellin
                                provider: UNE
                              additional:
                                dateSinceFirstMadeTransaction: ''
                                screenResolution: 1050x1680
                                userAgent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML like Gecko) Chrome/76.0.3809.100 Safari/537.36
                                operativeSystem: Mac OS X 10.14.6
                                browser: ''
                                wasPreviouslyWhitelisted: false
                              triggeredRules:
                                '693746': GEOX Lower Risk Review Countries
                              triggeredCounters:
                                PAISESPARAREVISION: '1'
                              warnings:
                                - 401 EXTRA_DATA in request. Please see RIS spec for valid fields and ensure RIS input is URL encoded.
                              errorsBag:
                                isErrorResponse: false
                                code: null
                                key: null
                                errors: []
                        - action: continue_with_next_rule
                          name: Monto por cliente
                          rule_code: amount_by_client
                          type: filter
                          response:
                            match: false
                            failed: false
                        - action: continue_with_next_rule
                          name: Número de correos electrónicos por Ip
                          rule_code: number_of_emails_by_ip
                          type: filter
                          response:
                            match: false
                            failed: false
                        - action: continue_with_next_rule
                          name: Número de correos electrónicos por tarjeta
                          rule_code: number_of_emails_by_card
                          type: filter
                          response:
                            match: false
                            failed: false
                        - action: continue_with_next_rule
                          name: Número de transacciones por tarjeta
                          rule_code: number_of_transactions_by_card
                          type: filter
                          response:
                            match: false
                            failed: false
                        - action: continue_with_next_rule
                          name: Paises permitidos para compradores
                          rule_code: allowed_countries_for_buyers
                          type: filter
                          response:
                            match: false
                            failed: false
                        - action: continue_with_next_rule
                          name: Número de tarjetas
                          rule_code: number_of_cards_by_client
                          type: filter
                          response:
                            match: false
                            failed: false
                        - action: continue_with_next_rule
                          name: Número de transacciones
                          rule_code: number_of_transactions_by_client
                          type: filter
                          response:
                            match: false
                            failed: false
                        - action: continue_with_next_rule
                          name: Forzar coincidencia de IP país y banco emisor
                          rule_code: match_country_ip_and_issuer_bank
                          type: filter
                          response:
                            match: null
                            failed: true
                        - action: continue_with_next_rule
                          name: Histórico de transacciones
                          rule_code: historical
                          type: score
                          response:
                            match: false
                            failed: false
                            score: '320'
                            service_response:
                              risk: high
                              score: '1000'
                              reason: high
                              email: test@test.com
                              panHash: 02C3C62FB7C7EB153F16219E44CDFAA85C41814D
                              document: CC 1040035000
                              mobile: '3152807334'
                              phone: '2261751'
                              ipAddress: 132.248.0.1
                              date: null
                        - action: continue_with_next_rule
                          name: Emailage
                          rule_code: emailage
                          type: score
                          response:
                            match: false
                            failed: false
                            score: '0'
                            service_response:
                              emailInformation:
                                email: test@test.com
                                age: ''
                                country: US
                                company: ''
                                exists: 'Yes'
                                status: Verified
                                firstSeen: '2010-07-17T07:00:00Z'
                                firstSeenDays: '3617'
                                lastSeen: '2020-06-12T03:37:56Z'
                                imageUrl: ''
                                hits: '2'
                                uniqueHits: '1'
                                creationDays: ''
                                domain:
                                  name: gmail.com
                                  age: '1995-08-13T04:00:00Z'
                                  category: Webmail
                                  corporate: 'No'
                                  exists: 'Yes'
                                  company: Google
                                  countryName: United States
                                  riskLevel: '3'
                                  riskCountry: 'No'
                                  riskLevelMessage: Moderate
                                  relevantInfo: '508'
                                  relevantInfoMessage: Valid Webmail Domain from United States
                                  creationDays: '9069'
                                  fraudRisk: 071 Very Low
                              addressInformation:
                                billRiskCountry: 'No'
                                cityPostalMatch: 'Yes'
                                domainCountryMatch: 'Yes'
                                shippingCityPostalMatch: 'No'
                                shippingForward: ''
                              ipInformation:
                                ip: 132.248.0.1
                                anonymousDetected: null
                                autonomousSystemNumber: null
                                city: fairbanks
                                corporateProxy: null
                                country: CO
                                countryMatch: null
                                domain: null
                                isp: null
                                region: latinamerica
                                latitude: '64.8363'
                                longitude: '-147.715'
                                netSpeed: null
                                organization: null
                                reputation: null
                                userType: null
                              digitalIdentityScoreInformation:
                                description: High Confidence
                                overallScore: 87
                                billAddressToFullNameConfidence: 66
                                billAddressToLastNameConfidence: 55
                                emailToIpConfidence: 80
                                emailToBillAddressConfidence: 78
                                emailToFullNameConfidence: 88
                                emailToLastNameConfidence: 89
                                emailToPhoneConfidence: 44
                                emailToShipAddressConfidence: 78
                                ipToBillAddressConfidence: 90
                                ipToFullNameConfidence: 45
                                ipToLastNameConfidence: 56
                                ipToPhoneConfidence: 71
                                ipToShipAddressConfidence: 100
                                phoneToBillAddressConfidence: 100
                                phoneToFullNameConfidence: 97
                                phoneToLastNameConfidence: 34
                                phoneToShipAddressConfidence: 87
                                shipAddressToBillAddressConfidence: 77
                                shipAddressToFullNameConfidence: 78
                                shipAddressToLastNameConfidence: 34
                              ipRiskInformation:
                                level: '3'
                                levelMessage: Moderate
                                reasonId: '311'
                                reason: Moderate By Proxy Reputation And Country Code
                                riskCountry: ''
                              ipLocationInformation:
                                callingCode: '907'
                                city: fairbanks
                                cityConfidence: '95'
                                continentCode: na
                                country: Colombia
                                countryCode: CO
                                countryConfidence: '99'
                                distanceMil: '5366'
                                distanceKm: '8637'
                                latitude: '64.8363'
                                longitude: '-147.715'
                                map: 'https://app.emailage.com/query/GoogleMaps?latLng=64.8363,-147.715'
                                metroCode: '745'
                                region: latinamerica
                                regionConfidence: '99'
                                postalCode: '99701'
                                postalConfidence: '50'
                                timeZone: '-500'
                              emailOwnerInformation:
                                eName: Test EA
                                location: ''
                                title: ''
                              phoneInformation:
                                carrierName: Verizon Wireless
                                carrierType: mobile
                                inBillingLocation: Not Found
                                owner: Test EA
                                ownerMatch: 'Y'
                                ownerType: CONSUMER
                                status: VALID
                              socialMediaInformation:
                                smFriends: '53'
                                smLinks:
                                  - source: GoogleSearch
                                    link: 'https://plus.google.com/115619223171371600000'
                                  - source: Facebook
                                    link: 'https://www.facebook.com/user'
                              score: '0'
                              riskReason: '14'
                              riskReasonMessage: Email Created at least 9.9 Years Ago
                              riskStatus: '2'
                              riskAdvice: '3'
                              riskAdviceMessage: Lower Fraud Risk
                              riskBand: '1'
                              sourceIndustry: ''
                              fraudType: ''
                              lastFlaggedOn: ''
                              returnCode: '0'
                              returnMessage: ''
                              isExecuted: true
                        - action: continue_with_next_rule
                          name: Transunion
                          rule_code: transunion
                          type: score
                          response:
                            match: false
                            failed: false
                            score: '995'
                            service_response:
                              document: '123456789'
                              documentType: CC
                              fullName: Foo
                              documentStatus: 1
                              documentStatusText: Vigente
                              ageRange: ''
                              sheetCode: '05521509999999999999'
                              sheetDateTime: '2021-02-25T08:50:16-05:00'
                              returnCode: 1
                              returnText: Consulta exitosa
                              score: '995'
                              match: true
                              errorMessage: null
                              failed: false
                              isExecuted: true
                        - action: reject_transaction
                          name: Red de comportamiento
                          rule_code: behavioral_network
                          type: score
                          response:
                            match: true
                            failed: false
                            score: '0.99'
                            service_response:
                              fraudScore: 0.99
                              fraudConcept:
                                - code: F22
                                  description: Empresas fachada - Frecuencia inusual de país emisor tarjeta en comercio
                                - code: F23
                                  description: Calidad de datos en el navegador
                                - code: F24
                                  description: Calidad de datos en sistema operativo
                              legalScore: 0.01
                              legalConcept:
                                - code: L11
                                  description: Calidad de datos de sección de comercio
                                - code: L10
                                  description: Calidad de datos en tarjeta
                                - code: L1
                                  description: Similitud con historial de pago
                              reliable: true
                              errorMessage: null
        '422':
          description: Unprocessable Entity (WebDAV)
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: '#/components/schemas/Status'
                  data:
                    type:
                      - object
                      - 'null'
                    properties:
                      id:
                        type: string
                      payment:
                        type: object
                        required:
                          - reference
                        properties:
                          reference:
                            type: string
                      rules:
                        type: array
                        items:
                          type: object
                          properties:
                            name:
                              type: string
                            type:
                              enum:
                                - filter
                                - score
                              type: string
                            response:
                              type: object
                          required:
                            - name
                            - type
                            - response
                      action:
                        type: object
                        properties:
                          name:
                            type: string
                          performed_by:
                            type: string
                    required:
                      - id
                      - payment
              examples:
                example-missing-param:
                  value:
                    status:
                      code: 1201
                      name: missing_required_fields
                      message: 'Missing elements: [payment]'
                    data: null
                ejemplo reglas no encontradas:
                  value:
                    status:
                      code: 1310
                      name: rules_not_found
                      message: 'reglas no encontradas, verifique la configuración del sitio'
                    data: null
    parameters: []
  /api/v1/notify:
    post:
      summary: Notificar Validación
      operationId: post-notify
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: '#/components/schemas/Status'
                  data:
                    type: object
                    description: Contiene las propiedades de la respuesta.
                    required:
                      - id
                    properties:
                      id:
                        type: string
                        description: Id de la validación notificada
                      status:
                        type: string
                        enum:
                          - rejected
                          - approved
                          - pending
                          - canceled
                          - refunded
                          - chargeback
                        description: Estado enviado en la petición
                required:
                  - status
                  - data
              examples:
                ejemplo exitoso:
                  value:
                    status:
                      code: 1200
                      name: successful
                      message: La transacción se notifica correctamente
                    data:
                      id: 81d1ed97-5bd2-4242-8015-12867fdb475a
                      status: approved
          headers: {}
        '422':
          description: Unprocessable Entity
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: '#/components/schemas/Status'
                  data:
                    type: 'null'
              examples:
                example-wrong-id:
                  value:
                    status:
                      code: 1301
                      name: id_missmatch
                      message: 'El id o referencia, no coincide en scudo'
                    data: null
                example-wrong-status:
                  value:
                    status:
                      code: 1350
                      name: failed
                      message: El estado real es (approved) y no se puede cambiar a (approved)
                    data:
                      id: 6c91783a-c815-4175-a722-81b7cb080599
                      status: approved
                Cannot change status:
                  value:
                    status:
                      code: 1350
                      name: failed
                      message: Actual status is approved and cannot be changed to approved
                    data:
                      id: 5bbf2fd2-7395-48c6-8799-49f6f326b894
                      status: approved
      description: 'Este endpoint actualizará el estado de una transacción Scudo validada previamente con el estado de la transacción del cliente. Una transacción que fue validada por Scudo devolverá una respuesta con una acción (según la configuración de las reglas), el cliente deberá notificar a Scudo cuál es el estado final de esta transacción (aprobado, rechazado, etc.). Es importante actualizar todas las transacciones de Scudo para una mejor coherencia de la información.'
      parameters:
        - schema:
            type: string
            example: application/json;charset=UTF-8
          in: header
          name: Content-Type
          required: true
        - schema:
            type: string
            example: H0zMsPiLzegkYMFJxAuKJhUsyEimYstc
          in: header
          name: Api-Key
          required: true
          description: Este parámetro contiene la clave de api proporcionada por Evertec
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                  description: Id del resultado de la validación
                  format: uuid
                transaction:
                  type: object
                  description: Object that contains the transaction properties
                  required:
                    - reference
                    - status
                  properties:
                    reference:
                      type: string
                      description: Referencia de la transacción del cliente
                      example: f0ce88f8-bba3-11ea-b3de-0242ac130004
                    status:
                      description: El objeto define el estado de la transacción del cliente.
                      type: object
                      required:
                        - name
                      properties:
                        name:
                          type: string
                          enum:
                            - rejected
                            - approved
                            - pending
                            - canceled
                            - refunded
                            - chargeback
                          description: Estado de la transacción del cliente
              required:
                - id
                - transaction
            examples:
              example-success:
                value:
                  id: a2ce48f8-bba3-11ea-b3de-0242ac13352b
                  transaction:
                    reference: f0ce88f8-bba3-11ea-b3de-0242ac130004
                    status:
                      name: approved
        description: ''
    parameters: []
  '/api/v1/validations/{scudo_reference}':
    parameters:
      - schema:
          type: string
        name: scudo_reference
        in: path
        required: true
    get:
      summary: Obtener Validación
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: '#/components/schemas/Status'
                  data:
                    type: object
                    description: Objeto que agrupa los resultados de la validación
                    nullable: true
                    properties:
                      created_at:
                        type: string
                        description: Fecha de creación de la validación
                      notified_at:
                        type: string
                        description: Fecha de notificacion de la validación
                        nullable: true
                      notified_status:
                        type: string
                        enum:
                          - approved
                          - canceled
                          - chargeback
                          - pending
                          - refunded
                          - rejected
                        description: Estado final de la transacción
                      id:
                        type: string
                        description: Identificador de la validación
                      resolved:
                        type: object
                        description: Objeto que agrupa campos de una validacion de scudo con validacion manual
                        nullable: true
                        properties:
                          resolved_at:
                            type: string
                            description: Fecha de resolución de la validación manual
                          action:
                            type: string
                            description: Acción de resolución de la validación manual
                          reason:
                            type: string
                            description: Razón de resolución de la validación manual
                            nullable: true
                          comments:
                            type: string
                            description: Comentarios de resolución de la validación manual
                            nullable: true
                      transaction:
                        type: object
                        description: Objeto que agrupa la información de la transacción del cliente
                        properties:
                          reference:
                            type: string
                            description: Referencia de la transacción del cliente
                      action:
                        type: object
                        description: Objeto que agrupa la acción recomendada
                        properties:
                          name:
                            type: string
                            description: Acción recomendada de la validación
                            enum:
                              - reject_transaction
                              - manual_transaction
                              - process_transaction
                          performed_by:
                            type: string
                            description: Nombre de la regla que define la acción recomendada
                          performed_by_code:
                            type: string
                            enum:
                              - emailage
                              - kount
                              - historical
                              - transunion
                              - allowed_countries_for_issuer_bank
                              - exclude_country_match_for_issuers
                              - allowed_countries_for_buyers
                              - amount_by_client
                              - number_of_emails_by_ip
                              - number_of_transactions_by_client
                              - number_of_cards_by_client
                              - match_country_ip_and_issuer_bank
                              - custom
                              - amount_by_transaction
                              - number_of_emails_by_card
                              - number_of_transactions_by_card
                            description: Código de la regla que define la acción recomendada
                      rules:
                        type: array
                        description: Reglas ejecutadas en la validación
                        items:
                          type: object
                          description: Objeto que agrupa la ejecución de una regla
                          properties:
                            action:
                              type: string
                              enum:
                                - continue_with_next_rule
                                - reject_transaction
                                - manual_transaction
                                - process_transaction
                                - continue_with_specific_rule
                                - continue_with_specific_ruleset
                              description: Acción de la regla
                            name:
                              type: string
                              description: Nombre de la regla
                            rule_code:
                              type: string
                              enum:
                                - emailage
                                - kount
                                - historical
                                - transunion
                                - allowed_countries_for_issuer_bank
                                - exclude_country_match_for_issuers
                                - allowed_countries_for_buyers
                                - amount_by_client
                                - number_of_emails_by_ip
                                - number_of_transactions_by_client
                                - number_of_cards_by_client
                                - match_country_ip_and_issuer_bank
                                - custom
                                - amount_by_transaction
                                - CLIENT_IDENTIFIER
                                - IP_ADDRESS
                                - CREDIT_CARD
                                - EMAIL
                                - BIN
                                - number_of_emails_by_card
                                - number_of_transactions_by_card
                              description: Código de la regla
                            type:
                              type: string
                              enum:
                                - filter
                                - score
                              description: Tipo de la regla
                            response:
                              anyOf:
                                - $ref: '#/components/schemas/Score'
                                - $ref: '#/components/schemas/Filter'
                                - type: object
                                  $ref: '#/components/schemas/Details'
                              description: Objeto que agrupa el resultado de la regla ejecutada
              examples:
                successful:
                  value:
                    status:
                      code: 1200
                      name: successful
                      message: Validation was successfully queried
                    data:
                      created_at: '2022-04-18T20:23:58.000000Z'
                      notified_at: null
                      notified_status: pending
                      resolved:
                        resolved_at: '2022-04-18 21:15:21'
                        action: reject_transaction
                        reason: Possible fraud
                        comments: Posible fraude reportado por el cliente
                      id: ec058900-5f26-42e5-8abd-b0681e4a3253
                      transaction:
                        reference: 0cf06ad7-ff26-4a09-b40e-1375bbf31771
                      action:
                        name: manual_transaction
                        performed_by: Force match IP country and issuing bank
                        performed_by_code: match_country_ip_and_issuer_bank
                      rules:
                        - action: continue_with_next_rule
                          name: Number of cards
                          rule_code: number_of_cards_by_client
                          type: filter
                          response:
                            match: true
                            failed: false
                        - action: continue_with_next_rule
                          name: Historical transactions
                          rule_code: historical
                          type: score
                          response:
                            match: false
                            score: '370'
                            failed: false
                            service_response:
                              date: null
                              risk: medium
                              email: test@test.com
                              phone: '2261751'
                              score: '370'
                              mobile: '3152807334'
                              reason: medium
                              panHash: c393bb89bcb92c7d95d405f26699b33f4956c92f607fbe8c2facb836c762382b
                              document: CC 1040035000
                              ipAddress: 132.248.0.1
                        - action: continue_with_next_rule
                          name: Amount by client
                          rule_code: amount_by_client
                          type: filter
                          response:
                            match: false
                            failed: false
                        - action: continue_with_next_rule
                          name: Número de correos electrónicos por Ip
                          rule_code: number_of_emails_by_ip
                          type: filter
                          response:
                            match: false
                            failed: false
                        - action: continue_with_next_rule
                          name: Número de correos electrónicos por tarjeta
                          rule_code: number_of_emails_by_card
                          type: filter
                          response:
                            match: false
                            failed: false
                        - action: continue_with_next_rule
                          name: Número de transacciones por tarjeta
                          rule_code: number_of_transactions_by_card
                          type: filter
                          response:
                            match: false
                            failed: false
                        - action: continue_with_next_rule
                          name: Exclude country match for issuers
                          rule_code: exclude_country_match_for_issuers
                          type: filter
                          response:
                            match: null
                            failed: true
                        - action: continue_with_next_rule
                          name: Allowed countries for buyers
                          rule_code: allowed_countries_for_buyers
                          type: filter
                          response:
                            match: false
                            failed: false
                        - action: continue_with_next_rule
                          name: Emailage
                          rule_code: emailage
                          type: score
                          response:
                            match: false
                            score: '0'
                            failed: false
                            service_response:
                              score: '0'
                              riskBand: '1'
                              fraudType: ''
                              isExecuted: true
                              returnCode: '0'
                              riskAdvice: '3'
                              riskReason: '14'
                              riskStatus: '2'
                              ipInformation: null
                              lastFlaggedOn: ''
                              returnMessage: ''
                              sourceIndustry: ''
                              emailInformation:
                                age: ''
                                hits: null
                                email: test@test.com
                                domain:
                                  age: '1995-08-13T04:00:00Z'
                                  name: gmail.com
                                  exists: 'Yes'
                                  company: Google
                                  category: Webmail
                                  corporate: 'No'
                                  riskLevel: '3'
                                  countryName: United States
                                  relevantInfo: '508'
                                  riskLevelMessage: Moderate
                                  relevantInfoMessage: Valid Webmail Domain from United States
                                exists: 'Yes'
                                status: Verified
                                country: US
                                imageUrl: ''
                                lastSeen: '2020-06-12T03:37:56Z'
                                firstSeen: '2010-07-17T07:00:00Z'
                                uniqueHits: '1'
                              riskAdviceMessage: Lower Fraud Risk
                              riskReasonMessage: Email Created at least 9.9 Years Ago
                        - action: continue_with_next_rule
                          name: Transunion
                          rule_code: transunion
                          type: score
                          response:
                            match: false
                            score: '995'
                            failed: false
                            service_response:
                              match: false
                              score: '995'
                              failed: false
                              ageRange: ''
                              document: '123456789'
                              fullName: Foo
                              sheetCode: '05521509999999999999'
                              isExecuted: true
                              returnCode: 1
                              returnText: Consulta exitosa
                              documentType: CC
                              errorMessage: null
                              sheetDateTime: '2021-02-25T08:50:16-05:00'
                              documentStatus: 1
                              documentStatusText: Vigente
                        - action: continue_with_next_rule
                          name: Number of transactions
                          rule_code: number_of_transactions_by_client
                          type: filter
                          response:
                            match: false
                            failed: false
                        - action: continue_with_next_rule
                          name: Kount
                          rule_code: kount
                          type: score
                          response:
                            match: false
                            score: '10'
                            failed: false
                            service_response:
                              score: '10'
                              errors: []
                              ipCity: Boise
                              ipState: Idaho
                              decision: A
                              language: en
                              ipAddress: 208.75.113.3
                              ipCountry: US
                              userAgent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML like Gecko) Chrome/76.0.3809.100 Safari/537.36
                              ipLatitude: '43.6337'
                              ipProvider: PENDING
                              isExecuted: true
                              fingerprint: 290D1C0172364AADAC25D9FD0B13D946
                              ipLongitude: '-116.2004'
                              deviceLayers: DF651ACF30..99CF09F417.E3D16F2CB7.061826EF2B
                              errorMessage: null
                              quantityErrors: 0
                              operativeSystem: Mac OS X 10.14.6
                              screenResolution: 1050x1680
                              decisionDescription: APPROVE
                        - action: continue_with_next_rule
                          name: Allowed Issuer Bank Countries
                          rule_code: allowed_countries_for_issuer_bank
                          type: filter
                          response:
                            match: null
                            failed: true
                        - action: continue_with_next_rule
                          name: Force match IP country and issuing bank
                          rule_code: match_country_ip_and_issuer_bank
                          type: filter
                          response:
                            match: null
                            failed: true
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: '#/components/schemas/Status'
                  data:
                    nullable: true
              examples:
                not found:
                  value:
                    status:
                      code: 1350
                      name: not_found
                      message: Model validation with id 4175ebd7-2dbb-47c2-bf49-255e43c32c1cs not found
                    data: null
      operationId: get-validations-id
      description: Este endpoint devuelve una validación de scudo
      parameters:
        - schema:
            type: string
          in: header
          name: Api-Key
          description: Este parámetro contiene la clave de api proporcionada por Evertec
          required: true
  /api/v1/validations/search:
    parameters: []
    post:
      summary: Busqueda de Validaciones
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: '#/components/schemas/Status'
                  data:
                    type: object
                    description: Objeto que agrupa los resultados de la consulta
                    nullable: true
                    properties:
                      validations:
                        type: array
                        items:
                          type: object
                          properties:
                            created_at:
                              type: string
                              description: Fecha de creación de la validación
                            notified_at:
                              type: string
                              description: Fecha de notificacion de la validación
                              nullable: true
                            notified_status:
                              type: string
                              enum:
                                - approved
                                - canceled
                                - chargeback
                                - pending
                                - refunded
                                - rejected
                              description: Estado final de la transacción
                            id:
                              type: string
                              description: Identificador de la validación
                            resolved:
                              type: object
                              description: Objeto que agrupa campos de una validacion de scudo con validacion manual
                              nullable: true
                              properties:
                                resolved_at:
                                  type: string
                                  description: Fecha de resolución de la validación manual
                                action:
                                  type: string
                                  description: Acción de resolución de la validación manual
                                reason:
                                  type: string
                                  description: Razón de resolución de la validación manual
                                  nullable: true
                                comments:
                                  type: string
                                  description: Comentarios de resolución de la validación manual
                                  nullable: true
                            transaction:
                              type: object
                              description: Objeto que agrupa la información de la transacción del cliente
                              properties:
                                reference:
                                  type: string
                                  description: Referencia de la transacción del cliente
                            action:
                              type: object
                              description: Objeto que agrupa la acción recomendada
                              properties:
                                name:
                                  type: string
                                  description: Acción recomendada de la validación
                                  enum:
                                    - reject_transaction
                                    - manual_transaction
                                    - process_transaction
                                performed_by:
                                  type: string
                                  description: Nombre de la regla que define la acción recomendada
                                performed_by_code:
                                  type: string
                                  enum:
                                    - emailage
                                    - kount
                                    - historical
                                    - transunion
                                    - allowed_countries_for_issuer_bank
                                    - exclude_country_match_for_issuers
                                    - allowed_countries_for_buyers
                                    - amount_by_client
                                    - number_of_emails_by_ip
                                    - number_of_transactions_by_client
                                    - number_of_cards_by_client
                                    - match_country_ip_and_issuer_bank
                                    - custom
                                    - amount_by_transaction
                                    - number_of_emails_by_card
                                    - number_of_transactions_by_card
                                  description: Código de la regla que define la acción recomendada
                            rules:
                              type: array
                              description: Reglas ejecutadas en la validación
                              items:
                                type: object
                                description: Objeto que agrupa la ejecución de una regla
                                properties:
                                  action:
                                    type: string
                                    enum:
                                      - continue_with_next_rule
                                      - reject_transaction
                                      - manual_transaction
                                      - process_transaction
                                      - continue_with_specific_rule
                                      - continue_with_specific_ruleset
                                    description: Acción de la regla
                                  name:
                                    type: string
                                    description: Nombre de la regla
                                  rule_code:
                                    type: string
                                    enum:
                                      - emailage
                                      - kount
                                      - historical
                                      - transunion
                                      - allowed_countries_for_issuer_bank
                                      - exclude_country_match_for_issuers
                                      - allowed_countries_for_buyers
                                      - amount_by_client
                                      - number_of_emails_by_ip
                                      - number_of_transactions_by_client
                                      - number_of_cards_by_client
                                      - match_country_ip_and_issuer_bank
                                      - custom
                                      - amount_by_transaction
                                      - CLIENT_IDENTIFIER
                                      - IP_ADDRESS
                                      - CREDIT_CARD
                                      - EMAIL
                                      - BIN
                                      - number_of_emails_by_card
                                      - number_of_transactions_by_card
                                    description: Código de la regla
                                  type:
                                    type: string
                                    enum:
                                      - filter
                                      - score
                                    description: Tipo de la regla
                                  response:
                                    anyOf:
                                      - $ref: '#/components/schemas/Score'
                                      - $ref: '#/components/schemas/Filter'
                                      - type: object
                                        $ref: '#/components/schemas/Details'
                                    description: Objeto que agrupa el resultado de la regla ejecutada
              examples:
                successful:
                  value:
                    status:
                      code: 1200
                      name: successful
                      message: Validation was successfully queried
                    data:
                      validations:
                        - created_at: '2022-04-18T20:23:58.000000Z'
                          notified_at: null
                          notified_status: pending
                          resolved:
                            resolved_at: '2022-04-18 21:15:21'
                            action: reject_transaction
                            reason: Possible fraud
                            comments: Posible fraude reportado por el cliente
                          id: ec058900-5f26-42e5-8abd-b0681e4a3253
                          transaction:
                            reference: 0cf06ad7-ff26-4a09-b40e-1375bbf31771
                          action:
                            name: manual_transaction
                            performed_by: Force match IP country and issuing bank
                            performed_by_code: match_country_ip_and_issuer_bank
                          rules:
                            - action: continue_with_next_rule
                              name: Number of cards
                              rule_code: number_of_cards_by_client
                              type: filter
                              response:
                                match: true
                                failed: false
                            - action: continue_with_next_rule
                              name: Historical transactions
                              rule_code: historical
                              type: score
                              response:
                                match: false
                                score: '370'
                                failed: false
                                service_response:
                                  date: null
                                  risk: medium
                                  email: test@test.com
                                  phone: '2261751'
                                  score: '370'
                                  mobile: '3152807334'
                                  reason: medium
                                  panHash: c393bb89bcb92c7d95d405f26699b33f4956c92f607fbe8c2facb836c762382b
                                  document: CC 1040035000
                                  ipAddress: 132.248.0.1
                            - action: continue_with_next_rule
                              name: Amount by client
                              rule_code: amount_by_client
                              type: filter
                              response:
                                match: false
                                failed: false
                            - action: continue_with_next_rule
                              name: Número de correos electrónicos por Ip
                              rule_code: number_of_emails_by_ip
                              type: filter
                              response:
                                match: false
                                failed: false
                            - action: continue_with_next_rule
                              name: Número de correos electrónicos por tarjeta
                              rule_code: number_of_emails_by_card
                              type: filter
                              response:
                                match: false
                                failed: false
                            - action: continue_with_next_rule
                              name: Número de transacciones por tarjeta
                              rule_code: number_of_transactions_by_card
                              type: filter
                              response:
                                match: false
                                failed: false
                            - action: continue_with_next_rule
                              name: Exclude country match for issuers
                              rule_code: exclude_country_match_for_issuers
                              type: filter
                              response:
                                match: null
                                failed: true
                            - action: continue_with_next_rule
                              name: Allowed countries for buyers
                              rule_code: allowed_countries_for_buyers
                              type: filter
                              response:
                                match: false
                                failed: false
                            - action: continue_with_next_rule
                              name: Emailage
                              rule_code: emailage
                              type: score
                              response:
                                match: false
                                score: '0'
                                failed: false
                                service_response:
                                  score: '0'
                                  riskBand: '1'
                                  fraudType: ''
                                  isExecuted: true
                                  returnCode: '0'
                                  riskAdvice: '3'
                                  riskReason: '14'
                                  riskStatus: '2'
                                  ipInformation: null
                                  lastFlaggedOn: ''
                                  returnMessage: ''
                                  sourceIndustry: ''
                                  emailInformation:
                                    age: ''
                                    hits: null
                                    email: test@test.com
                                    domain:
                                      age: '1995-08-13T04:00:00Z'
                                      name: gmail.com
                                      exists: 'Yes'
                                      company: Google
                                      category: Webmail
                                      corporate: 'No'
                                      riskLevel: '3'
                                      countryName: United States
                                      relevantInfo: '508'
                                      riskLevelMessage: Moderate
                                      relevantInfoMessage: Valid Webmail Domain from United States
                                    exists: 'Yes'
                                    status: Verified
                                    country: US
                                    imageUrl: ''
                                    lastSeen: '2020-06-12T03:37:56Z'
                                    firstSeen: '2010-07-17T07:00:00Z'
                                    uniqueHits: '1'
                                  riskAdviceMessage: Lower Fraud Risk
                                  riskReasonMessage: Email Created at least 9.9 Years Ago
                            - action: continue_with_next_rule
                              name: Transunion
                              rule_code: transunion
                              type: score
                              response:
                                match: false
                                score: '995'
                                failed: false
                                service_response:
                                  match: false
                                  score: '995'
                                  failed: false
                                  ageRange: ''
                                  document: '123456789'
                                  fullName: Foo
                                  sheetCode: '05521509999999999999'
                                  isExecuted: true
                                  returnCode: 1
                                  returnText: Consulta exitosa
                                  documentType: CC
                                  errorMessage: null
                                  sheetDateTime: '2021-02-25T08:50:16-05:00'
                                  documentStatus: 1
                                  documentStatusText: Vigente
                            - action: continue_with_next_rule
                              name: Number of transactions
                              rule_code: number_of_transactions_by_client
                              type: filter
                              response:
                                match: false
                                failed: false
                            - action: continue_with_next_rule
                              name: Kount
                              rule_code: kount
                              type: score
                              response:
                                match: false
                                score: '10'
                                failed: false
                                service_response:
                                  score: '10'
                                  errors: []
                                  ipCity: Boise
                                  ipState: Idaho
                                  decision: A
                                  language: en
                                  ipAddress: 208.75.113.3
                                  ipCountry: US
                                  userAgent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML like Gecko) Chrome/76.0.3809.100 Safari/537.36
                                  ipLatitude: '43.6337'
                                  ipProvider: PENDING
                                  isExecuted: true
                                  fingerprint: 290D1C0172364AADAC25D9FD0B13D946
                                  ipLongitude: '-116.2004'
                                  deviceLayers: DF651ACF30..99CF09F417.E3D16F2CB7.061826EF2B
                                  errorMessage: null
                                  quantityErrors: 0
                                  operativeSystem: Mac OS X 10.14.6
                                  screenResolution: 1050x1680
                                  decisionDescription: APPROVE
                            - action: continue_with_next_rule
                              name: Allowed Issuer Bank Countries
                              rule_code: allowed_countries_for_issuer_bank
                              type: filter
                              response:
                                match: null
                                failed: true
                            - action: continue_with_next_rule
                              name: Force match IP country and issuing bank
                              rule_code: match_country_ip_and_issuer_bank
                              type: filter
                              response:
                                match: null
                                failed: true
                        - created_at: '2023-04-18T20:23:58.000000Z'
                          notified_at: null
                          notified_status: pending
                          resolved:
                            resolved_at: '2022-04-18 21:15:21'
                            action: reject_transaction
                            reason: Possible fraud
                            comments: Posible fraude reportado por el cliente
                          id: 32058900-5f26-42e5-8abd-b0681e4a3253
                          transaction:
                            reference: 0cf06ad7-ff26-4a09-b40e-1375bbf31771
                          action:
                            name: manual_transaction
                            performed_by: Force match IP country and issuing bank
                            performed_by_code: match_country_ip_and_issuer_bank
                          rules:
                            - action: continue_with_next_rule
                              name: Number of cards
                              rule_code: number_of_cards_by_client
                              type: filter
                              response:
                                match: true
                                failed: false
                            - action: continue_with_next_rule
                              name: Number of transactions
                              rule_code: number_of_transactions_by_client
                              type: filter
                              response:
                                match: false
                                failed: false
                            - action: continue_with_next_rule
                              name: Allowed Issuer Bank Countries
                              rule_code: allowed_countries_for_issuer_bank
                              type: filter
                              response:
                                match: null
                                failed: true
                            - action: continue_with_next_rule
                              name: Force match IP country and issuing bank
                              rule_code: match_country_ip_and_issuer_bank
                              type: filter
                              response:
                                match: null
                                failed: true
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: '#/components/schemas/Status'
                  data:
                    nullable: true
              examples:
                not found:
                  value:
                    status:
                      code: 1350
                      name: not_found
                      message: not_found
                    data: null
        '422':
          description: Unprocessable Entity (WebDAV)
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: '#/components/schemas/Status'
                  data:
                    x-stoplight:
                      id: c5g94lfyqfhf4
                    nullable: true
              examples:
                Failed reference:
                  value:
                    status:
                      code: 1202
                      name: wrong_field_format
                      message: 'Invalid elements: [reference] (see endpoint documentation)'
                    data: null
      operationId: search-validations
      description: 'Este servicio permite la búsqueda de transacciones por referencia, moneda y monto, suele utilizarse en caso de pérdida de comunicación al crear una validacion.'
      parameters:
        - schema:
            type: string
          in: header
          name: Api-Key
          description: Este parámetro contiene la clave de api proporcionada por Evertec
          required: true
      x-stoplight:
        id: yqc5l72eteisa
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Payment'
            examples:
              Ejemplo exitoso:
                value:
                  reference: example-reference
                  amount:
                    currency: USD
                    total: 3512
  /notify-resolved-validation:
    post:
      summary: '[Webhook] Notificación de transacción resuelta'
      operationId: post-notify-resolved-validation
      parameters:
        - schema:
            type: string
          in: header
          name: Api-Key
          description: Este parámetro contiene la clave de api proporcionada por Evertec
          required: true
        - schema:
            type: string
          in: header
          name: seed
          description: Timestamp con el cual se realiza el signature
          required: true
        - schema:
            type: string
          in: header
          name: signature
          description: Firma del la petición(ver docs/firma)
          required: true
      description: Este endpoint debe ser implementado por el cliente de SCUDO API para recibir una notificación de una validación con acción manual
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              x-examples:
                example-1:
                  status:
                    code: 1200
                    name: successful
                    message: response.message.resolve_successful
                  data:
                    created_at: '2022-03-24T20:56:25.000000Z'
                    notified_at: null
                    status: pending
                    resolved_action: process_transaction
                    comments: comments
                    resolved_by: 1
                    resolved_transaction_reason: null
                    id: 2d3a6d86-dfbe-428a-a80e-65064c8dbbb7
                    transaction:
                      reference: df7018d8-3796-4c01-89e7-95a335b12bdb
                    action:
                      name: manual_transaction
                      performed_by: Kount
                      performed_by_code: kount
                    rules:
                      - action: manual_transaction
                        name: Kount
                        rule_code: kount
                        type: score
                        response:
                          match: false
                          score: '100'
                          failed: false
                          service_response:
                            score: '100'
                            errors: []
                            ipCity: Boise
                            ipState: Idaho
                            decision: D
                            language: en
                            ipAddress: 208.75.113.3
                            ipCountry: US
                            userAgent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML like Gecko) Chrome/76.0.3809.100 Safari/537.36
                            ipLatitude: '43.6337'
                            ipProvider: PENDING
                            isExecuted: true
                            fingerprint: 290D1C0172364AADAC25D9FD0B13D946
                            ipLongitude: '-116.2004'
                            deviceLayers: DF651ACF30..99CF09F417.E3D16F2CB7.061826EF2B
                            errorMessage: null
                            quantityErrors: 0
                            operativeSystem: Mac OS X 10.14.6
                            screenResolution: 1050x1680
                            decisionDescription: DECLINE
              properties:
                status:
                  $ref: '#/components/schemas/Status'
                data:
                  type: object
                  required:
                    - created_at
                    - status
                    - resolved_action
                    - comments
                    - id
                    - transaction
                    - action
                    - rules
                  properties:
                    created_at:
                      type: string
                      minLength: 1
                      description: Fecha de creación de la validación
                    notified_at:
                      type: string
                      description: Fecha de notificacion de la validación
                      nullable: true
                    notified_status:
                      type: string
                      enum:
                        - approved
                        - canceled
                        - chargeback
                        - pending
                        - refunded
                        - rejected
                      description: Estado final de la transacción
                    resolved_action:
                      type: string
                      enum:
                        - reject_transaction
                        - process_transaction
                      description: Acción final recomendada
                    id:
                      type: string
                      description: Id de la validación de scudo
                    resolved:
                      type: object
                      description: Objeto que agrupa campos de una validacion de scudo con validacion manual
                      nullable: true
                      properties:
                        resolved_at:
                          type: string
                          description: Fecha de resolución de la validación manual
                        action:
                          type: string
                          enum:
                            - reject_transaction
                            - process_transaction
                          description: Acción de resolución de la validación manual
                        reason:
                          type: string
                          description: Código de razón de resolución ( Ver Docs/Elementos de datos Tabla 5)
                          enum:
                            - owner_could_not_be_contacted
                            - inconsistent_data
                            - cardholder_request_not_froud
                            - possible_fraud
                            - other_reason
                          nullable: true
                        comments:
                          type: string
                          description: Comentarios de resolución de la validación manual
                          nullable: true
                    transaction:
                      type: object
                      description: Objeto que agrupa la información de la transacción del cliente
                      required:
                        - reference
                      properties:
                        reference:
                          type: string
                          minLength: 1
                          description: Referencia de la transacción del cliente
                    action:
                      type: object
                      required:
                        - name
                        - performed_by
                        - performed_by_code
                      properties:
                        name:
                          type: string
                          enum:
                            - reject_transaction
                            - process_transaction
                            - manual_transaction
                          description: Acción recomendada de la validación
                        performed_by:
                          type: string
                          minLength: 1
                          description: Nombre de la regla que define la acción recomendada
                        performed_by_code:
                          type: string
                          minLength: 1
                          description: Código de la regla que define la acción recomendada
                    rules:
                      type: array
                      uniqueItems: true
                      minItems: 1
                      description: Reglas ejecutadas en la validación
                      items:
                        type: object
                        description: Objeto que agrupa la ejecución de una regla
                        properties:
                          action:
                            type: string
                            minLength: 1
                            description: Acción de la regla
                          name:
                            type: string
                            minLength: 1
                            description: Nombre de la regla
                          rule_code:
                            type: string
                            minLength: 1
                            enum:
                              - emailage
                              - kount
                              - historical
                              - transunion
                              - allowed_countries_for_issuer_bank
                              - exclude_country_match_for_issuers
                              - allowed_countries_for_buyers
                              - amount_by_client
                              - number_of_emails_by_ip
                              - number_of_transactions_by_client
                              - number_of_cards_by_client
                              - match_country_ip_and_issuer_bank
                              - custom
                            description: Código de la regla
                          type:
                            type: string
                            minLength: 1
                            description: Tipo de la regla
                          response:
                            anyOf:
                              - $ref: '#/components/schemas/Filter'
                              - $ref: '#/components/schemas/Score'
                        required:
                          - action
                          - name
                          - rule_code
                          - type
              required:
                - status
                - data
            examples:
              Ejemplo satisfactorio:
                value:
                  status:
                    code: 1200
                    name: successful
                    message: The validation has been resolved successfully
                  data:
                    created_at: '2022-04-19T16:05:59.000000Z'
                    notified_at: null
                    notified_status: pending
                    resolved:
                      resolved_at: '2022-04-19T16:06:40.826891Z'
                      action: reject_transaction
                      reason: Posible fraude
                      comments: Cliente responde que puede ser un fraude
                    id: 2d3a6d86-dfbe-428a-a80e-65064c8dbbb7
                    transaction:
                      reference: 57741905-5db9-47ea-a883-331c937008d3
                    action:
                      name: manual_transaction
                      performed_by: Force match IP country and issuing bank
                      performed_by_code: match_country_ip_and_issuer_bank
                    rules:
                      - action: continue_with_next_rule
                        name: Number of cards
                        rule_code: number_of_cards_by_client
                        type: filter
                        response:
                          match: true
                          failed: false
                      - action: continue_with_next_rule
                        name: Historical transactions
                        rule_code: historical
                        type: score
                        response:
                          match: false
                          score: '370'
                          failed: false
                          service_response:
                            date: null
                            risk: medium
                            email: test@test.com
                            phone: '2261751'
                            score: '370'
                            mobile: '3152807334'
                            reason: medium
                            panHash: c393bb89bcb92c7d95d405f26699b33f4956c92f607fbe8c2facb836c762382b
                            document: CC 1040035000
                            ipAddress: 132.248.0.1
                      - action: continue_with_next_rule
                        name: Amount by client
                        rule_code: amount_by_client
                        type: filter
                        response:
                          match: false
                          failed: false
                      - action: continue_with_next_rule
                        name: Número de correos electrónicos por Ip
                        rule_code: number_of_emails_by_ip
                        type: filter
                        response:
                          match: false
                          failed: false
                      - action: continue_with_next_rule
                        name: Exclude country match for issuers
                        rule_code: exclude_country_match_for_issuers
                        type: filter
                        response:
                          match: null
                          failed: true
                      - action: continue_with_next_rule
                        name: Allowed countries for buyers
                        rule_code: allowed_countries_for_buyers
                        type: filter
                        response:
                          match: false
                          failed: false
                      - action: continue_with_next_rule
                        name: Emailage
                        rule_code: emailage
                        type: score
                        response:
                          match: false
                          score: '0'
                          failed: false
                          service_response:
                            score: '0'
                            riskBand: '1'
                            fraudType: ''
                            isExecuted: true
                            returnCode: '0'
                            riskAdvice: '3'
                            riskReason: '14'
                            riskStatus: '2'
                            ipInformation: null
                            lastFlaggedOn: ''
                            returnMessage: ''
                            sourceIndustry: ''
                            emailInformation:
                              age: ''
                              hits: null
                              email: test@test.com
                              domain:
                                age: '1995-08-13T04:00:00Z'
                                name: gmail.com
                                exists: 'Yes'
                                company: Google
                                category: Webmail
                                corporate: 'No'
                                riskLevel: '3'
                                countryName: United States
                                relevantInfo: '508'
                                riskLevelMessage: Moderate
                                relevantInfoMessage: Valid Webmail Domain from United States
                              exists: 'Yes'
                              status: Verified
                              country: US
                              imageUrl: ''
                              lastSeen: '2020-06-12T03:37:56Z'
                              firstSeen: '2010-07-17T07:00:00Z'
                              uniqueHits: '1'
                            riskAdviceMessage: Lower Fraud Risk
                            riskReasonMessage: Email Created at least 9.9 Years Ago
                      - action: continue_with_next_rule
                        name: Transunion
                        rule_code: transunion
                        type: score
                        response:
                          match: false
                          score: '995'
                          failed: false
                          service_response:
                            match: false
                            score: '995'
                            failed: false
                            ageRange: ''
                            document: '123456789'
                            fullName: Foo
                            sheetCode: '05521509999999999999'
                            isExecuted: true
                            returnCode: 1
                            returnText: Consulta exitosa
                            documentType: CC
                            errorMessage: null
                            sheetDateTime: '2021-02-25T08:50:16-05:00'
                            documentStatus: 1
                            documentStatusText: Vigente
                      - action: continue_with_next_rule
                        name: Number of transactions
                        rule_code: number_of_transactions_by_client
                        type: filter
                        response:
                          match: false
                          failed: false
                      - action: continue_with_next_rule
                        name: Kount
                        rule_code: kount
                        type: score
                        response:
                          match: false
                          score: '10'
                          failed: false
                          service_response:
                            score: '10'
                            errors: []
                            ipCity: Boise
                            ipState: Idaho
                            decision: A
                            language: en
                            ipAddress: 208.75.113.3
                            ipCountry: US
                            userAgent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML like Gecko) Chrome/76.0.3809.100 Safari/537.36
                            ipLatitude: '43.6337'
                            ipProvider: PENDING
                            isExecuted: true
                            fingerprint: 290D1C0172364AADAC25D9FD0B13D946
                            ipLongitude: '-116.2004'
                            deviceLayers: DF651ACF30..99CF09F417.E3D16F2CB7.061826EF2B
                            errorMessage: null
                            quantityErrors: 0
                            operativeSystem: Mac OS X 10.14.6
                            screenResolution: 1050x1680
                            decisionDescription: APPROVE
                      - action: continue_with_next_rule
                        name: Allowed Issuer Bank Countries
                        rule_code: allowed_countries_for_issuer_bank
                        type: filter
                        response:
                          match: null
                          failed: true
                      - action: continue_with_next_rule
                        name: Force match IP country and issuing bank
                        rule_code: match_country_ip_and_issuer_bank
                        type: filter
                        response:
                          match: null
                          failed: true
components:
  schemas:
    Person:
      title: Person
      type: object
      description: 'Estructura que define los campos para una persona de tipo ''shipping'', ''buyer'' y ''payer'''
      properties:
        document:
          type: string
          example: '555777888'
          maxLength: 30
          description: Número de identificación
          nullable: true
        document_type:
          type: string
          description: Tipo de documento
          example: CC
          minLength: 2
          maxLength: 10
          nullable: true
        first_name:
          type: string
          maxLength: 40
          example: John
          description: Nombres
        last_name:
          type: string
          maxLength: 40
          example: Doe
          description: Apellidos
        email:
          type: string
          maxLength: 80
          example: john@mail.com
          description: Correo electronico
        mobile:
          type: string
          maxLength: 15
          minLength: 7
          description: Número de celular
          example: '3158889999'
        phone:
          type: string
          maxLength: 15
          minLength: 7
          example: '4455667'
          description: Número de teléfono
        address:
          $ref: '#/components/schemas/Address'
      required:
        - first_name
        - last_name
        - email
    Payment:
      title: Payment
      type: object
      description: Estructura que describe la referencia de pago y su monto
      properties:
        reference:
          type: string
          description: Referencia de la transacción/pago del cliente
          maxLength: 40
        amount:
          type: object
          required:
            - currency
            - total
          properties:
            currency:
              type: string
              pattern: '[a-zA-z]{3}'
              example: USD
              description: Moneda del pago en ISO 4217 código alfanúmerico
              minLength: 3
              maxLength: 3
            total:
              type: integer
              example: 355
              description: Monto total de la transacción/pago ( en formato unidad menor)
              exclusiveMinimum: true
              minimum: 0
      required:
        - reference
        - amount
    Instrument:
      title: Instrument
      type: object
      description: Intrumento de pago
      properties:
        type:
          x-stoplight:
            id: ezba3qfl61nsq
          enum:
            - cash
            - credit_card
            - debit_card
            - wallet
            - debit_account
            - checking_account
            - equity_fund
          description: Tipo de instrumento con el que se realiza la validación
        card:
          type: object
          required:
            - pan_hash
            - expiration_date
            - bin
            - last_4
          properties:
            pan_hash:
              type: string
              description: Hash SHA-256 del número de tarjeta
              maxLength: 64
            expiration_date:
              type: string
              example: 12/22
              minLength: 5
              maxLength: 5
              description: Fecha de expiración de la tarjeta
            bin:
              type: string
              example: '411111'
              minLength: 6
              maxLength: 6
              pattern: '[0-9]{6}'
              description: Número de identificación bancaria
            last_4:
              type: string
              example: '1234'
              pattern: '[0-9]{4}'
              description: Últimos 4 digitos de la tarjeta de crédito
              minLength: 4
              maxLength: 4
        kount:
          type: object
          x-stoplight:
            id: gexzv7k55fmzz
          description: |
            Objeto que agrupa campos necesarios para la regla kount
          properties:
            session:
              type: string
              x-stoplight:
                id: j0xaxkqscvr54
              description: |
                Id de la sesión creada para el DDC de kount
                https://developer.kount.com/hc/en-us/articles/4411121644820-How-to-Create-a-Session-ID-for-the-Device-Data-Collector-DDC-
              maxLength: 32
        merchant_code:
          type: string
          description: 'Código del comercio. En Colombia hace referencia al retail-code del comercio, en otros paises hace referencia al codigo único del comercio.'
          nullable: true
    Status:
      title: Status
      type: object
      description: Estructura para definir estados de respuestas
      x-internal: false
      properties:
        code:
          type: integer
          format: int32
          enum:
            - 1200
            - 1201
            - 1202
            - 1203
            - 1301
            - 1310
            - 1350
            - 1402
            - 1403
          description: Código de los estados. (consulte la columna código en Documentos/Elementos de datos Tabla 1)
        name:
          type: string
          enum:
            - successful
            - failed
            - id_missmatch
            - missing_required_fields
            - wrong_headers_format
            - wrong_authentication_format
            - bad_credentials
            - rules_not_found
            - wrong_field_format
            - wrong_body_json
          description: Nombre de los estados. (consulte la columna Significado en Documentos/Elementos de datos Tabla 1)
        message:
          type: string
          description: Mensaje para aclarar el estado
      required:
        - code
        - name
    Address:
      title: Address
      type: object
      description: 'Estructura que define la dirección de la persona '
      properties:
        address:
          type: string
          example: 199-129 E 43rd St
          maxLength: 100
          description: Dirección
        city:
          type: string
          example: New York
          maxLength: 50
          description: Ciudad de la dirección
        postal_code:
          type: string
          example: '10017'
          maxLength: 10
          description: Código postal
        country:
          type: string
          example: US
          description: País - ISO-3166
          pattern: '[A-Z]{2}'
          minLength: 2
          maxLength: 2
        state:
          type: string
          maxLength: 50
          example: New York
          description: Estado/Provincia/Departamento de la dirección
      required:
        - address
    Emailage:
      type: object
      properties:
        emailInformation:
          type: object
          properties:
            email:
              type: string
              example: test@test.com
            age:
              type: string
              example: ''
            country:
              type: string
              example: US
            company:
              type: string
              example: ''
            exists:
              type: string
              example: 'Yes'
            status:
              type: string
              example: Verified
            firstSeen:
              type: string
              example: '2010-07-17T07:00:00Z'
            firstSeenDays:
              type: string
              example: 3617
            lastSeen:
              type: string
              example: '2020-06-12T03:37:56Z'
            imageUrl:
              type: string
              example: ''
            hits:
              type: string
              example: 2
            uniqueHits:
              type: string
              example: 1
            creationDays:
              type: string
              example: '9069'
            domain:
              type: object
              properties:
                name:
                  type: string
                  example: null
                age:
                  type: string
                  example: null
                category:
                  type: string
                  example: Webmail
                corporate:
                  type: string
                  example: 'No'
                exists:
                  type: string
                  example: 'Yes'
                company:
                  type: string
                  example: Google
                countryName:
                  type: string
                  example: United States
                riskLevel:
                  type: string
                  example: 3
                riskCountry:
                  type: string
                  example: 'No'
                riskLevelMessage:
                  type: string
                  example: Moderate
                relevantInfo:
                  type: string
                  example: 508
                relevantInfoMessage:
                  type: string
                  example: Valid Webmail Domain from United States
                creationDays:
                  type: string
                  example: '9069'
                fraudRisk:
                  type: string
                  example: 071 Very Low
        addressInformation:
          type: object
          properties:
            billRiskCountry:
              type: string
              example: 'No'
            cityPostalMatch:
              type: string
              example: 'Yes'
            domainCountryMatch:
              type: string
              example: 'Yes'
            shippingCityPostalMatch:
              type: string
              example: 'No'
            shippingForward:
              type: string
              example: ''
        ipInformation:
          type: object
          properties:
            ip:
              type: string
              example: 132.248.0.1
            anonymousDetected:
              type: string
              example: 'No'
            autonomousSystemNumber:
              type: string
              example: 32328 alascom inc.
            city:
              type: string
              example: fairbanks
            corporateProxy:
              type: string
              example: 'Yes'
            country:
              type: string
              example: US
            countryMatch:
              type: string
              example: 'Yes'
            domain:
              type: string
              example: att.com
            isp:
              type: string
              example: att services inc.
            region:
              type: string
              example: alaska
            latitude:
              type: string
              example: 64.8363
            longitude:
              type: string
              example: -147.715
            netSpeed:
              type: string
              example: broadband
            organization:
              type: string
              example: alascom inc.
            reputation:
              type: string
              example: Good
            userType:
              type: string
              example: wifi
        digitalIdentityScoreInformation:
          type: object
          properties:
            description:
              type: string
              example: High Confidence
            overallScore:
              type: integer
              example: 87
            billAddressToFullNameConfidence:
              type: integer
              example: 66
            billAddressToLastNameConfidence:
              type: integer
              example: 55
            emailToIpConfidence:
              type: integer
              example: 80
            emailToBillAddressConfidence:
              type: integer
              example: 78
            emailToFullNameConfidence:
              type: integer
              example: 88
            emailToLastNameConfidence:
              type: integer
              example: 89
            emailToPhoneConfidence:
              type: integer
              example: 44
            emailToShipAddressConfidence:
              type: integer
              example: 78
            ipToBillAddressConfidence:
              type: integer
              example: 90
            ipToFullNameConfidence:
              type: integer
              example: 45
            ipToLastNameConfidence:
              type: integer
              example: 56
            ipToPhoneConfidence:
              type: integer
              example: 71
            ipToShipAddressConfidence:
              type: integer
              example: 100
            phoneToBillAddressConfidence:
              type: integer
              example: 100
            phoneToFullNameConfidence:
              type: integer
              example: 97
            phoneToLastNameConfidence:
              type: integer
              example: 34
            phoneToShipAddressConfidence:
              type: integer
              example: 87
            shipAddressToBillAddressConfidence:
              type: integer
              example: 77
            shipAddressToFullNameConfidence:
              type: integer
              example: 78
            shipAddressToLastNameConfidence:
              type: integer
              example: 34
        ipRiskInformation:
          type: object
          properties:
            level:
              type: string
              example: '3'
            levelMessage:
              type: string
              example: Moderate
            reasonId:
              type: string
              example: '311'
            reason:
              type: string
              example: Moderate By Proxy Reputation And Country Code
            riskCountry:
              type: string
              example: ''
        ipLocationInformation:
          type: object
          properties:
            callingCode:
              type: string
              example: '907'
            city:
              type: string
              example: fairbanks
            cityConfidence:
              type: string
              example: '95'
            continentCode:
              type: string
              example: na
            country:
              type: string
              example: Colombia
            countryCode:
              type: string
              example: CO
            countryConfidence:
              type: string
              example: '99'
            distanceMil:
              type: string
              example: '5366'
            distanceKm:
              type: string
              example: '8637'
            latitude:
              type: string
              example: '64.8363'
            longitude:
              type: string
              example: '-147.715'
            map:
              type: string
              example: 'https://app.emailage.com/query/GoogleMaps?latLng=64.8363,-147.715'
            metroCode:
              type: string
              example: '745'
            region:
              type: string
              example: latinamerica
            regionConfidence:
              type: string
              example: '99'
            postalCode:
              type: string
              example: '99701'
            postalConfidence:
              type: string
              example: 50
            timeZone:
              type: string
              example: -500
        emailOwnerInformation:
          type: object
          properties:
            eName:
              type: string
              example: Test EA
            location:
              type: string
              example: ''
            title:
              type: string
              example: ''
        phoneInformation:
          type: object
          properties:
            carrierName:
              type: string
              example: Verizon Wireless
            carrierType:
              type: string
              example: mobile
            inBillingLocation:
              type: string
              example: Not Found
            owner:
              type: string
              example: Test EA
            ownerMatch:
              type: string
              example: 'Y'
            ownerType:
              type: string
              example: CONSUMER
            status:
              type: string
              example: VALID
        socialMediaInformation:
          type: object
          properties:
            smFriends:
              type: string
              example: 53
            smLinks:
              type: array
              items:
                type: object
                properties:
                  source:
                    type: string
                    example: GoogleSearch
                  link:
                    type: string
                    example: 'https://plus.google.com/115619223171371600000'
        score:
          type: string
          example: 0
        riskReason:
          type: string
          example: 14
        riskReasonMessage:
          type: string
          example: Email Created at least 9.9 Years Ago
        riskStatus:
          type: string
          example: 2
        riskAdvice:
          type: string
          example: 3
        riskAdviceMessage:
          type: string
          example: Lower Fraud Risk
        riskBand:
          type: string
          example: 1
        sourceIndustry:
          type: string
          example: null
        fraudType:
          type: string
          example: null
        lastFlaggedOn:
          type: string
          example: null
        returnCode:
          type: string
          example: 0
        returnMessage:
          type: string
          example: null
        isExecuted:
          type: boolean
          example: true
      x-examples:
        Example 1:
          emailInformation:
            email: test@test.com
            age: ''
            country: US
            company: ''
            exists: 'Yes'
            status: Verified
            firstSeen: '2010-07-17T07:00:00Z'
            firstSeenDays: '3617'
            lastSeen: '2020-06-12T03:37:56Z'
            imageUrl: ''
            hits: '2'
            uniqueHits: '1'
            creationDays: ''
            domain:
              name: gmail.com
              age: '1995-08-13T04:00:00Z'
              category: Webmail
              corporate: 'No'
              exists: 'Yes'
              company: Google
              countryName: United States
              riskLevel: '3'
              riskCountry: 'No'
              riskLevelMessage: Moderate
              relevantInfo: '508'
              relevantInfoMessage: Valid Webmail Domain from United States
              creationDays: '9069'
              fraudRisk: 071 Very Low
          addressInformation:
            billRiskCountry: 'No'
            cityPostalMatch: 'Yes'
            domainCountryMatch: 'Yes'
            shippingCityPostalMatch: 'No'
            shippingForward: ''
          ipInformation:
            ip: 132.248.0.1
            anonymousDetected: 'No'
            autonomousSystemNumber: 32328 alascom inc.
            city: fairbanks
            corporateProxy: 'Yes'
            country: US
            countryMatch: 'Yes'
            domain: att.com
            isp: att services inc.
            region: alaska
            latitude: '64.8363'
            longitude: '-147.715'
            netSpeed: broadband
            organization: alascom inc.
            reputation: Good
            userType: wifi
          digitalIdentityScoreInformation:
            description: High Confidence
            overallScore: 87
            billAddressToFullNameConfidence: 66
            billAddressToLastNameConfidence: 55
            emailToIpConfidence: 80
            emailToBillAddressConfidence: 78
            emailToFullNameConfidence: 88
            emailToLastNameConfidence: 89
            emailToPhoneConfidence: 44
            emailToShipAddressConfidence: 78
            ipToBillAddressConfidence: 90
            ipToFullNameConfidence: 45
            ipToLastNameConfidence: 56
            ipToPhoneConfidence: 71
            ipToShipAddressConfidence: 100
            phoneToBillAddressConfidence: 100
            phoneToFullNameConfidence: 97
            phoneToLastNameConfidence: 34
            phoneToShipAddressConfidence: 87
            shipAddressToBillAddressConfidence: 77
            shipAddressToFullNameConfidence: 78
            shipAddressToLastNameConfidence: 34
          ipRiskInformation:
            level: '3'
            levelMessage: Moderate
            reasonId: '311'
            reason: Moderate By Proxy Reputation And Country Code
            riskCountry: ''
          ipLocationInformation:
            callingCode: '907'
            city: fairbanks
            cityConfidence: '95'
            continentCode: na
            country: Colombia
            countryCode: CO
            countryConfidence: '99'
            distanceMil: '5366'
            distanceKm: '8637'
            latitude: '64.8363'
            longitude: '-147.715'
            map: 'https://app.emailage.com/query/GoogleMaps?latLng=64.8363,-147.715'
            metroCode: '745'
            region: latinamerica
            regionConfidence: '99'
            postalCode: '99701'
            postalConfidence: '50'
            timeZone: '-500'
          emailOwnerInformation:
            eName: Test EA
            location: ''
            title: ''
          phoneInformation:
            carrierName: Verizon Wireless
            carrierType: mobile
            inBillingLocation: Not Found
            owner: Test EA
            ownerMatch: 'Y'
            ownerType: CONSUMER
            status: VALID
          socialMediaInformation:
            smFriends: '53'
            smLinks:
              - source: GoogleSearch
                link: 'https://plus.google.com/115619223171371600000'
              - source: Facebook
                link: 'https://www.facebook.com/user'
          score: '0'
          riskReason: '14'
          riskReasonMessage: Email Created at least 9.9 Years Ago
          riskStatus: '2'
          riskAdvice: '3'
          riskAdviceMessage: Lower Fraud Risk
          riskBand: '1'
          sourceIndustry: ''
          fraudType: ''
          lastFlaggedOn: ''
          returnCode: '0'
          returnMessage: ''
          isExecuted: true
      title: Emailage
      description: Estructura que define la respuesta para la regla emailage
    Kount:
      type: object
      x-examples:
        Example 1:
          score: '30'
          omniscore: '67'
          system:
            version: '0720'
            mode: Q
            merchantId: '201000'
            sessonId: '40'
            orderReference: 7e53ebb0-ae84-4f4d-9d98-36c3d74a0136
          decision:
            code: A
            description: APPROVE
            shouldApprove: true
            shouldDecline: false
            shouldReview: false
          verification:
            geolocationCountry: CO
            geolocationRegion: CO_02
            cardBrand: VISA
            cardIsBlacklisted: false
            aCatchVerificationHasBeenPerformed: false
            threeDsMerchantResponse: ''
            denialReasonCode: ''
          transaction:
            id: KNZ501674051
            usedCardsCount: 1
            usedDevicesCount: 1
            deviceLayers: DF651ACF30..99CF09F417.E3D16F2CB7.061826EF2B
            usedEmailsCount: 1
            velocity: 0
            maxAllowedVelocity: 0
            site: DEFAULT
            fingerprint: 4C2410BA22A64E21BF0C73EA88E48D7E
            timezone: '300'
            localtime: '2017-05-31 00:19'
            region: CO_02
            country: CO
            httpCountry: US
            hasProxy: false
            hasJavascript: true
            hasFlash: false
            hasCookies: true
            language: en
            processedFromMobileDevice: false
            mobileType: ''
            mobileIsThroughMobileForwarder: false
            processedFromVoiceDevice: false
            processedFromRemotePC: false
          ip:
            address: 181.128.85.221
            latitude: '6.2518'
            longitude: '-75.5636'
            country: CO
            state: Antioquia
            city: Medellin
            provider: UNE
          additional:
            dateSinceFirstMadeTransaction: ''
            screenResolution: 1050x1680
            userAgent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML like Gecko) Chrome/76.0.3809.100 Safari/537.36
            operativeSystem: Mac OS X 10.14.6
            browser: ''
            wasPreviouslyWhitelisted: false
          triggeredRules:
            '693746': GEOX Lower Risk Review Countries
          triggeredCounters:
            PAISESPARAREVISION: '1'
          warnings:
            - 401 EXTRA_DATA in request. Please see RIS spec for valid fields and ensure RIS input is URL encoded.
          errorsBag:
            isErrorResponse: false
            code: null
            key: null
            errors: []
      title: Kount
      description: Estructura que define la respuesta para la regla kount
      properties:
        score:
          type: string
          example: '30'
        omniscore:
          type: string
          example: '67'
        system:
          type: object
          properties:
            version:
              type: string
              example: '0720'
            mode:
              type: string
              example: Q
            merchantId:
              type: string
              example: '201000'
            sessonId:
              type: string
              example: '40'
            orderReference:
              type: string
              example: 7e53ebb0-ae84-4f4d-9d98-36c3d74a0136
        decision:
          type: object
          properties:
            code:
              type: string
              example: A
            description:
              type: string
              example: APPROVE
            shouldApprove:
              type: boolean
              example: true
            shouldDecline:
              type: boolean
              example: false
            shouldReview:
              type: boolean
              example: false
        verification:
          type: object
          properties:
            geolocationCountry:
              type: string
              example: CO
            geolocationRegion:
              type: string
              example: CO_02
            cardBrand:
              type: string
              example: VISA
            cardIsBlacklisted:
              type: boolean
              example: false
            aCatchVerificationHasBeenPerformed:
              type: boolean
              example: false
            threeDsMerchantResponse:
              type: string
              example: ''
            denialReasonCode:
              type: string
              example: ''
        transaction:
          type: object
          properties:
            id:
              type: string
              example: KNZ501674051
            usedCardsCount:
              type: integer
              example: 1
            usedDevicesCount:
              type: integer
              example: 1
            deviceLayers:
              type: string
              example: DF651ACF30..99CF09F417.E3D16F2CB7.061826EF2B
            usedEmailsCount:
              type: integer
              example: 1
            velocity:
              type: integer
              example: 0
            maxAllowedVelocity:
              type: integer
              example: 0
            site:
              type: string
              example: DEFAULT
            fingerprint:
              type: string
              example: 4C2410BA22A64E21BF0C73EA88E48D7E
            timezone:
              type: string
              example: '300'
            localtime:
              type: string
              example: '2017-05-31 00:19'
            region:
              type: string
              example: CO_02
            country:
              type: string
              example: CO
            httpCountry:
              type: string
              example: US
            hasProxy:
              type: boolean
              example: false
            hasJavascript:
              type: boolean
              example: true
            hasFlash:
              type: boolean
              example: false
            hasCookies:
              type: boolean
              example: true
            language:
              example: en
              type: string
              nullable: true
            processedFromMobileDevice:
              type: boolean
              example: false
            mobileType:
              type: string
              example: ''
            mobileIsThroughMobileForwarder:
              type: boolean
              example: false
            processedFromVoiceDevice:
              type: boolean
              example: false
            processedFromRemotePC:
              type: boolean
              example: false
        ip:
          type: object
          properties:
            address:
              type: string
              example: 181.128.85.221
            latitude:
              type: string
              example: '6.2518'
            longitude:
              type: string
              example: '-75.5636'
            country:
              type: string
              example: CO
            state:
              type: string
              example: Antioquia
            city:
              type: string
              example: Medellin
            provider:
              type: string
              example: UNE
        additional:
          type: object
          properties:
            dateSinceFirstMadeTransaction:
              type: string
              example: ''
            screenResolution:
              type: string
              example: 1050x1680
            userAgent:
              type: string
              example: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML like Gecko) Chrome/76.0.3809.100 Safari/537.36
            operativeSystem:
              type: string
              example: Mac OS X 10.14.6
            browser:
              type: string
              example: ''
            wasPreviouslyWhitelisted:
              type: boolean
              example: false
        triggeredRules:
          type:
            - object
            - array
          example:
            - '693746 : GEOX Lower Risk Review Countries'
        triggeredCounters:
          type:
            - object
            - array
          example:
            - 'PAISESPARAREVISION : 1'
        warnings:
          type: array
          items:
            type: string
          example:
            - 401 EXTRA_DATA in request. Please see RIS spec for valid fields and ensure RIS input is URL encoded.
        errorsBag:
          type: object
          properties:
            isErrorResponse:
              type: boolean
              example: false
            code:
              nullable: true
              example: null
            key:
              nullable: true
              example: null
            errors:
              type: array
              items:
                type: object
              example: []
    Historical:
      title: Historical
      x-examples:
        successful:
          risk: high
          score: '1000'
          reason: high
          email: test@test.com
          panHash: 9bbef19476623ca56c17da75fd57734dbf82530686043a6e491c6d71befe8f6e
          document: CC 1040035000
          mobile: '3152807334'
          phone: '2261751'
          ipAddress: 132.248.0.1
          date: null
      description: Estructura que define la respuesta para la regla historico transaccional
      type: object
      properties:
        risk:
          type: string
          example: high
        score:
          type: string
          example: '1000'
        reason:
          type: string
          example: high
        email:
          type: string
          example: test@test.com
        panHash:
          type: string
          example: 9bbef19476623ca56c17da75fd57734dbf82530686043a6e491c6d71befe8f6e
        document:
          type: string
          nullable: true
          example: CC 1040035000
        mobile:
          type: string
          example: '3152807334'
        phone:
          type: string
          example: '2261751'
        ipAddress:
          type: string
          example: 132.248.0.1
        date:
          type: string
          nullable: true
          example: null
    Transunion:
      type: object
      x-examples:
        successful:
          document: '123456789'
          documentType: CC
          fullName: Foo
          documentStatus: 1
          documentStatusText: Vigente
          ageRange: ''
          sheetCode: '05521509999999999999'
          sheetDateTime: '2021-02-25T08:50:16-05:00'
          returnCode: 1
          returnText: Consulta exitosa
          score: '995'
          match: false
          errorMessage: null
          failed: false
          isExecuted: true
        información faltante:
          document: null
          documentType: null
          fullName: null
          documentStatus: null
          documentStatusText: null
          ageRange: null
          sheetCode: null
          sheetDateTime: null
          returnCode: 1201
          returnText: null
          score: null
          match: false
          errorMessage: 'Elementos faltantes: [payer.document_type] (consulte la documentación del enpoint)'
          failed: true
          isExecuted: false
      title: Transunion
      description: Estructura que define la respuesta para la regla Transunion
      properties:
        document:
          type: string
          example: '123456789'
        documentType:
          type: string
          example: CC
        fullName:
          type: string
          example: Foo
        documentStatus:
          type: integer
          example: 1
        documentStatusText:
          type: string
          example: Vigente
        ageRange:
          type: string
          example: ''
        sheetCode:
          type: integer
          example: 5521510000000000000
        sheetDateTime:
          type: string
          example: '2021-02-25T08:50:16-05:00'
        returnCode:
          type: integer
          example: 1
        returnText:
          type: string
          example: Consulta exitosa
        score:
          type: string
          example: '995'
        match:
          type: boolean
          example: false
        errorMessage:
          nullable: true
          example: null
        failed:
          type: boolean
          example: false
        isExecuted:
          example: true
          type: boolean
    BehavioralNetwork:
      type: object
      properties:
        fraudScore:
          type: number
          example: 0.99
        fraudConcept:
          type: array
          items:
            type: object
            properties:
              code:
                type: string
                example: F22
              description:
                type: string
                example: Empresas fachada - Frecuencia inusual de país emisor tarjeta en comercio'
        legalScore:
          type: number
          example: 0.01
        legalConcept:
          type: array
          items:
            type: object
            properties:
              code:
                type: string
                example: L11
              description:
                type: string
                example: Calidad de datos de sección de comercio
        reliable:
          type: boolean
          example: true
        errorMessage:
          type: 'null'
          example: null
      x-examples:
        example-1:
          fraudScore: 0.99
          fraudConcept:
            - code: F22
              description: Empresas fachada - Frecuencia inusual de país emisor tarjeta en comercio
          legalScore: 0.01
          legalConcept:
            - code: L11
              description: Calidad de datos de sección de comercio
          reliable: true
          errorMessage: null
      title: BehavioralNetwork
      description: Estructura que define la respuesta para la regla behavioral network
    Filter:
      title: Filter
      type: object
      properties:
        match:
          type: boolean
          description: Define si la regla coincide con la parametrización
        failed:
          type: boolean
          description: Define si la regla falla al intentar ejecutarse
    Score:
      title: Score
      type: object
      description: 'Respuesta de regla ejecutada  tipo puntaje '
      properties:
        match:
          type: boolean
          description: Define si la regla coincide con la parametrización
        failed:
          type: boolean
          description: Define si la regla falla al intentar ejecutarse
        score:
          type: string
          description: Puntaje obtenido de la regla
        service_response:
          oneOf:
            - $ref: '#/components/schemas/Emailage'
            - $ref: '#/components/schemas/Historical'
            - $ref: '#/components/schemas/Kount'
            - $ref: '#/components/schemas/Transunion'
            - $ref: '#/components/schemas/BehavioralNetwork'
          description: Estructura que define los tipos de respuesta de los servicios
    Details:
      title: Details
      x-stoplight:
        id: a7cczdwd6xvo4
      type: object
      description: Respuesta de regla ejecutada con detalles
      x-examples:
        instrument_types:
          failed: true
          message: Tipo de instrumento de pago no válido
          details:
            skipped:
              type: instrument_types
              received:
                instrument_types: cash
              configured:
                value:
                  instrument_types: credit_card
                operator: equals_to
        minimum_amount:
          failed: true
          message: Monto mínimo no válido
          details:
            skipped:
              type: minimum_amount
              received:
                currency: COP
                minimum_amount: '1200'
              configured:
                value:
                  currency: COP
                  minimum_amount: '12000'
                operator: greater_than
      properties:
        failed:
          type: boolean
          description: Define si la regla falla al intentar ejecutarse
        message:
          type: string
          x-stoplight:
            id: 0mrxpym2x1mbz
        details:
          type: object
          x-stoplight:
            id: lgoontqibxhzm
          nullable: true
          properties:
            skipped:
              $ref: '#/components/schemas/Skipped'
    Skipped:
      title: Skipped
      x-stoplight:
        id: 4u1sii04mdmol
      type: object
      description: Detalles de una regla omitida
      properties:
        type:
          x-stoplight:
            id: dttn7rukyh8q3
          enum:
            - minimum_amount
            - instrument_types
        received:
          type: object
          $ref: '#/components/schemas/Skipped-values'
        configured:
          type: object
          x-stoplight:
            id: zd70ygvd36xc0
          properties:
            value:
              type: object
              $ref: '#/components/schemas/Skipped-values'
            operator:
              type: string
              x-stoplight:
                id: v7f4k173nqhz0
      x-examples:
        minimum_amount:
          skipped:
            type: minimum_amount
            received:
              currency: COP
              minimum_amount: '1200'
            configured:
              value:
                currency: COP
                minimum_amount: '12000'
              operator: greater_than
        instrument_types:
          skipped:
            type: instrument_types
            received:
              instrument_types: cash
            configured:
              value:
                instrument_types: credit_card
              operator: equals_to
    Skipped-values:
      title: Skipped values
      x-stoplight:
        id: b99zau0ayg31y
      type: object
      description: ''
      properties:
        instrument_types:
          type: string
          x-stoplight:
            id: ttqu5xh28xrrf
          nullable: true
        currency:
          type: string
          x-stoplight:
            id: xz9z9e2lh4cgt
          nullable: true
        minimum_amount:
          type: string
          x-stoplight:
            id: 0fyyrfvwickxp
          nullable: true
  responses: {}
