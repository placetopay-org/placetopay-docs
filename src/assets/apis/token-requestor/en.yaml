openapi: 3.0.0
info:
  title: 'Token management and administration'
  version: 1.0.0
paths:
  /api/token/enroll:
    post:
      summary: EnrollCard
      requestBody:
        content:
          application/json:
            schema:
              type: object
              example:
                auth:
                  login: 1441d14df19ec88431e513bb990326e1
                  tranKey: DGYymv6ohpYwtLWon/iADE/COoo9JXt4jqyk6D006PY=
                  nonce: enQ4dXh3YWhkMWM=
                  seed: 2023-06-21T09:56:06-05:00
                requestId: asdf214hs728d
                merchantId: d5502955e13a4e63aa6e12e6f1d0ab01
                instrument:
                  card:
                    number: '4123700070000045'
                    expiration: 12/23
                    cvv: '758'
                payer:
                  name: Bill
                  surname: Evans
                  email: test@visa.com
              properties:
                auth:
                  type: object
                  description: Authentication object. See more in **[Authentication](/en/token-requestor/integration/authentication)**
                  properties:
                    login:
                      type: string
                      description: 'Login for authentication'
                    tranKey:
                      type: string
                      description: 'Transaction key'
                    nonce:
                      type: string
                      description: 'Random value to avoid repetition'
                    seed:
                      type: string
                      description: 'Timestamp seed for the transaction'
                requestId:
                  type: string
                  description: Request identifier sent by the client for error tracking. See more in **[Request ID Usage](/en/token-requestor/integration/request-id)**
                merchantId:
                  type: string
                  description: 'Unique merchant ID'
                instrument:
                  type: object
                  description: 'Payment instrument information'
                  properties:
                    card:
                      type: object
                      required:
                        - number
                        - expiration
                      description: 'Card information'
                      properties:
                        number:
                          type: string
                          description: 'Card number'
                        expiration:
                          type: string
                          description: 'Card expiration date'
                          example: 12/23
                        cvv:
                          type: string
                          description: 'Security code'
                payer:
                  type: object
                  description: 'Payer information'
                  properties:
                    name:
                      type: string
                      description: 'Cardholder’s first name'
                    surname:
                      type: string
                      description: 'Cardholder’s last name'
                    email:
                      type: string
                      description: 'Cardholder’s email'
              required:
                - auth
                - requestId
                - merchantId
                - instrument
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: object
                    required:
                      - status
                      - reason
                      - date
                    properties:
                      status:
                        type: string
                        description: Operation status
                        example: OK
                      reason:
                        type: string
                        description: Reason for the operation status
                        example: '00'
                      description:
                        type: string
                        description: Status description
                        example: Token created
                      date:
                        type: string
                        format: date-time
                        description: Date when the operation was executed
                        example: '2025-03-17T22:45:27+00:00'
                  data:
                    type: object
                    description: Result data
                    properties:
                      requestId:
                        type: string
                        description: Request identifier sent by the client for error tracking. See more in **[Request ID Usage](/en/token-requestor/integration/request-id)**
                        example: 62a89e6b-6ea9-463a-b720-4d34f76436d9
                      brandToken:
                        type: object
                        description: Token data
                        required:
                          - id
                          - token
                          - expiration
                          - additional
                        properties:
                          id:
                            type: string
                            description: Token identifier for TR
                            example: rdftvuXQTZyYHaCErEcn0Q0000000000US
                          token:
                            type: string
                            description: Token used to process a payment
                            example: 2222030198635406
                          expiration:
                            type: string
                            description: Token expiration date
                            example: 04/28
                          additional:
                            type: object
                            description: Additional token information
                            properties:
                              tokenRequestorId:
                                type: string
                                description: TR identifier with the brands
                                example: 2028-04-30
                              artUrl:
                                type: string
                                description: URL with the card image
                                example: https://s3Propio.aws.com/tr/brand/1/logo.png
                              issuerName:
                                type: string
                                description: Name of the token issuer bank
                                example: Issuer Test
                              lastDigits:
                                type: string
                                description: Last 4 digits of the tokenized card
                                example: '1234'
                required:
                  - status

      security:
        - Mc1eQlMX2Zg9NIsyqxuDVT7y2Ubns7hTkdsTzLZF: []
  /api/checkout:
    post:
      summary: Checkout
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - auth
                - merchantId
                - instrument
                - isRecurring
              properties:
                auth:
                  type: object
                  description: Authentication object. See more in **[Authentication](/en/token-requestor/integration/authentication)**
                  required:
                    - login
                    - tranKey
                    - nonce
                    - seed
                  properties:
                    login:
                      type: string
                      example: 1441d…
                    tranKey:
                      type: string
                      example: DGYym…
                    nonce:
                      type: string
                      example: enQ4dXh…
                    seed:
                      type: string
                      example: 2023-06…
                merchantId:
                  type: string
                  description: Unique merchant identifier
                  example: 1d6b1456-5fae-4932-92f1-5c46fe6c83e3
                instrument:
                  type: object
                  description: Object containing payment instrument information
                  required:
                    - brandToken
                  properties:
                    brandToken:
                      type: object
                      required:
                        - token
                      properties:
                        token:
                          type: string
                          description: Token provided in the enrollment request
                          example: 1b7b9879
                isRecurring:
                  type: boolean
                  description: Identifies whether the cryptogram will be used for recurrence or not
                  example: false
            example:
              auth:
                login: 1441d…
                tranKey: DGYym…
                nonce: enQ4dXh…
                seed: 2023-06…
              merchantId: 1d6b1456-5fae-4932-92f1-5c46fe6c83e3
              instrument:
                brandToken:
                  token: 1b7b9879
              isRecurring: false
      description: |
        This API allows obtaining an encrypted cryptogram from a token to be used in authorization processes.
        The request includes authentication, the merchant identifier, the payment instrument, and whether the operation will be recurring.
      parameters:
        - name: Accept
          description: 'allowEmptyValue:false'
          in: header
          schema:
            type: string
          example: application/json
      security:
        - Mc1eQlMX2Zg9NIsyqxuDVT7y2Ubns7hTkdsTzLZF: [ ]
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                required:
                  - status
                properties:
                  status:
                    type: object
                    required:
                      - status
                      - reason
                      - date
                    properties:
                      status:
                        type: string
                        description: Operation status
                        example: OK
                      reason:
                        type: string
                        description: Reason for the operation status
                        example: "00"
                      description:
                        type: string
                        description: Status description
                        example: Operation successful
                      date:
                        type: string
                        format: date-time
                        description: Operation date
                        example: "2025-03-17T22:45:27+00:00"
                  data:
                    type: object
                    description: Result data
                    properties:
                      cryptogram:
                        type: string
                        description: >
                          Cryptogram used for processing or payment, encoded in Base64.
                        example: "AIiD8382PpTdAAF3OkVCAAADFA=="
                      eci:
                        type: string
                        description: >
                          Code to indicate the level of security and authentication.
                        example: "05"
              examples:
                SUCCESS:
                  value:
                    status:
                      status: OK
                      reason: "00"
                      description: Operation successful
                      date: "2025-03-17T22:45:27+00:00"
                    data:
                      cryptogram: "AIiD8382PpTdAAF3OkVCAAADFA=="
                      eci: "05"

  /api/token/status:
    post:
      summary: Obtener el estado del token
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - auth
                - merchantId
                - instrument
              properties:
                auth:
                  type: object
                  description: Authentication object. See more in **[Authentication](/en/token-requestor/integration/authentication)**
                  required:
                    - login
                    - tranKey
                    - nonce
                    - seed
                  properties:
                    login:
                      type: string
                    tranKey:
                      type: string
                    nonce:
                      type: string
                    seed:
                      type: string
                merchantId:
                  type: string
                  description: Unique merchant identifier
                  format: uuid
                instrument:
                  type: object
                  description: Object containing payment instrument information
                  required:
                    - brandToken
                  properties:
                    brandToken:
                      type: object
                      description: Token information
                      required:
                        - id
                      properties:
                        id:
                          type: string
                          description: Identifier of the token in the application
              example:
                auth:
                  login: 1441d…
                  tranKey: DGYym…
                  nonce: enQ4dXh…
                  seed: 2023-06…
                merchantId: 1d6b1456-5fae-4932-92f1-5c46fe6c83e3
                instrument:
                  brandToken:
                    id: 1b7b9879
      parameters:
        - name: Accept
          description: 'allowEmptyValue:false'
          in: header
          schema:
            type: string
          example: application/json
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: object
                    required:
                      - status
                      - reason
                      - date
                    properties:
                      status:
                        type: string
                        description: Operation status
                        example: OK
                      reason:
                        type: string
                        description: Reason for the operation status
                        example: '00'
                      description:
                        type: string
                        description: Status description
                        example: Operation successfully!
                      date:
                        type: string
                        format: date-time
                        description: Date when the operation was executed
                        example: '2025-03-17T22:45:27+00:00'
                  data:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Token status
                        enum: [ ACTIVE, INACTIVE, EXPIRED, DELETED ]
                        example: ACTIVE
                      expiration:
                        type: string
                        description: Token expiration date
                        example: 28/04
                      artUrl:
                        type: string
                        description: Card image URL
                        example: https://s3Propio.aws.com/tr/brand/1/logo.png
                      createdAt:
                        type: string
                        format: date
                        description: Token generation date
                        example: 2025-01-10
                      updatedAt:
                        type: string
                        format: date
                        description: Token update date
                        example: 2025-01-20
              examples:
                SUCCESS:
                  value:
                    status:
                      status: OK
                      reason: '00'
                      description: Operation successfully!
                      date: '2025-03-17T22:45:27+00:00'
                    data:
                      status: ACTIVE
                      expiration: 28/04
                      artUrl: https://s3Propio.aws.com/tr/brand/1/logo.png
                      createdAt: 2025-01-10
                      updatedAt: 2025-01-20
      description: 'Obtiene el estado de un token a partir del identificador proporcionado.'
      security:
        - Mc1eQlMX2Zg9NIsyqxuDVT7y2Ubns7hTkdsTzLZF: [ ]
  /api/token/delete:
    post:
      summary: Eliminar un token
      description: This endpoint allows you to delete a previously registered token.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                auth:
                  type: object
                  description: Authentication object. See more in **[Authentication](/en/token-requestor/integration/authentication)**
                  properties:
                    login:
                      type: string
                      example: "1441d…"
                    tranKey:
                      type: string
                      example: "DGYym…"
                    nonce:
                      type: string
                      example: "enQ4dXh…"
                    seed:
                      type: string
                      example: "2023-06-21T09:56:06-05:00"
                merchantId:
                  type: string
                  description: Unique merchant identifier
                  example: "1b7b8d26"
                instrument:
                  type: object
                  description: Payment instrument information
                  properties:
                    brandToken:
                      type: object
                      description: Token information
                      properties:
                        id:
                          type: string
                          description: Unique token identifier
                          example: "1b7b9879"
                reason:
                  type: string
                  description:
                    "Reason for deleting the token. Valid values: `DELETED`, `FRAUD`, `INACTIVITY`."
                  example: "FRAUD"
                description:
                  type: string
                  description: Optional description for the reason
                  example: "The token has been compromised due to fraudulent activity."

              required:
                - description
                - reason
                - merchantId
                - instrument
                - auth
      responses:
        '200':
          description: Successful response to token deletion
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: object
                    description: Status information
                    properties:
                      status:
                        type: string
                        description: Operation status
                        example: "OK"
                      reason:
                        type: string
                        description: Reason for the status
                        example: "00"
                      description:
                        type: string
                        description: Status description
                        example: "successfully removed!"
                      date:
                        type: string
                        format: date-time
                        description: Date when the operation was executed
                        example: "2025-03-17T22:45:27+00:00"
                    required:
                      - description
                      - reason
                      - status
                      - date
