openapi: 3.0.0
info:
  title: 'Token management and administration'
  version: 1.0.0
paths:
  /api/tokens/enroll:
    post:
      summary: EnrollCard
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
                - title: "Tokenización de tarjeta"
                  type: object
                  example:
                    auth:
                      login: aabbccdd1234567890aabbccdd123456
                      tranKey: ABC123example456trankey+789abc012def3456ABC=
                      nonce: enQ4dXh3YWhkMWM=
                      seed: 2023-06-21T09:56:06-05:00
                    requestId: d9efb07c-43ff-45e6-adcc-1b41bf3b9eb5
                    siteId: 5b820bee-8741-4bc9-bc56-f6c1ca7068fb
                    instrument:
                      card:
                        number: '4111111111111111'
                        expiration: "12/23"
                        cvv: '758'
                    payer:
                      name: Bill
                      surname: Evans
                      email: test@visa.com
                  properties:
                    auth:
                      $ref: "#/components/schemas/Authentication"
                    requestId:
                      type: string
                      format: uuid V4
                      description: Identificador de la solicitud enviado por el cliente para trazabilidad de errores.
                        Ver más en **[Uso del identificador de la solicitud](/token-requestor/api/enroll-card#uso-del-identificador-de-solicitud-request-id)**
                      example: 8a83df8b-f704-4761-a6a1-14a7fd3635b1
                    siteId:
                      type: string
                      format: uuid V4
                      description: Identificador único del sitio
                      example: 1d6b1456-5fae-4932-92f1-5c46fe6c83e3
                    instrument:
                      type: object
                      description: Estructura que contiene la información acerca del medio de pago a usar en una transacción, esta estructura es variable de acuerdo a la solicitud que se genere, cada servicio requiere que se usen unos u otros datos.
                      properties:
                        card:
                          type: object
                          required:
                            - number
                          x-conditional:
                            - expiration
                          description: Estructura que contiene la información de la tarjeta.
                          properties:
                            number:
                              type: string
                              maxLength: 20
                              description: 'Número de tarjeta'
                            expiration:
                              type: string
                              description: 'Fecha de vencimiento de la tarjeta (Requerido para Mastercard)'
                              example: "12/23"
                              format: "mm/YY"
                            cvv:
                              type: string
                              description: 'Código de seguridad'
                    payer:
                      type: object
                      description: Estructura que refleja la información de una persona involucrada en una transacción.
                      properties:
                        name:
                          type: string
                          description: 'Nombre del titular de la tarjeta'
                          example: Jhon
                          minLength: 1
                        surname:
                          type: string
                          example: Doe
                          minLength: 1
                          description: 'Apellido del titular de la tarjeta'
                        email:
                          type: string
                          minLength: 1
                          example: jhon@doe.com
                          description: 'Correo electrónico del titular de la tarjeta'
                    locale:
                      type: string
                      example: es_WR
                      description: Este parámetro se compone por el código del lenguaje según el estándar [ISO 631-1](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes), seguido de un guión bajo `_` y 2 letras que corresponden al país según el estándar [ISO 3166-1 alpha-2](https://es.wikipedia.org/wiki/ISO_3166-1#C%C3%B3digos_ISO_3166-1)
                  required:
                    - auth
                    - requestId
                    - siteId
                    - instrument
                - title: "Tokenización de token externo"
                  type: object
                  example:
                    auth:
                      login: aabbccdd1234567890aabbccdd123456
                      tranKey: ABC123example456trankey+789abc012def3456ABC=
                      nonce: enQ4dXh3YWhkMWM=
                      seed: 2023-06-21T09:56:06-05:00
                    requestId: 8a83df8b-f704-4761-a6a1-14a7fd3635b1
                    siteId: d9efb07c-43ff-45e6-adcc-1b41bf3b9eb5
                    instrument:
                      brandToken:
                        token: '4111111111111111'
                        expiration: '12/23'
                    payer:
                      name: Bill
                      surname: Evans
                      email: test@visa.com
                  properties:
                    auth:
                      $ref: "#/components/schemas/Authentication"
                    requestId:
                      type: string
                      format: uuid V4
                      description: Identificador de la solicitud enviado por el cliente para trazabilidad de errores.
                        Ver más en **[Uso del identificador de la solicitud](/token-requestor/api/enroll-card#uso-del-identificador-de-solicitud-request-id)**
                      example: 8a83df8b-f704-4761-a6a1-14a7fd3635b1
                    siteId:
                      type: string
                      format: uuid V4
                      description: Identificador único del sitio
                      example: 1d6b1456-5fae-4932-92f1-5c46fe6c83e3
                    instrument:
                      type: object
                      description:  Estructura que contiene la información acerca del medio de pago a usar en una transacción, esta estructura es variable de acuerdo a la solicitud que se genere, cada servicio requiere que se usen unos u otros datos.
                      properties:
                        brandToken:
                          type: object
                          required:
                            - token
                          x-conditional:
                            - expiration
                          description: Estructura que contiene información sobre el token externo. Disponible solo para tokens de la marca VISA.
                          properties:
                            token:
                              type: string
                              description: 'Token entregado por la marca o servicio externo.'
                              maxLength: 20
                            expiration:
                              type: string
                              description: 'Fecha de expiración del token. Opcional para VISA'
                              example: "12/23"
                    payer:
                      type: object
                      description: Estructura que refleja la información de una persona involucrada en una transacción.
                      properties:
                        name:
                          type: string
                          description: 'Nombre del titular de la tarjeta'
                          example: Jhon
                          minLength: 1
                        surname:
                          type: string
                          example: Doe
                          minLength: 1
                          description: 'Apellido del titular de la tarjeta'
                        email:
                          type: string
                          minLength: 1
                          example: jhon@doe.com
                          description: 'Correo electrónico del titular de la tarjeta'
                    locale:
                      type: string
                      example: es_WR
                      description: Este parámetro se compone por el código del lenguaje según el estándar [ISO 631-1](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes), seguido de un guión bajo `_` y 2 letras que corresponden al país según el estándar [ISO 3166-1 alpha-2](https://es.wikipedia.org/wiki/ISO_3166-1#C%C3%B3digos_ISO_3166-1)
                  required:
                    - auth
                    - requestId
                    - siteId
                    - instrument
      responses:
        '200':
          description: Respuesta exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    type: object
                    description: Datos del resultado
                    properties:
                      requestId:
                        type: string
                        format: uuid V4
                        description: Identificador de la solicitud enviado por el cliente para trazabilidad de errores.
                          Ver más en **[Uso del identificador de la solicitud](/token-requestor/api/enroll-card#uso-del-identificador-de-solicitud-request-id)**
                        example: 62a89e6b-6ea9-463a-b720-4d34f76436d9
                      brandToken:
                        type: object
                        description: Estructura que contiene la información del token que asocia a la tarjeta.
                        required:
                          - id
                          - token
                          - expiration
                          - additional
                        properties:
                          id:
                            type: string
                            description: Identificador del token para TR Placetopay by Evertec, Código generado para identificar la tarjeta en el sistema
                            maxLength: 36
                            format: uuid V4
                            example: ac660e46-6549-4dfc-b636-586b12a38b40
                          token:
                            type: string
                            description: Token usado para procesar un pago
                            minLength: 12
                            maxLength: 19
                            example: 4761739001010010
                          expiration:
                            type: string
                            description: Fecha de expiración del token
                            example: "04/28"
                            format: "mm/YY"
                          additional:
                            type: object
                            description: Información adicional del token
                            properties:
                              tokenRequestorID:
                                type: string
                                maxLength: 11
                                description: Identificador de TR ante las marcas
                                example: '50160269427'
                              artURL:
                                type: string
                                description: URL con imagen de la tarjeta
                                example: https://token-requestor.placetopay.ws/storage/card-art/mastercard.png
                              issuerName:
                                type: string
                                description: Nombre del banco emisor del token
                                example: Issuer Test
                              lastDigits:
                                type: string
                                description: Últimos 4 dígitos de la tarjeta tokenizada
                                example: '1234'
                required:
                  - status
  /api/tokens/cryptogram:
    post:
      summary: Checkout
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - auth
                - siteId
                - instrument
                - isRecurring
                - requestId
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                siteId:
                  type: string
                  format: uuid V4
                  description: Identificador único del sitio
                  example: 1d6b1456-5fae-4932-92f1-5c46fe6c83e3
                instrument:
                  type: object
                  description: Estructura que contiene la información acerca del medio de pago a usar en una transacción.
                  required:
                    - brandToken
                  properties:
                    brandToken:
                      type: object
                      description: Estructura que contiene la información del token que asocia a la tarjeta
                      required:
                        - token
                      properties:
                        token:
                          type: string
                          description: Token dado en la solicitud de enrolamiento
                          example: 4761739001010010
                          minLength: 12
                          maxLength: 19
                isRecurring:
                  type: boolean
                  description: Identifica si el criptograma será usado para recurrencia o no
                  example: false
                requestId:
                  type: string
                  format: uuid V4
                  description: Identificador de la solicitud enviado por el cliente para trazabilidad de errores.
                  example: 8a83df8b-f704-4761-a6a1-14a7fd3635b1

      responses:
        '200':
          description: Respuesta exitosa.
          content:
            application/json:
              schema:
                type: object
                required:
                  - status
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    type: object
                    description: Datos del resultado
                    properties:
                      cryptogram:
                        type: string
                        format: base64
                        description: Cryptogram usado para el procesamiento o un pago, codificado en Base64.
                        example: "AIiD8382PpTdAAF3OkVCAAADFA=="
                      eci:
                        type: string
                        maxLength: 2
                        description: Código para indicar el nivel de seguridad y autenticación.
                        example: "05"
  /api/tokens/status:
    post:
      summary: GetTokenStatus
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - auth
                - siteId
                - instrument
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                siteId:
                  type: string
                  format: uuid V4
                  description: Identificador único del sitio
                  example: 1d6b1456-5fae-4932-92f1-5c46fe6c83e3
                instrument:
                  type: object
                  description: Estructura que contiene la información acerca del medio de pago a usar en una transacción.
                  required:
                    - brandToken
                  properties:
                    brandToken:
                      type: object
                      description: Estructura que contiene la información del token que asocia a la
                        tarjeta
                      required:
                        - id
                      properties:
                        id:
                          type: string
                          maxLength: 36
                          format: uuid V4
                          description: Identificador del token en el aplicativo
                          example: ac660e46-6549-4dfc-b636-586b12a38b40
      responses:
        '200':
          description: Respuesta exitosa.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    type: object
                    properties:
                      status:
                        type: string
                        description: Estado del token
                        enum:
                          - ACTIVE
                          - INACTIVE
                          - EXPIRED
                          - DELETED
                        example: ACTIVE
                      expiration:
                        type: string
                        description: Fecha de vencimiento del token
                        example: "28/04"
                        format: "mm/YY"
                      artURL:
                        type: string
                        description: Url con imagen de la tarjeta
                        example: https://token-requestor.placetopay.ws/storage/card-art/mastercard.png
                      onTest:
                        description: Indica si el token se creo en un ambiente de pruebas o directamente con la marca.
                        type: boolean
                        example: true
                      createdAt:
                        type: string
                        format: date
                        description: Fecha de generación del token
                        example: 2025-01-10
                      updatedAt:
                        type: string
                        format: date
                        description: Fecha de actualización del token
                        example: 2025-01-20
                required:
                  - status
  /api/tokens/delete:
    delete:
      summary: Eliminar un token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                siteId:
                  type: string
                  format: uuid V4
                  description: Identificador único del sitio
                  example: 1d6b1456-5fae-4932-92f1-5c46fe6c83e3
                instrument:
                  type: object
                  description: Estructura que contiene la información acerca del medio de pago a usar en una transacción.
                  required:
                    - brandToken
                  properties:
                    brandToken:
                      type: object
                      description: Estructura que contiene la información del token que asocia a la
                        tarjeta
                      required:
                        - id
                      properties:
                        id:
                          type: string
                          minLength: 36
                          format: uuid V4
                          description: Identificador del token en el aplicativo
                          example: ac660e46-6549-4dfc-b636-586b12a38b40
                reason:
                  type: string
                  description: Razón por la que se eliminará el token. Valores válidos
                  enum:
                    - DELETED
                    - FRAUD
                    - INACTIVITY
                  example: "FRAUD"
                description:
                  type: string
                  maxLength: 225
                  description: Descripción opcional de la razón
                  example: "El token se ha visto comprometido debido a una actividad fraudulenta."

              required:
                - reason
                - siteId
                - instrument
                - auth
      responses:
        '200':
          description: Respuesta exitosa.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                required:
                  - status

  /notifications:
    post:
      summary: "Notifications"
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
                - title: "Notificación token sitios"
                  type: "object"
                  properties:
                    type:
                      type: "string"
                      description: "Tipo de evento."
                      enum: "TOKEN_UPDATED"
                      example: "TOKEN_UPDATED"
                    siteId:
                      type: "string"
                      description: "ID del sitio."
                      example: "2972c13d-6315-4da3-80d7-64c24eb232ad"
                      format: "uuid V4"
                    signature:
                      type: "string"
                      description: "Valor criptográfico generado a partir de la combinación de datos y una clave secreta."
                      format: "Base64(SHA-256(secretKey + data + date))"
                      example: "example/P1JX8/skd4V0Lxruc69+FB/vwhLqqipJ2jo="
                    date:
                      type: "string"
                      description: "Fecha de la notificación."
                      format: 'Y-m-d h:m:s'
                      example: "2023-01-19 15:57:23"
                    data:
                      type: "object"
                      description: "Datos relacionados con el evento."
                      properties:
                        id:
                          type: "string"
                          description: "Identificador único del token."
                          format: "uuid V4"
                          example: "d8677265-03d2-4ffd-bf1e-9831073c1b11"
                        status:
                          type: "string"
                          description: "Estado del token."
                          enum:
                            - "ACTIVE"
                            - "INACTIVE"
                            - "EXPIRED"
                            - "DELETED"
                          example: "ACTIVE"
                        expiration:
                          type: "string"
                          description: "Fecha de vencimiento del token."
                          format: "mm/YY"
                          example: "01/26"
                      required:
                        - "id"
                        - "status"
                        - "expiration"
                  required:
                    - "type"
                    - "siteId"
                    - "signature"
                    - "date"
                    - "data"
                - title: "Notificación token consumidores"
                  type: "object"
                  properties:
                    type:
                      type: "string"
                      description: "Tipo de evento."
                      enum: "TOKEN_UPDATED"
                      example: "TOKEN_UPDATED"
                    consumerId:
                      type: "string"
                      description: "ID del consumidor."
                      format: "uuid V4"
                      example: "9f9cb003-a67b-4119-bb62-75c85599d5d1"
                    siteId:
                      type: "string"
                      description: "ID del sitio."
                      format: "uuid V4"
                      example: "2972c13d-6315-4da3-80d7-64c24eb232ad"
                    signature:
                      type: "string"
                      description: "Valor criptográfico generado a partir de la combinación de datos y una clave secreta."
                      format: "Base64(SHA-256(secretKey + data + date))"
                      example: "example/P1JX8/skd4V0Lxruc69+FB/vwhLqqipJ2jo="
                    date:
                      type: "string"
                      description: "Fecha de la notificación."
                      format: 'Y-m-d h:m:s'
                      example: "2023-01-19 15:57:23"
                    data:
                      type: "object"
                      description: "Datos relacionados con el evento."
                      properties:
                        id:
                          type: "string"
                          description: "Identificador único del token."
                          format: "uuid V4"
                          example: "d8677265-03d2-4ffd-bf1e-9831073c1b11"
                        status:
                          type: "string"
                          description: "Estado del token."
                          enum:
                            - "ACTIVE"
                            - "INACTIVE"
                            - "EXPIRED"
                            - "DELETED"
                          example: "ACTIVE"
                        expiration:
                          type: "string"
                          description: "Fecha de vencimiento del token."
                          format: "mm/YY"
                          example: "01/26"
                      required:
                        - "id"
                        - "status"
                        - "expiration"
                  required:
                    - "type"
                    - "siteId"
                    - "consumerId"
                    - "signature"
                    - "date"
                    - "data"
                - title: "Notificación onBoarding consumidores"
                  type: "object"
                  properties:
                    type:
                      type: "string"
                      description: "Tipo de evento."
                      enum: "TOKEN_UPDATED"
                      example: "TOKEN_UPDATED"
                    merchantId:
                      type: "string"
                      description: "ID del comercio."
                      format: "uuid V4"
                      example: "9f9cb003-a67b-4119-bb62-75c85599d5d1"
                    signature:
                      type: "string"
                      description: "Valor criptográfico generado a partir de la combinación de datos y una clave secreta."
                      format: "Base64(SHA-256(secretKey + data + date))"
                      example: "example/P1JX8/skd4V0Lxruc69+FB/vwhLqqipJ2jo="
                    date:
                      type: "string"
                      description: "Fecha de la notificación."
                      format: 'Y-m-d h:m:s'
                      example: "2023-01-19 15:57:23"
                    data:
                      type: "object"
                      description: "Datos relacionados con el evento."
                      properties:
                        id:
                          type: "string"
                          description: "Identificador único del token."
                          format: "uuid V4"
                          example: "d8677265-03d2-4ffd-bf1e-9831073c1b11"
                        document:
                          $ref: "#/components/schemas/Document"
                        franchise:
                          type: "string"
                          description: "Nombre de la franquicia."
                          enum:
                            - "visa"
                            - "master"
                          example: "visa"
                        status:
                          type: "object"
                          description: "Información del estado del onBoarding."
                          properties:
                            status:
                              description: "Estado del onBoarding."
                              enum:
                                - "ACTIVE"
                              example: "ACTIVE"
                            reason:
                              type: "string"
                              description: "Razón del estado de la operación."
                              maxLength: "2"
                              example: "00"
                      required:
                        - "id"
                        - "document"
                        - "franchise"
                        - "status"
                  required:
                    - "type"
                    - "merchantId"
                    - "signature"
                    - "date"
                    - "data"
      responses:
  /api/admin/credentials/create:
    post:
      summary: Crear una credencial (PROCESSOR)
      description: >
        Este endpoint permite crear una nueva credencial de acceso a la
        plataforma.  
        *Requiere autenticación mediante WS‐Security UsernameToken (bloque **auth**).*
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                data:
                  type: object
                  description: Datos de la credencial a crear.
                  required:
                    - name
                    - role
                    - restrictions
                  properties:
                    name:
                      type: string
                      maxLength: 100
                      description: Nombre identificador de la credencial.
                      example: Wallet de placetopay
                    description:
                      type: string
                      maxLength: 220
                      description: Descripción funcional.
                      example: Credencial para la wallet de placetopay
                    role:
                      type: string
                      description: Rol de la credencial.
                      enum:
                        - PROCESSOR
                      example: PROCESSOR
                    restrictions:
                      type: object
                      description: >
                        Recursos a los que la credencial tendrá acceso.  
                        *Debe incluir al menos uno de los arreglos **consumers** o **sites**.*
                      properties:
                        consumers:
                          type: "array"
                          description: "Contenedor con los identificadores de consumidores asociados a comercios."
                          items:
                            type: "string"
                          example: '["your-consumer-id"]'
                        sites:
                          type: "array"
                          description: "Contenedor con los identificadores de sitios asociados a consumidores."
                          items:
                            type: "string"
                          example: '["your-site-id", "your-site-id-2"]'
              required:
                - auth
                - data
            examples:
              credential_processor:
                summary: Solicitud exitosa – PROCESSOR
                value:
                  auth:
                    login: aabbccdd1234567890aabbccdd123456
                    tranKey: ptvCmJF7KgwGmYmL
                    nonce: cHJ1ZWJhZGU=
                    seed: 2025-07-10T10:10:00-05:00
                  data:
                    name: Sura
                    description: Credencial para SURA
                    role: PROCESSOR
                    restrictions:
                      sites: [ "34227455-2fe8-4596-8999-9c249dec618a" ]
                      consumers: [ "f5ff8bb0-1db9-433b-8d66-e20ebcbd12ae" ]
      responses:
        '200':
          description: Credencial creada exitosamente.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    type: object
                    description: Detalles de la credencial creada.
                    properties:
                      login:
                        type: string
                        description: Login asignado a la nueva credencial.
                        example: aabbccdd1234567890aabbccdd123456
                      secretKey:
                        type: string
                        description: Clave secreta generada.
                        example: ptvCmJF7KgwGmYmL
                      restrictions:
                        type: object
                        description: Recursos asociados a la credencial.
                        properties:
                          consumers:
                            type: "array"
                            description: "Contenedor con los identificadores de consumidores asociados a comercios."
                            items:
                              type: "string"
                            example: '["your-consumer-id"]'
                          sites:
                            type: "array"
                            description: "Contenedor con los identificadores de sitios asociados a comercios."
                            items:
                              type: "string"
                            example: '["your-site-id", "your-site-id-2"]'
                required:
                  - status
  /api/admin/credentials/show:
    post:
      summary: Consultar credencial por login
      description: >
        Este endpoint permite consultar la información de una credencial previamente creada, 
        a partir de su login.  
        Requiere autenticación mediante WS‐Security UsernameToken (**auth**).
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                login:
                  type: string
                  description: Login de la credencial a consultar.
                  example: aabbccdd1234567890aabbccdd123456
              required:
                - auth
                - login
            examples:
              consulta_credencial:
                summary: Ejemplo de solicitud
                value:
                  auth:
                    login: aabbccdd1234567890aabbccdd123456
                    tranKey: ABC123example456trankey+789abc012def3456ABC=
                    nonce: enQ4dXh3YWhkMWM=
                    seed: 2023-06-21T09:56:06-05:00
                  login: aabbccdd1234567890aabbccdd123456
      responses:
        '200':
          description: Consulta exitosa.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    type: object
                    description: Detalles de la credencial consultada.
                    properties:
                      login:
                        type: string
                        example: aabbccdd1234567890aabbccdd123456
                      name:
                        type: string
                        example: Credencial PTP
                        maxLength: 100
                        description: Nombre identificador de la credencial.
                      description:
                        type: string
                        description: Descripción funcional.
                        example: Credencial para la wallet de placetopay
                      role:
                        type: string
                        description: Rol de la credencial.
                        enum:
                          - PROCESSOR
                        example: PROCESSOR
                      restrictions:
                        type: object
                        description: Recursos a los que la credencial tendrá acceso.
                        properties:
                          consumers:
                            type: "array"
                            description: "Contenedor con los identificadores de consumidores asociados a comercios."
                            items:
                              type: "string"
                            example: '["your-consumer-id"]'
                          sites:
                            type: "array"
                            description: "Contenedor con los identificadores de sitios asociados a comercios."
                            items:
                              type: "string"
                            example: '["your-site-id", "your-site-id-2"]'
                      isEnabled:
                        type: boolean
                        example: true
                        description: Indica si el recurso o funcionalidad está habilitado (`true`) o deshabilitado (`false`)
                      createdAt:
                        type: string
                        description: Fecha de creación
                        example: 2025-07-09 15:45:05
                      updatedAt:
                        type: string
                        description: Fecha de actualización
                        example: 2025-07-09 15:45:05
                required:
                  - status
  /api/admin/credentials/edit:
    post:
      summary: Editar una credencial existente
      description: >
        Permite modificar los atributos configurables de una credencial.  
        No es posible cambiar directamente el login ni el tranKey.  
        Si se envía el campo `restrictions`, reemplazará completamente las restricciones actuales.
      operationId: admin.credentials.edit
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - auth
                - login
                - data
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                login:
                  type: string
                  description: Login de la credencial a editar.
                  example: aabbccdd1234567890aabbccdd123456
                data:
                  type: object
                  description: Campos opcionales para editar la credencial.
                  properties:
                    name:
                      type: string
                      example: Credencial PTP
                      maxLength: 100
                      description: Nombre identificador de la credencial.
                    description:
                      type: string
                      maxLength: 220
                      description: Descripción funcional.
                      example: Credencial para la wallet de placetopay
                    role:
                      type: string
                      description: Rol de la credencial.
                      enum:
                        - PROCESSOR
                      example: PROCESSOR
                    isEnabled:
                      type: boolean
                      example: true
                      description: Indica si el recurso o funcionalidad está habilitado (`true`) o deshabilitado (`false`)
                    restrictions:
                      type: object
                      description: >
                        Recursos a los que la credencial tendrá acceso.  
                        *Si se incluye, se reemplazarán completamente las restricciones actuales.*
                      properties:
                        consumers:
                          type: "array"
                          description: "Contenedor con los identificadores de consumidores asociados a comercios."
                          items:
                            type: "string"
                          example: '["your-consumer-id"]'
                        sites:
                          type: "array"
                          description: "Contenedor con los identificadores de sitios asociados a comercios."
                          items:
                            type: "string"
                          example: '["your-site-id"]'
            examples:
              editar_credencial:
                summary: Ejemplo de solicitud de edición
                value:
                  auth:
                    login: aabbccdd1234567890aabbccdd123456
                    tranKey: ABC123example456trankey+789abc012def3456ABC=
                    nonce: enQ4dXh3YWhkMWM=
                    seed: 2023-06-21T09:56:06-05:00
                  login: aabbccdd1234567890aabbccdd123456
                  data:
                    name: Credencial PTP
                    description: Credencial para la wallet de placetopay
                    role: PROCESSOR
                    isEnabled: true
                    restrictions:
                      type: object
                      description: Recursos a los que la credencial tendrá acceso.
                      properties:
                        consumers:
                          type: "array"
                          description: "Contenedor con los identificadores de consumidores asociados a comercios."
                          items:
                            type: "string"
                          example: '["your-consumer-id"]'
                        sites:
                          type: "array"
                          description: "Contenedor con los identificadores de sitios asociados a comercios."
                          items:
                            type: "string"
                          example: '["your-site-id"]'
      responses:
        '200':
          description: Edición exitosa de la credencial.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid V4
                        description: ID de la credencial modificada.
                        example: 0197efdc-aac3-7394-8f35-f0ce1e244c2c
                required:
                  - status
  /api/admin/credentials/delete:
    post:
      summary: Eliminar una credencial
      description: >
        Elimina de forma **irreversible** una credencial existente del sistema, a partir de su login.  
        Esta operación requiere autenticación administrativa y permisos especiales.
      operationId: admin.credentials.delete
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - auth
                - login
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                login:
                  type: string
                  description: Login de la credencial que se desea eliminar.
                  example: aabbccdd1234567890aabbccdd123456
            examples:
              eliminar_credencial:
                summary: Ejemplo de solicitud
                value:
                  auth:
                    login: aabbccdd1234567890aabbccdd123456
                    tranKey: ABC123example456trankey+789abc012def3456ABC=
                    nonce: enQ4dXh3YWhkMWM=
                    seed: 2023-06-21T09:56:06-05:00
                  login: aabbccdd1234567890aabbccdd123456
      responses:
        '200':
          description: Eliminación exitosa.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                required:
                  - status
  /api/admin/credentials/index:
    post:
      tags:
        - Admin Credentials
      summary: Listar Credenciales
      operationId: indexAdminCredentials
      description: >
        Permite listar las credenciales registradas en el sistema con soporte de filtros y paginación.
        Puede filtrarse por nombre, rol, sitios, consumidores o rango de fechas de creación.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                filters:
                  type: object
                  properties:
                    name:
                      type: string
                      maxLength: 100
                      description: Nombre identificador de la credencial.
                    role:
                      type: string
                      description: Rol de la credencial.
                      enum:
                        - PROCESSOR
                      example: PROCESSOR
                    sites:
                      type: "array"
                      description: "Contenedor con los identificadores de sitios asociados a comercios."
                      items:
                        type: "string"
                      example: '["your-site-id"]'
                    consumers:
                      type: "array"
                      description: "Contenedor con los identificadores de consumidores asociados a comercios."
                      items:
                        type: "string"
                      example: '["your-consumer-id"]'
                    createdAt:
                      type: object
                      properties:
                        from:
                          type: string
                          format: date-time
                          description: Fecha inicial de creación (ISO 8601).
                          example: "2025-01-01T00:00:00-05:00"
                        to:
                          type: string
                          format: date-time
                          description: Fecha final de creación (ISO 8601).
                          example: "2025-01-31T23:59:59-05:00"
                pagination:
                  type: object
                  properties:
                    perPage:
                      type: integer
                      description: Número de elementos que se mostrarán por página. Define el tamaño de la página.
                      example: 10
                      maximum: 100
                      default: 15
                    currentPage:
                      type: integer
                      description: Número de la página actual que se desea consultar (basado en el total de elementos y `perPage`).
                      example: 1
                      default: 1
      responses:
        '200':
          description: Respuesta exitosa con datos paginados de credenciales
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        login:
                          type: string
                          example: "aabbccdd1234567890aabbccdd123456"
                        name:
                          type: string
                          example: "Credencial PTP"
                          maxLength: 100
                          description: Nombre identificador de la credencial.
                        role:
                          type: string
                          description: Rol de la credencial.
                          enum:
                            - PROCESSOR
                          example: PROCESSOR
                        isEnabled:
                          type: boolean
                          example: true
                          description: Indica si el recurso o funcionalidad está habilitado (`true`) o deshabilitado (`false`)
                        createdAt:
                          type: string
                          format: date-time
                          example: "2025-07-09 15:45:05"
                          description: Fecha de creación
                        updatedAt:
                          type: string
                          format: date-time
                          example: "2025-07-09 15:46:27"
                          description: Fecha de actualización
                  pagination:
                    type: object
                    description: Información sobre la paginación de los resultados.
                    properties:
                      currentPage:
                        type: integer
                        description: Página actual que se está consultando.
                        example: 1
                        default: 1
                      lastPage:
                        type: integer
                        description: Última página disponible, calculada en función del total de registros y la cantidad por página.
                        example: 5
                      perPage:
                        type: integer
                        description: Cantidad de elementos que se muestran por página.
                        example: 10
                        maximum: 100
                        default: 15
                      total:
                        type: integer
                        example: 1
  /api/admin/sites/create:
    post:
      summary: Crear un nuevo sitio
      description: >
        Este endpoint permite registrar un nuevo sitio dentro del entorno de administración del sistema.  
        *Requiere autenticación mediante WS‐Security UsernameToken (bloque **auth**).*  
        El sitio será asociado a un merchant válido y podrá tener configuración adicional como URL de webhook, modo prueba, y fecha de habilitación.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                data:
                  type: object
                  description: Datos del sitio a registrar.
                  required:
                    - name
                    - merchantId
                  properties:
                    name:
                      type: string
                      maxLength: 225
                      description: Nombre del sitio que será registrado.
                      example: Site Test
                    webhookURL:
                      type: string
                      maxLength: 225
                      description: URL a la que se enviarán notificaciones del sitio.
                      example: https://webhook.site/asdads
                    webhookSecret:
                      type: string
                      maxLength: 25
                      description: Token utilizado para verificar las notificaciones entrantes.
                      example: E0wWIBNtNr3GSF6G
                    merchantId:
                      type: string
                      format: uuid V4
                      description: Identificador del merchant al que se asociará el sitio.
                      example: f1d0888b-f5a9-445a-8c54-dba63763fbc5
                    onTest:
                      type: boolean
                      description: Indica si un sitio o entidad está funcionando en modo de prueba o en modo productivo.
                      example: true
                    enabledAt:
                      type: string
                      format: date-time
                      description: Fecha a partir de la cual el sitio estará habilitado.
                      example: 2025-07-01 10:00:00
              required:
                - auth
                - data
            examples:
              full_request:
                summary: Solicitud exitosa – todos los campos
                value:
                  auth:
                    login: aabbccdd1234567890aabbccdd123456
                    tranKey: ABC123example456trankey+789abc012def3456ABC=
                    nonce: MnFrcmZlYjQ0bXk=
                    seed: 2025-07-03T20:28:43-05:00
                  data:
                    name: Site Test
                    webhookURL: https://webhook.site/asdads
                    webhookSecret: E0wWIBNtNr3GSF6G
                    merchantId: f1d0888b-f5a9-445a-8c54-dba63763fbc5
                    onTest: true
                    enabledAt: 2025-07-01 10:00:00
              minimal_request:
                summary: Solicitud exitosa – solo campos requeridos
                value:
                  auth:
                    login: aabbccdd1234567890aabbccdd123456
                    tranKey: ABC123example456trankey+789abc012def3456ABC=
                    nonce: MnFrcmZlYjQ0bXk=
                    seed: 2025-07-03T20:28:43-05:00
                  data:
                    name: Site Test
                    merchantId: f1d0888b-f5a9-445a-8c54-dba63763fbc5
      responses:
        '200':
          description: Sitio creado exitosamente.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    type: object
                    description: Detalles del sitio creado.
                    properties:
                      id:
                        type: string
                        format: uuid V4
                        description: ID del sitio creado.
                        example: 9f4e4926-4783-44b9-a169-f3ad38e61bea
                required:
                  - status
                  - data

  /api/admin/sites/show:
    post:
      summary: Consulta de sitio
      description: >
        Esta operación permite consultar la información detallada de un sitio previamente registrado en el sistema administrativo.  
        Está disponible exclusivamente para usuarios autenticados que tengan permisos de acceso y visibilidad sobre el recurso.

        La respuesta incluye información básica del sitio, su estado de habilitación, modo de prueba (`onTest`), y los datos del comercio y consumidor al que está vinculado.  
        También incluye configuración de webhook, si aplica.

        Esta operación valida:
          - Autenticación con el bloque `auth`
          - Formato del campo `id`
          - Existencia del sitio
          - Permisos de acceso (ACL)
      operationId: api.admin.sites.show
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - auth
                - id
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                id:
                  type: string
                  format: uuid V4
                  description: Identificador único del sitio a consultar.
                  example: 9f4e4926-4783-44b9-a169-f3ad38e61bea
      responses:
        '200':
          description: Consulta exitosa del sitio.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid V4
                        description: Identificador UUID del sitio
                        example: 9f4e4926-4783-44b9-a169-f3ad38e61bea
                      name:
                        type: string
                        maxLength: 225
                        example: Site Test
                      merchant:
                        type: object
                        description: Información del comercio
                        properties:
                          id:
                            type: string
                            format: uuid V4
                            description: Identificador UUID del comercio
                            example: f1d0888b-f5a9-445a-8c54-dba63763fbc5
                          name:
                            type: string
                            example: Merchant Test
                            maxLength: 225
                            description: Nombre del comercio
                      consumer:
                        description: Información del consumidor
                        type: object
                        properties:
                          id:
                            type: string
                            format: uuid V4
                            description: Identificador UUID del consumidor
                            example: e1a8c0b2-c7f1-49e3-91e0-7059b50e3f43
                          name:
                            type: string
                            example: Consumer Test
                            maxLength: 225
                            description: Nombre del consumidor
                      webhookURL:
                        description: URL a la que se enviarán las notificaciones automáticas
                        type: string
                        format: uri
                        maxLength: 225
                        example: https://webhook.site/test
                      availableFranchises:
                        $ref: "#/components/schemas/AvailableFranchises"
                      webhookSecret:
                        description: Clave secreta para validar mensajes de webhook
                        type: string
                        maxLength: 25
                        example: secret-token
                      onTest:
                        description: Indica si un sitio o entidad está funcionando en modo de prueba o en modo productivo.
                        type: boolean
                        example: true
                      enabledAt:
                        description: Indica cuándo fue habilitado un sitio dentro del sistema
                        type: string
                        format: date-time
                        example: 2025-07-01 10:00:00
                      createdAt:
                        type: string
                        format: date-time
                        example: 2025-06-16T22:29:01
                        description: Fecha de creación
                      updatedAt:
                        type: string
                        format: date-time
                        example: 2025-07-02T15:30:00
                        description: Fecha de actualización
        '400':
          description: Error en la solicitud, datos inválidos o sin autorización.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
  /api/admin/sites/edit:
    post:
      tags:
        - Admin / Sitios
      summary: Actualización de sitio
      operationId: api.admin.sites.update
      description: >
        Permite modificar parcialmente los atributos de un sitio existente. Solo se actualizarán los campos enviados en el objeto `data`.  
        Esta operación requiere autenticación con credenciales válidas y permisos de gestión sobre sitios.  
        Campos como `consumerId` y `merchantId` no son modificables.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - auth
                - id
                - data
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                id:
                  type: string
                  format: uuid V4
                  description: Identificador UUID del sitio que se desea actualizar
                data:
                  type: object
                  properties:
                    name:
                      type: string
                      maxLength: 225
                      example: Sitio Test
                      description: Nombre del sitio, obligatorio si se incluye
                    webhookURL:
                      type: string
                      format: uri
                      maxLength: 225
                      description: URL del webhook de notificaciones automáticas
                    webhookSecret:
                      type: string
                      maxLength: 25
                      description: Clave secreta para validar mensajes de webhook
                    onTest:
                      type: boolean
                      example: true
                      description: Indica si un sitio o entidad está funcionando en modo de prueba o en modo productivo.
                    enabledAt:
                      type: string
                      format: date-time
                      description: Fecha y hora de activación del sitio
                      example: 2025-07-01 10:00:00
      responses:
        '200':
          description: Actualización exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        format: uuid V4
                        description: Identificador UUID del sitio
        '400':
          description: Error en la solicitud (datos inválidos o id incorrecto)
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
  /api/admin/sites/delete:
    post:
      summary: Eliminación de sitio
      operationId: deleteSite
      description: >
        Esta operación permite eliminar un sitio registrado en el entorno administrativo del sistema. Está restringida a usuarios autenticados que cuenten con los permisos correspondientes para gestión de sitios. La eliminación está condicionada por el estado del sitio y su relación con otros recursos.

        En caso de que el sitio tenga tokens asociados, la operación será rechazada y se notificará al cliente que no puede proceder con la eliminación. Solo los sitios sin tokens podrán ser eliminados exitosamente. Esta operación es irreversible.
      tags:
        - Sitios
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                id:
                  type: string
                  format: uuid V4
                  description: Identificador único del sitio que se desea eliminar.
                  example: 9f4e4926-4783-44b9-a169-f3ad38e61bea
              required:
                - auth
                - id
            examples:
              successful:
                summary: Solicitud exitosa
                value:
                  auth:
                    login: aabbccdd1234567890aabbccdd123456
                    tranKey: ABC123example456trankey+789abc012def3456ABC=
                    nonce: MnFrcmZlYjQ0bXk=
                    seed: "2025-07-03T20:28:43-05:00"
                  id: 9f4e4926-4783-44b9-a169-f3ad38e61bea
              failed_tokens:
                summary: Fallida - sitio con tokens asociados
                value:
                  auth:
                    login: aabbccdd1234567890aabbccdd123456
                    tranKey: ABC123example456trankey+789abc012def3456ABC=
                    nonce: MnFrcmZlYjQ0bXk=
                    seed: "2025-07-03T20:28:43-05:00"
                  id: 9f4e4926-4783-44b9-a169-f3ad38e61bea
              failed_invalid:
                summary: Fallida - sitio inexistente
                value:
                  auth:
                    login: aabbccdd1234567890aabbccdd123456
                    tranKey: ABC123example456trankey+789abc012def3456ABC=
                    nonce: MnFrcmZlYjQ0bXk=
                    seed: "2025-07-03T20:28:43-05:00"
                  id: invalid
      responses:
        '200':
          description: Eliminación exitosa del sitio
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
              examples:
                success:
                  summary: Éxito
                  value:
                    status:
                      status: OK
                      reason: '00'
                      message: The request has been successfully processed
                      date: '2025-07-04T14:50:00+00:00'
                error_tokens:
                  summary: Fallo - sitio con tokens
                  value:
                    status:
                      status: FAILED
                      reason: BR
                      message: The site has associated tokens.
                      date: '2025-07-04T14:53:40+00:00'
        '400':
          description: Error en la solicitud, datos inválidos o sin autorización.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
  /api/admin/sites/index:
    post:
      tags:
        - Sites
      summary: Listado de sitios
      description: >
        Esta operación permite obtener un listado de los sitios registrados en el sistema administrativo.  
        Retorna resultados paginados y admite múltiples filtros para acotar la búsqueda.  
        La respuesta incluye información básica de cada sitio y puede estar sujeta a reglas de control de acceso (ACL).
      operationId: api.admin.sites.index
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                filters:
                  type: object
                  properties:
                    consumers:
                      type: "array"
                      description: "Contenedor con los identificadores de consumidores asociados a comercios."
                      items:
                        type: "string"
                      example: '["your-consumer-id"]'
                    merchants:
                      type: "array"
                      description: "Contenedor con los identificadores de comercios."
                      items:
                        type: "string"
                      example: '["your-merchant-id"]'
                    name:
                      type: string
                      description: Nombre del sitio
                      example: Site Test
                      maxLength: 225
                    onTest:
                      type: boolean
                      example: true
                      description: Indica si un sitio o entidad está funcionando en modo de prueba o en modo productivo.
                    createdAt:
                      description: Rango de fecha de creación
                      type: object
                      properties:
                        from:
                          type: string
                          format: date-time
                          description: Fecha inicial de creación (ISO 8601).
                          example: 2025-06-16T22:29:01+00:00
                        to:
                          description: Fecha final de creación (ISO 8601).
                          type: string
                          format: date-time
                          example: 2025-07-27T18:00:00-05:00
                pagination:
                  type: object
                  description: Información sobre la paginación de los resultados.
                  properties:
                    currentPage:
                      type: integer
                      description: Página actual que se está consultando.
                      example: 1
                      default: 1
                    perPage:
                      type: integer
                      description: Cantidad de elementos que se muestran por página.
                      example: 10
                      maximum: 100
                      default: 15
      responses:
        '200':
          description: Respuesta exitosa con datos paginados de sitios
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          description: Identificador UUID del sitio que se desea actualizar
                          format: uuid V4
                        merchant:
                          type: object
                          properties:
                            id:
                              type: string
                              format: uuid V4
                              description: Identificador UUID del comercio
                            name:
                              type: string
                              maxLength: 225
                              description: Nombre del comercio
                        consumer:
                          type: object
                          properties:
                            id:
                              type: string
                              description: Identificador UUID del consumidor
                              format: uuid V4
                            name:
                              type: string
                              maxLength: 225
                              description: Nombre del consumidor
                        name:
                          type: string
                          description: Nombre del sitio
                          maxLength: 225
                        onTest:
                          type: boolean
                          example: true
                          description: Indica si un sitio o entidad está funcionando en modo de prueba o en modo productivo.
                        enabledAt:
                          type: string
                          format: date-time
                          example: 2025-07-01 10:00:00
                        createdAt:
                          type: string
                          format: date-time
                          example: 2025-07-01 10:00:00
                  pagination:
                    type: object
                    description: Información sobre la paginación de los resultados.
                    properties:
                      currentPage:
                        type: integer
                        description: Página actual que se está consultando.
                        example: 1
                        default: 1
                      lastPage:
                        type: integer
                        description: Última página disponible, calculada en función del total de registros y la cantidad por página.
                        example: 5
                      perPage:
                        type: integer
                        description: Cantidad de elementos que se muestran por página.
                        example: 10
                        maximum: 100
                        default: 15
                      total:
                        type: integer
                        description: Total de registros disponibles en la colección consultada.
                        example: 47
        '400':
          description: Solicitud inválida por errores en parámetros
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
  /api/admin/merchants/create:
    post:
      summary: "Creación de comercios"
      operationId: "token-requestor-admin-merchants-create"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                data:
                  type: "object"
                  description: "Contenedor principal de los datos del comercio."
                  properties:
                    name:
                      type: "string"
                      description: "Nombre del comercio."
                      maxLength: "225"
                      example: "ACME Corp"
                    brand:
                      type: "string"
                      description: "Nombre de la marca asociada al comercio."
                      maxLength: "225"
                      example: "ACME Corp BRAND"
                    mcc:
                      type: "string"
                      description: "Código MCC (actividad económica)."
                      maxLength: "10"
                      example: "0742"
                    websiteURL:
                      type: "string"
                      description: "URL del sitio web del comercio."
                      maxLength: "225"
                      example: "https://acme.com"
                    consumerId:
                      type: "string"
                      description: "Identificador del consumidor."
                      maxLength: "36"
                      example: "your-consumer-id"
                    address:
                      $ref: "#/components/schemas/Address"
                    document:
                      $ref: "#/components/schemas/Document"
                    legalRepresentative:
                      $ref: "#/components/schemas/LegalRepresentative"
                    metadata:
                      type: "object"
                      description: |
                        Objeto dinámico clave valor de información adicional que solicitan los servicios externos para ser ejecutados.
                      properties:
                        merchantCode:
                          type: "string"
                          maxLength: 25
                          description: | 
                            Código del comercio.
                            
                            Requerido para Uruguay.
                          example: "12345678901"
                        acquirerBIN:
                          type: "string"
                          maxLength: 11
                          description: |
                            BIN del adquirente.
                            
                            Requerido para Uruguay.
                          example: "ACQBIN9988776655"
                      x-conditional:
                        - merchantCode
                        - acquirerBIN
                  required:
                    - "name"
                    - "brand"
                    - "consumerId"
                    - "address"
                    - "document"
                    - "legalRepresentative"
              required:
                - "auth"
                - "data"
      responses:
        '200':
          description: "Respuesta exitosa"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    type: "object"
                    description: "Datos del resultado"
                    properties:
                      id:
                        type: "string"
                        format: "uuid V4"
                        description: "Identificador del comercio."
                        example: "62a89e6b-6ea9-463a-b720-4d34f76436d9"
  /api/admin/merchants/update:
    post:
      summary: "Actualización de comercios"
      operationId: "token-requestor-admin-merchants-update"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                id:
                  type: "uuid"
                  description: "Identificador del comercio."
                  maxLength: "36"
                  example: "9f5db0db-102a-40f8-a1aa-d7735d9fb50a"
                data:
                  type: "object"
                  description: "Contenedor principal de los datos del comercio."
                  properties:
                    name:
                      type: "string"
                      description: "Nombre del comercio."
                      maxLength: "225"
                      example: "ACME Corp"
                    brand:
                      type: "string"
                      description: "Nombre de la marca asociada al comercio."
                      maxLength: "225"
                      example: "ACME Corp BRAND"
                    websiteURL:
                      type: "string"
                      description: "URL del sitio web del comercio."
                      maxLength: "225"
                      example: "https://acme.com"
                    address:
                      $ref: "#/components/schemas/Address"
                    legalRepresentative:
                      $ref: "#/components/schemas/LegalRepresentative"
              required:
                - "auth"
                - "id"
                - "data"
      responses:
        '200':
          description: "Respuesta exitosa"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    type: "object"
                    description: "Datos del resultado"
                    properties:
                      id:
                        type: "string"
                        format: "uuid V4"
                        description: "Identificador del comercio."
                        example: "62a89e6b-6ea9-463a-b720-4d34f76436d9"
  /api/admin/merchants/delete:
    post:
      summary: "Eliminación de comercio"
      operationId: "token-requestor-admin-merchants-delete"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                id:
                  type: "uuid"
                  description: "Identificador del comercio."
                  maxLength: "36"
                  example: "9f5db0db-102a-40f8-a1aa-d7735d9fb50a"
              required:
                - "auth"
                - "id"
      responses:
        '200':
          description: "Respuesta exitosa"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
  /api/admin/merchants/show:
    post:
      summary: "Consulta de comercio"
      operationId: "token-requestor-admin-merchants-show"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                id:
                  type: "uuid"
                  description: "Identificador del comercio."
                  maxLength: "36"
                  example: "9f5db0db-102a-40f8-a1aa-d7735d9fb50a"
              required:
                - "auth"
                - "id"
      responses:
        '200':
          description: "Respuesta exitosa"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  data:
                    type: "object"
                    description: "Contenedor principal de los datos del comercio."
                    properties:
                      id:
                        type: "uuid"
                        description: "Identificador del comercio."
                        maxLength: "36"
                        example: "9f5db0db-102a-40f8-a1aa-d7735d9fb50a"
                      name:
                        type: "string"
                        description: "Nombre del comercio."
                        maxLength: "225"
                        example: "ACME Corp"
                      brand:
                        type: "string"
                        description: "Nombre de la marca asociada al comercio."
                        maxLength: "225"
                        example: "ACME Corp BRAND"
                      mcc:
                        type: "string"
                        description: "Código MCC (actividad económica)."
                        maxLength: "10"
                        example: "0742"
                      websiteURL:
                        type: "string"
                        description: "URL del sitio web del comercio."
                        maxLength: "225"
                        example: "https://acme.com"
                      consumer:
                        type: "object"
                        description: "Contenedor principal de los datos del consumidor."
                        properties:
                          id:
                            type: "string"
                            description: "Identificador del consumidor."
                            maxLength: "36"
                            example: "your-consumer-id"
                          name:
                            type: "uuid"
                            description: "Nombre del consumidor."
                            maxLength: "225"
                            example: "Consumer Name"
                      address:
                        $ref: "#/components/schemas/Address"
                      document:
                        $ref: "#/components/schemas/Document"
                      legalRepresentative:
                        $ref: "#/components/schemas/LegalRepresentative"
                      availableFranchises:
                        $ref: "#/components/schemas/AvailableFranchises"
                      createdAt:
                        type: "string"
                        description: "Fecha de creación del comercio."
                        format: "date-time"
                        example: "2022-12-30 13:45:02"
                      updatedAt:
                        type: "string"
                        description: "Fecha de actualización del comercio."
                        format: "date-time"
                        example: "2022-12-30 13:45:02"
                    required:
                      - "name"
                      - "brand"
                      - "consumer"
                      - "address"
                      - "document"
                      - "legalRepresentative"
  /api/admin/merchants/index:
    post:
      summary: "Listado de comercios"
      operationId: "token-requestor-admin-merchants-index"
      requestBody:
        content:
          application/json:
            schema:
              type: "object"
              properties:
                auth:
                  $ref: "#/components/schemas/Authentication"
                filters:
                  type: "object"
                  description: "Contenedor de los criterios de filtrado."
                  properties:
                    consumers:
                      type: "array"
                      description: "Contenedor con los identificadores de consumidores asociados a comercios."
                      items:
                        type: "string"
                      example: '["your-consumer-id"]'
                    name:
                      type: "string"
                      description: "Nombre del comercio."
                      maxLength: "225"
                      example: "ACME Corp"
                    brand:
                      type: "string"
                      description: "Nombre de la marca asociada al comercio."
                      maxLength: "225"
                      example: "ACME Corp BRAND"
                    document:
                      $ref: "#/components/schemas/Document"
                    createdAt:
                      type: "object"
                      description: "Contenedor para filtrado por fecha de creación."
                      properties:
                        from:
                          type: "string"
                          description: "Fecha inicial del rango de creación."
                          format: "date-time"
                          example: "2022-12-30 13:45:02"
                        to:
                          type: "string"
                          description: "Fecha final del rango de creación."
                          format: "date-time"
                          example: "2022-12-30 13:45:02"
                    updatedAt:
                      type: "object"
                      description: "Contenedor para filtrado por fecha de actualización."
                      properties:
                        from:
                          type: "string"
                          description: "Fecha inicial del rango de actualización."
                          format: "date-time"
                          example: "2022-12-30 13:45:02"
                        to:
                          type: "string"
                          description: "Fecha final del rango de actualización."
                          format: "date-time"
                          example: "2022-12-30 13:45:02"
                    pagination:
                      type: "object"
                      description: "Parámetros de paginación."
                      properties:
                        perPage:
                          type: "integer"
                          description: "Número de elementos que se mostrarán por página. Define el tamaño de la página."
                          maxLength: "100"
                          example: "10"
                        currentPage:
                          type: "integer"
                          description: "Número de la página actual que se desea consultar (basado en el total de elementos y `perPage`)."
                          minLength: "1"
                          example: "1"
              required:
                - "auth"
      responses:
        '200':
          description: "Respuesta exitosa"
          content:
            application/json:
              schema:
                type: "object"
                properties:
                  status:
                    $ref: "#/components/schemas/Status"
                  pagination:
                    type: "object"
                    description: "Información sobre la paginación de los resultados."
                    properties:
                      total:
                        type: "integer"
                        description: "Total de registros disponibles en la colección consultada."
                        example: "10"
                      perPage:
                        type: "integer"
                        description: "Cantidad de elementos que se muestran por página."
                        example: "10"
                      currentPage:
                        type: "integer"
                        description: "Página actual que se está consultando."
                        example: "1"
                      lastPage:
                        type: "integer"
                        description: "Última página disponible, calculada en función del total de registros y la cantidad por página."
                        example: "1"
                  data:
                    type: "object"
                    description: "Contenedor principal de los datos del comercio."
                    properties:
                      id:
                        type: "uuid"
                        description: "Identificador del comercio."
                        maxLength: "36"
                        example: "9f5db0db-102a-40f8-a1aa-d7735d9fb50a"
                      name:
                        type: "string"
                        description: "Nombre del comercio."
                        maxLength: "225"
                        example: "ACME Corp"
                      brand:
                        type: "string"
                        description: "Nombre de la marca asociada al comercio."
                        maxLength: "225"
                        example: "ACME Corp BRAND"
                      consumer:
                        type: "object"
                        description: "Contenedor principal de los datos del consumidor."
                        properties:
                          id:
                            type: "string"
                            description: "Identificador del consumidor."
                            maxLength: "36"
                            example: "your-consumer-id"
                          name:
                            type: "uuid"
                            description: "Nombre del consumidor."
                            maxLength: "225"
                            example: "Consumer Name"
                      document:
                        $ref: "#/components/schemas/Document"
                      createdAt:
                        type: "string"
                        description: "Fecha de creación del comercio."
                        format: "date-time"
                        example: "2022-12-30 13:45:02"
                      updatedAt:
                        type: "string"
                        description: "Fecha de actualización del comercio."
                        format: "date-time"
                        example: "2022-12-30 13:45:02"
                    required:
                      - "name"
                      - "brand"
                      - "consumer"
                      - "document"

components:
  schemas:
    Status:
      title: "Status"
      type: "object"
      description: "Estructura que contiene la información sobre una solicitud, informa al estado actual de la misma."
      properties:
        status:
          type: "string"
          description: "Estado de la operación."
          enum:
            - "OK"
            - "REJECTED"
            - "FAILED"
            - "PENDING"
          example: "OK"
        reason:
          type: "string"
          description: "Razón del estado de la operación."
          maxLength: "2"
          example: "00"
        message:
          type: "string"
          description: "Descripción del estado."
          example: "The request has been successfully processed"
        date:
          type: "string"
          description: "Fecha en la que se ejecutó la operación."
          format: "date-time"
          example: '2025-03-17T22:45:27+00:00'
      required:
        - "status"
        - "reason"
        - "message"
        - "date"
    Authentication:
      title: "Autenticación"
      type: "object"
      description: "Objeto de autenticación. Ver más en **[Autenticación](/token-requestor/integration/authentication)**. 
        Estructura que contiene la información de autenticación del sitio generada de acuerdo al WSSE UsernameToken Profile 1.1."
      properties:
        login:
          type: "string"
          description: "Login para autenticación."
          minLength: "1"
          example: "aabbccdd1234567890aabbccdd123456"
        tranKey:
          type: "string"
          description: "Clave de transacción."
          minLength: "1"
          example: "ABC123example456trankey+789abc012def3456ABC="
        nonce:
          type: "string"
          description: "Valor aleatorio para cada solicitud codificado en Base64."
          minLength: "1"
          example: "enQ4dXh3YWhkMWM="
        seed:
          type: "string"
          description: "Fecha actual, la cual se genera en formato ISO 8601."
          minLength: "1"
          example: "2023-06-21T09:56:06-05:00"
      required:
        - "login"
        - "tranKey"
        - "nonce"
        - "seed"
    Address:
      title: "Address"
      type: "object"
      description: "Estructura que contiene la información sobre una dirección física."
      properties:
        street:
          type: "string"
          description: "Dirección (calle)."
          maxLength: "100"
          example: "Direccion del customer"
        city:
          type: "string"
          description: "Ciudad."
          maxLength: "100"
          example: "Medellin"
        state:
          type: "string"
          description: "Departamento o provincia."
          maxLength: "100"
          example: "belen"
        country:
          type: "string"
          description: "País. Código ISO 3166-1 alpha-2."
          maxLength: "2"
          example: "CO"
        phone:
          type: "string"
          description: "Teléfono de contacto."
          maxLength: "20"
          example: "3111111111"
        zipCode:
          type: "string"
          description: "Código postal."
          maxLength: "20"
          example: "050031"
      required:
        - "zipCode"
        - "city"
        - "country"
    Document:
      title: "Document"
      type: "object"
      description: "Estructura que contiene información acerca de un documento."
      properties:
        type:
          type: "string"
          description: "Tipo de documento de identificación."
          maxLength: "4"
          enum:
            - "CC"
            - "CE"
            - "TI"
            - "NIT"
            - "RUT"
            - "PPN"
            - "TAX"
            - "LIC"
            - "CIP"
            - "PARUC"
            - "CPF"
            - "CI"
            - "RUC"
            - "DNI"
            - "PERUC"
            - "CRCPF"
            - "CPJ"
            - "DIMEX"
            - "DIDI"
            - "CLRUT"
            - "HNDNI"
            - "HNDR"
            - "RTN"
            - "BZSSN"
            - "BRN"
            - "EIN"
            - "UYCI"
            - "UYRUT"
          example: "NIT"
        number:
          type: "string"
          description: "Número de documento de identificación."
          example: "123456123"
      required:
        - "type"
        - "number"
    LegalRepresentative:
      title: "Legal Representative"
      type: "object"
      description: "Estructura que refleja la información del representante legal del comercio."
      properties:
        documentType:
          type: "string"
          description: "Tipo de documento de identificación."
          maxLength: "4"
          enum:
            - "CC"
            - "CE"
            - "TI"
            - "NIT"
            - "RUT"
            - "PPN"
            - "TAX"
            - "LIC"
            - "CIP"
            - "PARUC"
            - "CPF"
            - "CI"
            - "RUC"
            - "DNI"
            - "PERUC"
            - "CRCPF"
            - "CPJ"
            - "DIMEX"
            - "DIDI"
            - "CLRUT"
            - "HNDNI"
            - "HNDR"
            - "RTN"
            - "BZSSN"
            - "BRN"
            - "EIN"
            - "UYCI"
            - "UYRUT"
          example: "CC"
        documentNumber:
          type: "string"
          description: "Número de documento de identificación."
          maxLength: "20"
          example: "12345678"
        name:
          type: "string"
          description: "Nombre del representante legal."
          maxLength: "100"
          example: "Legal representative name"
        surname:
          type: "string"
          description: "Apellidos del representante legal."
          maxLength: "100"
          example: "Legal representative surname"
        email:
          type: "string"
          description: "Correo electrónico del representante legal."
          maxLength: "225"
          example: "Jane@Doe"
        phone:
          type: "string"
          description: "Teléfono de contacto del representante legal."
          maxLength: "20"
          example: "34455"
      required:
        - "name"
        - "surname"
        - "email"
        - "phone"
    AvailableFranchises:
      title: "Franquicias Disponibles"
      type: "object"
      description: "Estado de disponibilidad de cada franquicia para la gestión de tokens."
      properties:
        visa:
          type: "string"
          description: "Estado de disponibilidad de Visa."
          enum:
            - "PENDING"
            - "ACTIVE"
          example: "ACTIVE"
        master:
          type: "string"
          description: "Estado de disponibilidad de Mastercard."
          enum:
            - "PENDING"
            - "ACTIVE"
          example: "ACTIVE"
