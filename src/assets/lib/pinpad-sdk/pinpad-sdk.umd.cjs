(function(_,A){typeof exports=="object"&&typeof module<"u"?A(exports):typeof define=="function"&&define.amd?define(["exports"],A):(_=typeof globalThis<"u"?globalThis:_||self,A(_["pinpad-sdk"]={}))})(this,function(_){"use strict";const A={modal:{"../components/number-pad/number-pad":()=>Promise.resolve().then(()=>ee),"../components/panel-pad/panel-pad":()=>Promise.resolve().then(()=>kt),"../components/pinpad-modal/pinpad-modal":()=>Promise.resolve().then(()=>_t)},static:{"../components/number-pad/number-pad":()=>Promise.resolve().then(()=>ee),"../components/pinpad-static/pinpad-static":()=>Promise.resolve().then(()=>Be)},float:{"../components/number-pad/number-pad":()=>Promise.resolve().then(()=>ee),"../components/pinpad-static/pinpad-static":()=>Promise.resolve().then(()=>Be),"../components/pinpad-float/pinpad-float":()=>Promise.resolve().then(()=>Nt)}};class U{#e;constructor(e){this.#e=e}static make(e){return new U(e)}define(){let e;const n=new Promise(s=>{e=s}),o=A[this.#e],r=[Promise.resolve().then(()=>xt).then(s=>{s.define()}),Promise.resolve().then(()=>At).then(s=>{s.define()})];for(let s in o)r.push(o[s]().then(i=>{i.define()}));return Promise.all(r).then(()=>{e()}),n}}class Je{#e;#t=new Set;constructor(e){this.#e=Object.assign({locale:document.documentElement.lang,mask:!0,mode:"modal",pinLength:4,theming:null},e??{})}get mask(){return typeof this.#e.mask=="string"?this.#e.mask??"*":this.#e.mask?"*":""}destroy(){this.#t.forEach(e=>{document.querySelector(e).querySelector("ptp-pinpad-context").remove()}),this.#t.clear()}render(e,n,o=()=>{},r=()=>{}){const s=document.querySelector(e);if(!s)return null;U.make(this.#e.mode).define().then(()=>{this._render(s,n,r),this.#t.add(e)})}_setAttributes(e,n){e.setAttribute("locale",this.#e.locale),e.setAttribute("mask",this.mask),e.setAttribute("length",this.#e.pinLength.toString()),e.setAttribute("positions",n),this.#e.theming&&e.setAttribute("theming",JSON.stringify(this.#e.theming))}_renderModal(){return document.createElement("ptp-pinpad-modal")}_renderStatic(e){const n=document.createElement("ptp-pinpad-static");return n.addEventListener("Delete",e),n}_renderFloat(e){const n=document.createElement("ptp-pinpad-float");return n.addEventListener("Delete",e),n}_render(e,n,o=()=>{}){const r=document.createElement("ptp-pinpad-context");this._setAttributes(r,n);const s=document.createElement("ptp-pinpad");this.#e.pin&&s.setAttribute("pin",this.#e.pin),s.setAttribute("mode",this.#e.mode),r.appendChild(s);let i;this.#e.mode==="modal"?i=this._renderModal():this.#e.mode==="static"?i=this._renderStatic(o):i=this._renderFloat(o),s.append(i),e.appendChild(r)}}class pe{static async createTransaction(e,n){const o=await fetch(`${e}/api/transaction`,{method:"POST",headers:{Authorization:"Bearer "+n}});if(!o.ok)throw new Error("Failed to create transaction");return{data:await o.json(),status:o.status,statusText:o.statusText,headers:o.headers}}static async encryptPin(e){const n=await fetch(`${e.url}/api/pinblock-generator/${e.transactionId}`,{method:"POST",headers:{Authorization:"Bearer "+e.token,"Accept-Language":e.locale},body:JSON.stringify(e)});if(!n.ok)throw new Error("Failed to generate pinblock");return{data:await n.json(),status:n.status,statusText:n.statusText,headers:n.headers}}}class Ke{apiUrl;authToken;constructor(e,n){this.apiUrl=e,this.authToken=n}createTransaction(){return pe.createTransaction(this.apiUrl,this.authToken)}generatePinBlock(e){const n={url:this.apiUrl,token:this.authToken,...e};return pe.encryptPin(n)}}class qe{#e;#t=new Set;constructor(e){this.#e=e}get current(){return this.#e}set current(e){this.#e!=e&&(this.#e=e,this.#t.forEach(n=>n(e)))}on(e){return this.#t.add(e),()=>this.#t.delete(e)}}const fe=t=>new qe(t),H=Symbol.for("atomico.hooks");globalThis[H]=globalThis[H]||{};let x=globalThis[H];const Qe=Symbol.for("Atomico.suspense"),me=Symbol.for("Atomico.effect"),Xe=Symbol.for("Atomico.layoutEffect"),he=Symbol.for("Atomico.insertionEffect"),L=(t,e,n)=>{const{i:o,hooks:r}=x.c,s=r[o]=r[o]||{};return s.value=t(s.value),s.effect=e,s.tag=n,x.c.i++,r[o].value},S=t=>L((e=fe(t))=>e),M=()=>L((t=fe(x.c.host))=>t),be=()=>x.c.update,Ge=(t,e,n=0)=>{let o={},r=!1;const s=()=>r,i=(c,a)=>{for(const f in o){const d=o[f];d.effect&&d.tag===c&&(d.value=d.effect(d.value,a))}};return{load:c=>{x.c={host:e,hooks:o,update:t,i:0,id:n};let a;try{r=!1,a=c()}catch(f){if(f!==Qe)throw f;r=!0}finally{x.c=null}return a},cleanEffects:c=>(i(he,c),()=>(i(Xe,c),()=>{i(me,c)})),isSuspense:s}},O=Symbol.for;function ge(t,e){const n=t.length;if(n!==e.length)return!1;for(let o=0;o<n;o++){let r=t[o],s=e[o];if(r!==s)return!1}return!0}const v=t=>typeof t=="function",j=t=>typeof t=="object",{isArray:Ze}=Array,Y=(t,e)=>(e?t instanceof HTMLStyleElement:!0)&&"hydrate"in(t?.dataset||{});function ye(t,e){let n;const o=r=>{let{length:s}=r;for(let i=0;i<s;i++){const u=r[i];if(u&&Array.isArray(u))o(u);else{const l=typeof u;if(u==null||l==="function"||l==="boolean")continue;l==="string"||l==="number"?(n==null&&(n=""),n+=u):(n!=null&&(e(n),n=null),e(u))}}};o(t),n!=null&&e(n)}const Ee=(t,e,n)=>(t.addEventListener(e,n),()=>t.removeEventListener(e,n));let we=class{constructor(e,n,o){this.message=n,this.target=e,this.value=o}};class We extends we{}class Ve extends we{}const D="Custom",et=null,tt={true:1,"":1,1:1};function nt(t,e,n,o,r){const{type:s,reflect:i,event:u,value:l,attr:c=ot(e)}=n?.name!=D&&j(n)&&n!=et?n:{type:n},a=s?.name===D&&s.map,f=l!=null?s==Function||!v(l)?()=>l:l:null;Object.defineProperty(t,e,{configurable:!0,set(d){const m=this[e];f&&s!=Boolean&&d==null&&(d=f());const{error:y,value:b}=(a?it:ct)(s,d);if(y&&b!=null)throw new We(this,`The value defined for prop '${e}' must be of type '${s.name}'`,b);m!=b&&(this._props[e]=b??void 0,this.update(),u&&ve(this,u),this.updated.then(()=>{i&&(this._ignoreAttr=c,rt(this,s,c,this[e]),this._ignoreAttr=null)}))},get(){return this._props[e]}}),f&&(r[e]=f()),o[c]={prop:e,type:s}}const ve=(t,{type:e,base:n=CustomEvent,...o})=>t.dispatchEvent(new n(e,o)),ot=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase(),rt=(t,e,n,o)=>o==null||e==Boolean&&!o?t.removeAttribute(n):t.setAttribute(n,e?.name===D&&e?.serialize?e?.serialize(o):j(o)?JSON.stringify(o):e==Boolean?"":o),st=(t,e)=>t==Boolean?!!tt[e]:t==Number?Number(e):t==String?e:t==Array||t==Object?JSON.parse(e):t.name==D?e:new t(e),it=({map:t},e)=>{try{return{value:t(e),error:!1}}catch{return{value:e,error:!0}}},ct=(t,e)=>t==null||e==null?{value:e,error:!1}:t!=String&&e===""?{value:void 0,error:!1}:t==Object||t==Array||t==Symbol?{value:e,error:{}.toString.call(e)!==`[object ${t.name}]`}:e instanceof t?{value:e,error:t==Number&&Number.isNaN(e.valueOf())}:t==String||t==Number||t==Boolean?{value:e,error:t==Number?typeof e!="number"?!0:Number.isNaN(e):t==String?typeof e!="string":typeof e!="boolean"}:{value:e,error:!0};let lt=0;const at=t=>{const e=(t?.dataset||{})?.hydrate||"";return e||"c"+lt++},C=(t,e=HTMLElement)=>{const n={},o={},r="prototype"in e&&e.prototype instanceof Element,s=r?e:"base"in e?e.base:HTMLElement,{props:i,styles:u}=r?t:e;class l extends s{constructor(){super(),this._setup(),this._render=()=>t({...this._props});for(const a in o)this[a]=o[a]}static get styles(){return[super.styles,u]}async _setup(){if(this._props)return;this._props={};let a,f;this.mounted=new Promise(h=>this.mount=()=>{h(),a!=this.parentNode&&(f!=a?this.unmounted.then(this.update):this.update()),a=this.parentNode}),this.unmounted=new Promise(h=>this.unmount=()=>{h(),(a!=this.parentNode||!this.isConnected)&&(d.cleanEffects(!0)()(),f=this.parentNode,a=null)}),this.symbolId=this.symbolId||Symbol(),this.symbolIdParent=Symbol();const d=Ge(()=>this.update(),this,at(this));let m,y=!0;const b=Y(this);this.update=()=>(m||(m=!0,this.updated=(this.updated||this.mounted).then(()=>{try{const h=d.load(this._render),g=d.cleanEffects();return h&&h.render(this,this.symbolId,b),m=!1,y&&!d.isSuspense()&&(y=!1,!b&&dt(this)),g()}finally{m=!1}}).then(h=>{h&&h()})),this.updated),this.update()}connectedCallback(){this.mount(),super.connectedCallback&&super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this.unmount()}attributeChangedCallback(a,f,d){if(n[a]){if(a===this._ignoreAttr||f===d)return;const{prop:m,type:y}=n[a];try{this[m]=st(y,d)}catch{throw new Ve(this,`The value defined as attr '${a}' cannot be parsed by type '${y.name}'`,d)}}else super.attributeChangedCallback(a,f,d)}static get props(){return{...super.props,...i}}static get observedAttributes(){const a=super.observedAttributes||[];for(const f in i)nt(this.prototype,f,i[f],n,o);return Object.keys(n).concat(a)}}return l};function dt(t){const{styles:e}=t.constructor,{shadowRoot:n}=t;if(n&&e.length){const o=[];ye(e,r=>{r&&(r instanceof Element?n.appendChild(r.cloneNode(!0)):o.push(r))}),o.length&&(n.adoptedStyleSheets=o)}}const Ce=t=>(e,n)=>{L(([o,r]=[])=>((r||!r)&&(r&&ge(r,n)?o=o||!0:(v(o)&&o(),o=null)),[o,n]),([o,r],s)=>s?(v(o)&&o(),[]):[o||e(),r],t)},w=Ce(me),Pe=Ce(he);class ut extends Array{constructor(e,n){let o=!0;const r=s=>{try{n(s,this,o)}finally{o=!1}};super(void 0,r,n),r(e)}}const k=t=>{const e=be();return L((n=new ut(t,(o,r,s)=>{o=v(o)?o(r[0]):o,o!==r[0]&&(r[0]=o,s||e())}))=>n)},Se=(t,e)=>{const[n]=L(([o,r,s=0]=[])=>((!r||r&&!ge(r,e))&&(o=t()),[o,e,s]));return n},ke=(t,e)=>Se(()=>t,e),E=(t,e={})=>{const n=M();return n[t]||(n[t]=(o=e.detail)=>ve(n.current,{type:t,...e,detail:o})),n[t]},J=O("atomico/options");globalThis[J]=globalThis[J]||{sheet:!!document.adoptedStyleSheets};const I=globalThis[J],pt=new Promise(t=>{I.ssr||(document.readyState==="loading"?Ee(document,"DOMContentLoaded",t):t())}),ft={checked:1,value:1,selected:1},mt={list:1,type:1,size:1,form:1,width:1,height:1,src:1,href:1,slot:1},ht={shadowDom:1,staticNode:1,cloneNode:1,children:1,key:1},z={},K=[];class B extends Text{}const bt=O("atomico/id"),$=O("atomico/type"),q=O("atomico/ref"),Te=O("atomico/vnode"),gt=()=>{};function yt(t,e,n){return Ne(this,t,e,n)}const _e=(t,e,...n)=>{const o=e||z;let{children:r}=o;if(r=r??(n.length?n:K),t===gt)return r;const s=t?t instanceof Node?1:t.prototype instanceof HTMLElement&&2:0;if(s===!1&&t instanceof Function)return t(r!=K?{children:r,...o}:o);const i=I.render||yt;return{[$]:Te,type:t,props:o,children:r,key:o.key,shadow:o.shadowDom,static:o.staticNode,raw:s,is:o.is,clone:o.cloneNode,render:i}};function Ne(t,e,n=bt,o,r){let s;if(e&&e[n]&&e[n].vnode==t||t[$]!=Te)return e;(t||!e)&&(r=r||t.type=="svg",s=t.type!="host"&&(t.raw==1?(e&&t.clone?e[q]:e)!=t.type:t.raw==2?!(e instanceof t.type):e?e[q]||e.localName!=t.type:!e),s&&t.type!=null&&(t.raw==1&&t.clone?(o=!0,e=t.type.cloneNode(!0),e[q]=t.type):e=t.raw==1?t.type:t.raw==2?new t.type:r?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type,t.is?{is:t.is}:void 0)));const i=e[n]?e[n]:z,{vnode:u=z,cycle:l=0}=i;let{fragment:c,handlers:a}=i;const{children:f=K,props:d=z}=u;if(a=s?{}:a||{},t.static&&!s)return e;if(t.shadow&&!e.shadowRoot&&e.attachShadow({mode:"open",...t.shadow}),t.props!=d&&vt(e,d,t.props,a,r),t.children!==f){const m=t.shadow?e.shadowRoot:e;c=wt(t.children,c,m,n,!l&&o,r&&t.type=="foreignObject"?!1:r)}return e[n]={vnode:t,handlers:a,fragment:c,cycle:l+1},e}function Et(t,e){const n=new B(""),o=new B("");let r;if(t[e?"prepend":"append"](n),e){let{lastElementChild:s}=t;for(;s;){const{previousElementSibling:i}=s;if(Y(s,!0)&&!Y(i,!0)){r=s;break}s=i}}return r?r.before(o):t.append(o),{markStart:n,markEnd:o}}function wt(t,e,n,o,r,s){t=t==null?null:Ze(t)?t:[t];const i=e||Et(n,r),{markStart:u,markEnd:l,keyes:c}=i;let a;const f=c&&new Set;let d=u;if(t&&ye(t,m=>{if(typeof m=="object"&&!m[$])return;const y=m[$]&&m.key,b=c&&y!=null&&c.get(y);d!=l&&d===b?f.delete(d):d=d==l?l:d.nextSibling;const h=c?b:d;let g=h;if(m[$])g=Ne(m,h,o,r,s);else{const ue=m+"";!(g instanceof Text)||g instanceof B?g=new Text(ue):g.data!=ue&&(g.data=ue)}g!=d&&(c&&f.delete(g),!h||c?(n.insertBefore(g,d),c&&d!=l&&f.add(d)):h==l?n.insertBefore(g,l):(n.replaceChild(g,h),d=g)),y!=null&&(a=a||new Map,a.set(y,g))}),d=d==l?l:d.nextSibling,e&&d!=l)for(;d!=l;){const m=d;d=d.nextSibling,m.remove()}return f&&f.forEach(m=>m.remove()),i.keyes=a,i}function vt(t,e,n,o,r){for(const s in e)!(s in n)&&xe(t,s,e[s],null,r,o);for(const s in n)xe(t,s,e[s],n[s],r,o)}function xe(t,e,n,o,r,s){if(e=e=="class"&&!r?"className":e,n=n??null,o=o??null,e in t&&ft[e]&&(n=t[e]),!(o===n||ht[e]||e[0]=="_"))if(t.localName==="slot"&&e==="assignNode"&&"assign"in t)t.assign(o);else if(e[0]=="o"&&e[1]=="n"&&(v(o)||v(n)))Ct(t,e.slice(2),o,s);else if(e=="ref")o&&(v(o)?o(t):o.current=t);else if(e=="style"){const{style:i}=t;n=n||"",o=o||"";const u=j(n),l=j(o);if(u)for(const c in n)if(l)!(c in o)&&Ae(i,c,null);else break;if(l)for(const c in o){const a=o[c];u&&n[c]===a||Ae(i,c,a)}else i.cssText=o}else{const i=e[0]=="$"?e.slice(1):e;i===e&&(!r&&!mt[e]&&e in t||v(o)||v(n))?t[e]=o??"":o==null?t.removeAttribute(i):t.setAttribute(i,j(o)?JSON.stringify(o):o)}}function Ct(t,e,n,o){if(o.handleEvent||(o.handleEvent=r=>o[r.type].call(t,r)),n){if(!o[e]){const r=n.capture||n.once||n.passive?Object.assign({},n):null;t.addEventListener(e,o,r)}o[e]=n}else o[e]&&(t.removeEventListener(e,o),delete o[e])}function Ae(t,e,n){let o="setProperty";n==null&&(o="removeProperty",n=null),~e.indexOf("-")?t[o](e,n):t[e]=n}const Pt=_e("host",{style:"display: contents"}),Le="value",Q=(t,e)=>{const n=M(),o=S();Pe(()=>Ee(n.current,"ConnectContext",r=>{r.composedPath().at(0)!==r.currentTarget&&t===r.detail.id&&(r.stopPropagation(),r.detail.connect(o))}),[t]),o.current=e},Oe=t=>{const e=E("ConnectContext",{bubbles:!0,composed:!0}),[n,o]=k(()=>{if(I.ssr)return;let s;return e({id:t,connect(i){s=i}}),s}),r=be();return w(()=>{pt.then(()=>e({id:t,connect:o}))},[t]),w(()=>{if(n)return n.on(r)},[n]),n?.current||t[Le]},X=t=>{const e=C(({value:n})=>(Q(e,n),Pt),{props:{value:{type:Object,value:()=>t}}});return e[Le]=t,e};X({dispatch(t,e){}});const je=(t,e)=>{const n=M();Pe(()=>{let o=!1,r,s=()=>{r&&r(),r=null};const i=async()=>{o||(o=!0,await n.current.updated,s(),o=!1,r=t())},u=e.map(l=>l?.on(i));return n.once||(n.once=!0,i()),()=>{u.map(l=>l&&l()),s()}},e)},$e={};function T(t,...e){const n=(t.raw||t).reduce((o,r,s)=>o+r+(e[s]||""),"");return $e[n]=$e[n]||St(n)}function St(t){if(I.sheet){const e=new CSSStyleSheet;return e.replaceSync(t),e}else{const e=document.createElement("style");return e.textContent=t,e}}const p=(t,e,n)=>(e==null?e={key:n}:e.key=n,_e(t,e)),P=p,N=(...t)=>t.filter(Boolean).join(" "),G=X({locale:"es",trans:t=>t});customElements.define("ptp-lang-context",G);const Z=()=>{const{trans:t}=Oe(G);return t},Me=X({positions:[],mask:"*",length:4,theming:null}),W=()=>Oe(Me);function V({mode:t,disabled:e,resettable:n,hideHelpText:o=!1}){const[r,s]=k(!1),[i,u]=k(!0),{mask:l,positions:c}=W(),a=Z(),f=E("Pressed"),d=E("Confirm"),m=E("Delete"),y=Se(()=>!r&&i&&l?l.repeat(10).split(""):c,[r,i,l,c]),b=h=>{s(!h.matches)};return w(()=>{if(!("matchMedia"in window))return;const h=window.matchMedia("(min-width: 768px)");return"addEventListener"in h?h.addEventListener("change",b):h.addListener(b),s(!h.matches),()=>{"removeEventListener"in h?h.removeEventListener("change",b):h.removeListener(b)}},[]),p("host",{shadowDom:!0,children:P("div",{class:N("container",t),onmouseenter:()=>u(!1),onmouseleave:()=>u(!0),children:[y.map((h,g)=>p("button",{type:"button",onclick:()=>f({value:g}),class:N("number-pad",g===0&&"top-left",g===2&&"top-right",g===9?"pad-9":"-pad-9",g!==2&&g!==5&&g!==8&&"pad-right",t),disabled:e,children:h})),P("button",{type:"button",disabled:!e,class:N("icon-pad confirm",t),onclick:d,children:[P("svg",{class:"icon confirm",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p("path",{fill:"currentColor",d:"M11.68 15.37c-.19 0-.38-.07-.53-.22a.754.754 0 0 1 0-1.06l2.03-2.03-2.03-2.03a.754.754 0 0 1 0-1.06c.29-.29.77-.29 1.06 0l2.56 2.56c.29.29.29.77 0 1.06l-2.56 2.56c-.14.15-.34.22-.53.22"}),p("path",{fill:"currentColor",d:"M14.17 12.81H4c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h10.17c.41 0 .75.34.75.75s-.34.75-.75.75"}),p("path",{fill:"currentColor",d:"M12 20.75c-.41 0-.75-.34-.75-.75s.34-.75.75-.75c4.27 0 7.25-2.98 7.25-7.25S16.27 4.75 12 4.75c-.41 0-.75-.34-.75-.75s.34-.75.75-.75c5.15 0 8.75 3.6 8.75 8.75s-3.6 8.75-8.75 8.75"})]}),p("span",{class:o&&"sr-only",children:a("panel.number.buttons.confirm")})]}),P("button",{type:"button",disabled:!n,class:N("icon-pad cancel",t),onclick:m,children:[P("svg",{class:"icon cancel",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p("path",{fill:"currentColor",d:"M17 21h-6.72c-1.62 0-3.17-.69-4.25-1.88L2.5 15.24a4.783 4.783 0 0 1 0-6.47l3.53-3.88A5.73 5.73 0 0 1 10.28 3H17c3.17 0 5.75 2.58 5.75 5.75v6.5c0 3.17-2.58 5.75-5.75 5.75M10.28 4.5c-1.19 0-2.34.51-3.14 1.39L3.6 9.78a3.3 3.3 0 0 0 0 4.45l3.53 3.88c.8.88 1.95 1.39 3.14 1.39H17a4.26 4.26 0 0 0 4.25-4.25v-6.5A4.26 4.26 0 0 0 17 4.5z"}),p("path",{fill:"currentColor",d:"M16 15.22c-.19 0-.38-.07-.53-.22l-4.94-4.95a.755.755 0 0 1 0-1.06c.29-.29.77-.29 1.06 0l4.94 4.95c.29.29.29.77 0 1.06-.15.15-.34.22-.53.22"}),p("path",{fill:"currentColor",d:"M11.06 15.22c-.19 0-.38-.07-.53-.22a.754.754 0 0 1 0-1.06L15.47 9c.29-.29.77-.29 1.06 0s.29.77 0 1.06L11.59 15c-.15.15-.34.22-.53.22"})]}),p("span",{class:o&&"sr-only",children:a("panel.number.buttons.delete")})]})]})})}V.props={mode:{type:String,value:"fit",reflect:!0},resettable:{type:Boolean,reflect:!0},disabled:{type:Boolean,reflect:!0},hideHelpText:{type:Boolean}},V.styles=T`:host{font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";display:block}.container{display:grid;overflow-x:auto;grid-template-columns:repeat(3,minmax(0,1fr));font-size:1.25rem;line-height:1.75rem;color:#111827;background-color:#fff}.container.full{width:100%}.container.fit{min-width:fit-content}button{cursor:pointer}button:disabled{cursor:not-allowed;pointer-events:none}.number-pad{font-size:1.25rem;line-height:1.75rem;vertical-align:middle;padding:1.5rem;border-width:0;border-color:#e5e7eb;border-style:inset;text-align:center;background-color:#fff;transition-property:color,background-color;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.45s}.number-pad:hover{background-color:#f3f4f6}.number-pad.fit{padding:1.1rem}.number-pad.top-left{border-top-left-radius:.25rem}.number-pad.top-right{border-top-right-radius:.25rem}.pad-right{border-right-width:1px}.-pad-9{border-bottom-width:1px}.pad-9{z-index:10;grid-column-start:2;border-left-width:1px;margin-left:-1px;border-left-style:outset}.icon-pad{display:flex;flex-direction:column;gap:.25rem;justify-content:center;align-items:center;border-style:none;background-color:#fff;transition-property:color,background-color;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}.icon-pad:hover{background-color:#f3f4f6}.icon-pad.full{padding:.75rem}.icon-pad.fit{padding:.5rem 1.5rem}.icon-pad.confirm{color:#10b981;border-bottom-right-radius:.25rem}.icon-pad.confirm:hover{border-bottom-right-radius:.25rem}.icon-pad.cancel{color:#dc2626;grid-column-start:1;grid-row-start:4}.icon-pad.cancel:hover{border-right-width:1px;border-bottom-left-radius:.25rem}.icon-pad:disabled{color:#9ca3af;cursor:not-allowed;pointer-events:none}svg.icon{width:2rem;height:2rem}svg.icon.confirm{margin-right:-.125rem}svg.icon.cancel{margin-left:-.25rem}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}@media (min-width: 768px){.container{max-width:20rem}}`;const R=C(V),ee=Object.freeze(Object.defineProperty({__proto__:null,NumberPad:R,define:()=>{customElements.get("ptpi-number-pad")||customElements.define("ptpi-number-pad",R)}},Symbol.toStringTag,{value:"Module"}));function te(){const[t,e]=k(""),{length:n}=W(),o=Z(),r=E("Confirm"),s=E("Cancel"),i=c=>{t.length>=n||e(a=>a+c)},u=()=>{t.length<n||r({pin:t})},l=()=>{e(c=>c.slice(0,-1))};return p("host",{shadowDom:!0,children:P("div",{class:"container",children:[p("h3",{class:"title",children:o("panel.modal.title")}),P("div",{role:"button",type:"button",class:"icon-close",onclick:s,children:[p("span",{class:"sr-only",children:o("panel.modal.close")}),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon",children:p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})})]}),p("div",{class:"container-display",children:Array.from({length:n}).map((c,a)=>p("div",{class:"display",children:p("span",{class:a<t.length?"filled":"unfilled",children:"â€¢"})}))}),p("div",{class:"container-pad",children:p(R,{mode:"full",resettable:!!t.length,disabled:t.length===n,onPressed:c=>i(c.detail.value),onConfirm:u,onDelete:l})})]})})}te.props={},te.styles=T`:host{display:block;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}ptpi-number-pad{width:100%}.container-pad{display:flex;padding:.75rem;justify-content:center;align-items:center}.icon-close{position:absolute;top:1rem;right:1rem;cursor:pointer}.icon-close svg{width:1.5rem;height:1.5rem;color:#6b7280}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}h3.title{padding:1.5rem;padding-bottom:0;font-size:1rem;line-height:1.5rem;font-weight:500;text-align:center;margin:0}.container{position:relative;width:100%;background-color:#fff}.container-display{display:flex;padding:.75rem;padding-bottom:0;gap:2.5rem;justify-content:center;align-items:center}.container-display>div{padding:10px}.container-display>div>span{font-size:1.875rem;line-height:2.25rem;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}.container-display span.filled{color:#111827}.container-display span.unfilled{color:#e5e7eb}@media (min-width: 768px){.container-display{gap:1rem}}`;const ne=C(te),kt=Object.freeze(Object.defineProperty({__proto__:null,PanelPad:ne,define:()=>{customElements.get("ptpi-panel-pad")||customElements.define("ptpi-panel-pad",ne)}},Symbol.toStringTag,{value:"Module"}));function Tt(t){const e=S();return e.current=t,e}function oe(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n)}function De(t,e,n){const o=Tt(n);je(()=>{const{current:r}=t;if(!r)return;const s=new Set,i=()=>{if(e.length==s.size&&[...s].every((a,f)=>a==e[f]))return!0},u=oe(r,"keydown",c=>{s.add(c.code),i()&&o.current(c)}),l=oe(r,"keyup",c=>{i()&&o.current(c),s.delete(c.code)});return()=>{u(),l()}},[t])}function Ie(t,e){const[n,o]=k([]);return je(()=>{const{current:r}=t;if(!r)return;const s=()=>o(r.assignedNodes().filter(i=>!(i instanceof B)&&(e?e(i):!0)));return s(),oe(r,"slotchange",s)},[t]),n}function re({open:t,from:e,to:n,startDelay:o,endDelay:r}){const s=S(!1),i=S(),[u]=Ie(i),l=E("Leave"),c=()=>{u.animate([e,n],{duration:300,fill:"forwards",delay:o}),s.current=!0},a=async()=>{if(!s.current)return;const f=u.animate([n,e],{duration:300,fill:"forwards",delay:r});f.onfinish=()=>{s.current=!1,l()}};return w(()=>{u&&(t?c():a())},[u,t]),p("host",{shadowDom:!0,children:p("slot",{ref:i})})}re.props={open:Boolean,from:Object,to:Object,startDelay:Number,endDelay:Number},re.styles=T`:host{display:block}`;const F=C(re);customElements.define("animate-presence",F);function se({open:t=!1}){const e=S(document.documentElement),[n,o]=k(!1),r=E("Confirm"),s=E("Close");return w(()=>{t&&o(!0)},[t]),De(e,["Escape"],i=>{i.type==="keydown"||!t||s()}),P("host",{shadowDom:!0,style:{display:n?"block":"none"},children:[p(F,{from:{opacity:0},to:{opacity:.75},open:t,endDelay:300,onLeave:()=>{o(!1)},children:p("div",{class:"backdrop",onclick:s})}),p(F,{from:{opacity:0},to:{opacity:1},open:t,children:p("div",{class:"container",children:p("div",{class:"modal",children:p(ne,{onCancel:s,onConfirm:i=>r({pin:i.detail.pin})})})})})]})}se.props={open:Boolean},se.styles=T`:host{display:block;position:fixed}*,*:before,*:after{box-sizing:border-box}.backdrop{position:fixed;inset:0;z-index:50;height:100vh;background-color:#6b7280;opacity:.75}.container{overflow-y:auto;position:fixed;inset:0;z-index:50}.modal{overflow:hidden;position:absolute;z-index:50;border-top-left-radius:.75rem;border-top-right-radius:.75rem;width:100%;bottom:0}@media (min-width: 768px){.modal{border-bottom-right-radius:.75rem;border-bottom-left-radius:.75rem;max-width:20rem;bottom:auto;top:50%;left:50%;transform:translateY(-50%) translate(-50%)}}`;const ze=C(se),_t=Object.freeze(Object.defineProperty({__proto__:null,PinpadModal:ze,define:()=>{customElements.get("ptp-pinpad-modal")||customElements.define("ptp-pinpad-modal",ze)}},Symbol.toStringTag,{value:"Module"}));function ie({resettable:t,disabled:e,open:n=!0}){const o=E("Pressed"),r=E("Confirm"),s=E("Delete");return p("host",{shadowDom:!0,children:p("div",{class:N("grid-animation",n?"open":"close"),children:p("div",{style:"overflow-y: hidden;",children:p("div",{class:"container",children:p(R,{resettable:t,disabled:e,hideHelpText:!0,onPressed:i=>o({value:i.detail.value}),onConfirm:r,onDelete:s})})})})})}ie.props={open:Boolean,resettable:{type:Boolean,reflect:!0},disabled:{type:Boolean,reflect:!0}},ie.styles=T`:host{display:block;--margin-top: .5rem}*,*:before,*:after{box-sizing:border-box}.grid-animation{display:grid;transition-property:grid-template-rows;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}.grid-animation.open{grid-template-rows:1fr}.grid-animation.close{grid-template-rows:0fr}.container{background-color:#fff;padding:.5rem;border-radius:.75rem;border:1px;border-style:solid;border-color:#0000000d;margin-top:var(--margin-top)}`;const ce=C(ie),Be=Object.freeze(Object.defineProperty({__proto__:null,PinpadStatic:ce,define:()=>{customElements.get("ptp-pinpad-static")||customElements.define("ptp-pinpad-static",ce)}},Symbol.toStringTag,{value:"Module"}));function le({resettable:t,disabled:e,open:n=!1}){const o=M(),r=S(!1),[s,i]=k(!1),u=E("Pressed"),l=E("Confirm"),c=E("Delete"),a=E("Close"),f=ke(m=>{if(!o.current)return;if(m.target!==o.current&&!m.composedPath().includes(o.current)&&r.current){a(),r.current=!1;return}r.current=!0},[o,s]),d=()=>{l(),r.current=!1};return w(()=>{n&&i(!0)},[n]),w(()=>{if(n)return document.addEventListener("click",f),()=>{document.removeEventListener("click",f)}},[n,f]),p("host",{shadowDom:!0,style:{display:s?"block":"none"},children:p(F,{open:n,from:{opacity:0},to:{opacity:1},onLeave:()=>{i(!1)},children:p("div",{class:"container",children:p(ce,{open:!0,resettable:t,disabled:e,onPressed:m=>u({value:m.detail.value}),onConfirm:d,onDelete:c})})})})}le.props={open:Boolean,resettable:{type:Boolean,reflect:!0},disabled:{type:Boolean,reflect:!0}},le.styles=T`:host{display:block;position:relative}*,*:before,*:after{box-sizing:border-box}.container{position:absolute;width:15rem;z-index:50}`;const Re=C(le),Nt=Object.freeze(Object.defineProperty({__proto__:null,PinpadFloat:Re,define:()=>{customElements.get("ptp-pinpad-float")||customElements.define("ptp-pinpad-float",Re)}},Symbol.toStringTag,{value:"Module"})),Fe={es:{input:{placeholder:"Ingresa el Pin"},panel:{modal:{title:"Ingresa tu Pin",close:"Cerrar"},number:{buttons:{confirm:"Confirmar",delete:"Borrar"}}}},en:{input:{placeholder:"Enter the Pin"},panel:{modal:{title:"Enter your Pin",close:"Close"},number:{buttons:{confirm:"Confirm",delete:"Delete"}}}},pt:{input:{placeholder:"Insira o Pin"},panel:{modal:{title:"Insira seu Pin",close:"Fechar"},number:{buttons:{confirm:"Confirmar",delete:"Apagar"}}}},it:{input:{placeholder:"Inserisci il Pin"},panel:{modal:{title:"Inserisci il tuo Pin",close:"Chiudi"},number:{buttons:{confirm:"Conferma",delete:"Cancella"}}}}};function ae({locale:t="es",positions:e,length:n,mask:o,theming:r={}}){return Q(G,{locale:t,trans:s=>{const i=Fe[t.slice(0,2)]??Fe.en,u=s.split(".");let l=i[u[0]];return l===void 0?s:(u.slice(1).forEach(c=>{if(l[c]===void 0)return l=s;l=l[c]}),l)}}),Q(Me,{positions:e.split(",").map(Number),length:n,mask:o,theming:r}),p("host",{shadowDom:!0,children:p("slot",{})})}ae.props={locale:String,positions:String,length:Number,mask:String,theming:Object},ae.styles=T`:host{display:block}`;const Ue=C(ae),xt=Object.freeze(Object.defineProperty({__proto__:null,App:Ue,define:()=>{customElements.get("ptp-pinpad-context")||customElements.define("ptp-pinpad-context",Ue)}},Symbol.toStringTag,{value:"Module"})),He=(t,e)=>e?`${t}: ${e};`:!1;function de({pin:t="",mode:e}){const n=S(),o=S(),[r]=Ie(o),[s,i]=k(t),{length:u,theming:l}=W(),c=Z(),a=b=>{i(h=>h.length>=u?h:h+b.detail.value)},f=ke(b=>{e!=="modal"&&s.length<u||(e==="modal"&&i(b.detail.pin),y())},[r,s,u,e]),d=()=>{i(b=>b.slice(0,-1))},m=()=>{r.setAttribute("open",!0)},y=()=>{r.setAttribute("open",!1)};return w(()=>{if(r&&e!=="modal")return r.addEventListener("Pressed",a),r.addEventListener("Delete",d),()=>{r.removeEventListener("Pressed",a),r.removeEventListener("Delete",d)}},[r,e]),w(()=>{if(r&&!(e!=="modal"&&e!=="float"))return r.addEventListener("Close",y),()=>{r.removeEventListener("Close",y)}},[r,e]),w(()=>{if(r)return r.addEventListener("Confirm",f),()=>{r.removeEventListener("Confirm",f)}},[r,f]),w(()=>{!r||e==="modal"||(r.setAttribute("disabled",s.length===u),r.setAttribute("resettable",!!s.length))},[s,e,r]),De(n,["Space"],b=>{b.type==="keyup"&&m()}),p("host",{shadowDom:!0,style:N(He("--input-border-color-focus",l?.inputBorderColorFocus),He("--input-border-color-focus-shadow",l?.inputOutlineColorFocus)),children:P("div",{class:"container",children:[p("div",{class:"input-container",onclick:m,children:p("input",{ref:n,id:"pin",name:"pin",type:"password",value:s,maxLength:u,minLength:u,class:N("input",e),readOnly:!0,placeholder:c("input.placeholder")})}),p("slot",{ref:o})]})})}de.props={pin:String,mode:String},de.styles=T`:host{font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";display:block;--input-border-color-focus: rgba(17, 24, 39, 1);--input-border-color-focus-shadow: rgba(209, 213, 219, 1)}*,*:before,*:after{box-sizing:border-box}.container{max-width:300px}.input-container{cursor:text}.input{width:100%;padding:.5rem .75rem;border-radius:8px;border:1px rgba(209,213,219,1) solid;font-size:1rem;line-height:1.5rem;font-weight:400;background-color:#fff}.input:focus,.input:focus-visible,.input:focus-within{outline:none;border-color:var(--input-border-color-focus);box-shadow:0 0 0 3px var(--input-border-color-focus-shadow)}.input:invalid{border-color:#ef4444;box-shadow:0 0 0 3px #ffd4d4}.input:disabled{color:#f9fafb;background-color:#d1d5db}.input.static{pointer-events:none}`;const Ye=C(de),At=Object.freeze(Object.defineProperty({__proto__:null,Pinpad:Ye,define:()=>{customElements.get("ptp-pinpad")||customElements.define("ptp-pinpad",Ye)}},Symbol.toStringTag,{value:"Module"}));_.PinPad=Je,_.PinPadClient=Ke,Object.defineProperty(_,Symbol.toStringTag,{value:"Module"})});
