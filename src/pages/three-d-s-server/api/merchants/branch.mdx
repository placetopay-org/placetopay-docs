export const sectionMode = 'nav';

export const description =
  'En esta página, exploraremos el punto final que te permite agregar sucursales a un comercio existente.';

export const apiRefs = ['/api/v1/merchants/{merchantID}/branches', '/api/v2/merchants/{merchant}/branches/{branch}'];

# API Sucursales

## Agregar sucursales a un comercio {{ id: 'add-branches', tag: 'POST', label: '/api/{version}/merchants/merchantID/branches' }}

<Row>
  <Col>
    Este endpoint te permite agregar una o más sucursales a un comercio existente.

    <ApiReader
      path="/api/v1/merchants/{merchantID}/branches"
      method="post"
      api={props.refs}
    />
  </Col>
  <Col sticky>
    <CodeGroup title="Solicitud" tag="POST" label="/api/{version}/merchants/{merchantID}/branches">
    ```bash {{ title: 'V1' }}
    curl -X "POST" https://3dss-test.placetopay.com/api/v1/merchants/{merchantID}/branches \
      -H "Content-Type: application/json" \
      -H "Accept: application/json" \
      -H "Authorization: Bearer ACCESS_TOKEN" \
      -d '{
          "branches": [
            {
              "name": "Oficina Medellin",
              "brand": "Evertec Medellin",
              "country": "COL",
              "currency": "COP",
              "url": "https://example-uno.com"
            },
            {
              "name": "Oficina Bogotá",
              "brand": "Evertec Bogotá",
              "country": "COL",
              "currency": "COP",
              "url": "https://example-dos.com"
              "enabled": true,
              "subscriptions": [
                  {
                      "franchise": "visa",
                      "acquirerBIN": "454819",
                      "version": 2,
                      "merchantCode": "1234"
                  },
                  {
                      "franchise": "mastercard",
                      "acquirerBIN": "510510",
                      "version": 2,
                      "merchantCode": "3064"
                  }
              ]
            }
          ]
      }'
    ```

    ```bash {{ title: 'V2' }}
    curl -X "POST" https://3dss-test.placetopay.com/api/v2/merchants/{merchantID}/branches \
      -H "Content-Type: application/json" \
      -H "Accept: application/json" \
      -H "Authorization: Bearer ACCESS_TOKEN" \
      -d '{
              "branches": [
                {
                  "name": "Oficina Medellin",
                  "brand": "Evertec Medellin",
                  "country": "COL",
                  "currency": "COP",
                  "url": "https://example-uno.com",
                  "createToken": true,
                },
                {
                  "name": "Oficina Bogotá",
                  "brand": "Evertec Bogotá",
                  "country": "COL",
                  "currency": "COP",
                  "url": "https://example-dos.com"
                  "enabled": true,
                  "createToken": true,
                  "subscriptions": [
                      {
                          "franchise": "visa",
                          "acquirerBIN": "454819",
                          "version": 2,
                          "merchantCode": "1234"
                      },
                      {
                          "franchise": "mastercard",
                          "acquirerBIN": "510510",
                          "version": 2,
                          "merchantCode": "3064"
                      }
                  ]
                }
              ]
      }'
    ```
    </CodeGroup>
  </Col>
</Row>

<Row>
  <Col>
    <ApiReader
      path="/api/v1/merchants/{merchantID}/branches"
      method="post"
      type="response"
      api={props.refs}
    />
  </Col>

  <Col sticky>
    <br />
    <CodeGroup title="Respuesta">
    ```json {{ title: '200 (V1)' }}
    {
      "status": {
        "code": 1000
      },
      "data": [
        {
          "id": 1,
          "name": "Oficina Ciudad A",
          "brand": "Compañía Ciudad A",
          "url": "https://company-a.com"
        },
        {
          "id": 2,
          "name": "Oficina Ciudad B",
          "brand": "Compañía Ciudad B",
          "url": "https://company-b.com",
          "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9...",
          "expires_at": "2026-04-28 14:12:46"
        }
      ]
    }
    ```
    ```json {{ title: '200 (V2)' }}
    {
      "status": {
          "status": "OK",
          "reason": "00",
          "message": "The request has been successfully processed",
          "date": "2025-12-10T22:36:18+00:00"
      },
      "branches": [
        {
          "id": 1,
          "name": "Oficina Ciudad A",
          "brand": "Compañía Ciudad A",
          "url": "https://company-a.com",
          "token": {
            "accessToken":"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9...",
            "expiresAt": "2028-12-09T20:46:20+00:00",
          }
        },
        {
          "id": 2,
          "name": "Oficina Ciudad B",
          "brand": "Compañía Ciudad B",
          "url": "https://company-b.com",
          "token": {
              "accessToken":"eV19eyJhdWQiOiIxIiwianRpIjoiMWIyNjgk867nh...",
              "expiresAt": "2028-12-09T20:46:20+00:00",
          }
        }
      ]
    }
    ```
    ```json {{ title: '401 (V1)' }}
    {
      "message": "Unauthenticated."
    }
    ```
    ```json {{ title: '401 (V2)' }}
    {
        "status": {
            "status": "FAILED",
            "reason": "BR",
            "message": "Unauthenticated.",
            "date": "2025-12-09T20:58:15+00:00"
        }
    }
    ```
    ```json {{ title: '404 (V1)' }}
    {
      "status": {
        "code": 1010,
        "error": "The merchant does not exist"
      }
    }
    ```
   ```json {{ title: '404 (V2)' }}
    {
        "status": {
            "status": "FAILED",
            "reason": "BR",
            "message": "The merchant does not exist",
            "date": "2025-12-09T21:00:42+00:00"
        }
    }
    ```
    ```json {{ title: '422 (V1)' }}
    {
      "status": {
        "code": 1001,
        "error": "The branches.0.name field is required."
      }
    }
    ```
    ```json {{ title: '422 (V2)' }}
    {
        "status": {
            "status": "FAILED",
            "reason": "BR",
            "message": "The branches.0.name field is required.",
            "date": "2025-12-09T21:00:42+00:00"
        }
    }
    ```
    </CodeGroup>
  </Col>
</Row>

<br />
## Eliminar una sucursal de un comercio {{ id: 'delete-a-merchant', tag: 'DELETE', label: '/api/v2/merchants/{merchant}/branches/{branch}' }}

Para poder eliminar una sucursal, esta no debe tener transacciones asociadas. Si se cumple esta condición, se eliminarán la sucursal, así como sus suscripciones y tokens asociados.

<Row>
  <Col>
      <ApiReader
        path="/api/v2/merchants/{merchant}/branches/{branch}"
        method="DELETE"
        api={props.refs}
      />
  </Col>
  <Col sticky>

    <br />
    <CodeGroup title="Solicitud" tag="DELETE" label="/api/v2/merchants/{merchant}/branches/{branch}">
    ```bash {{ title: 'cURL' }}
    curl -X "POST" https://3dss-test.placetopay.com/api/v2/merchants/{merchant}/branches/{branch} \
      -H "Content-Type: application/json" \
      -H "Accept: application/json" \
      -H "Authorization: Bearer ACCESS_TOKEN" \
    ```
    </CodeGroup>
  </Col>
</Row>

<Row>
  <Col>
    <ApiReader
      path="/api/v2/merchants/{merchant}/branches/{branch}"
      method="DELETE"
      type="response"
      api={props.refs}
    />
  </Col>

  <Col sticky>
    <br />
    <CodeGroup title="Respuesta">
    ```json {{ title: '200' }}
    {
      "status": {
        "status": "OK",
        "reason": "00",
        "message": "The request has been successfully processed",
        "date": "2025-12-22T22:38:45+00:00"
      }
    }
    ```
    ```json {{ title: '401' }}
    {
      "status": {
        "status": "FAILED",
        "reason": "BR",
        "message": "Unauthenticated.",
        "date": "2025-12-22T21:43:12+00:00"
      }
    }
    ```
    ```json {{ title: '412' }}
    {
      "status": {
        "status": "FAILED",
        "reason": "BR",
        "message": "Error processing request, check the data and try again",
        "date": "2025-12-22T22:44:50+00:00"
      }
    }
    ```
    </CodeGroup>
  </Col>
</Row>
