# Model Enrollment

<Note type='warning'>En desuso desde el 29 de Septiembre por solicitud de Mastercard en boletín: AN11171</Note>

Las APIs de **Model Enrollment** están diseñadas para gestionar el enrolamiento de modelos en las marcas soportadas,
facilitando operaciones como la creación, actualización y eliminación de registros relacionados.

Actualmente, estas APIs están habilitadas exclusivamente para **Mastercard**,
permitiendo integrar y gestionar modelos de manera eficiente dentro de su ecosistema.

Estas APIs proporcionan una interfaz clara y estructurada para interactuar con los datos de enrolamiento,
asegurando que los procesos sean seguros y estén alineados con los estándares de la compañia.

---

#### **Funciones principales:**
1. **Creación de modelos**: Registrar un nuevo modelo en el sistema utilizando el endpoint `POST /api/model-enrollment`.
2. **Actualización de modelos**: Modificar los detalles de un modelo existente mediante el endpoint `PATCH /api/model-enrollment`.
3. **Eliminación de modelos**: Eliminar registros de modelos obsoletos utilizando el endpoint `DELETE /api/model-enrollment`.

---


### POST `/api/model-enrollment`

Este endpoint permite enrolar un nuevo modelo en una marca. Actualmente, el servicio está disponible exclusivamente para **Mastercard**.

---

#### **Request**

```json
{
    "subscription_id": "349"
}

```

| Campo               | Tipo     | Descripción                                    |
|---------------------|----------|------------------------------------------------|
| **subscription_id** | `string` | ID de la suscripción asociada al nuevo modelo. |

---

```json

{
    "message": "Model enrollment",
    "data": {
        "mastercard": {
            "uuid": "692b1ce4-7979-4b62-9bab-bda8ad8aa64b",
            "messageType": "MerchantStatusResponse",
            "data": {
                "acquirerBIN": "510510",
                "acquirerICA": "16233",
                "acquirerName": "First Technology Federal Credit Union",
                "acquirerCID": "139423",
                "status": "SUCCESS",
                "reason": "New Record Data",
                "modelId": "123",
                "modelName": "Test Merchant"
            }
        }
    }
}

```


| Campo                                 | Tipo     | Descripción                                                         |
|---------------------------------------|----------|---------------------------------------------------------------------|
| **message**                           | `string` | Mensaje que confirma el enrolamiento del modelo.                    |
| **data**                              | `object` | Datos relacionados con el modelo enrolado.                          |
| **mastercard**                        | `object` | Datos relacionados con la marca.                                    |
| **data.mastercard.uuid**                         | `string` | Identificador único del modelo enrolado.                            |
| **data.mastercard.messageType**                  | `string` | Tipo de mensaje relacionado con el estado del modelo.               |
| **data.mastercard.data**              | `object` | Detalles adicionales relacionados con el modelo.                    |
| **data.mastercard.data.acquirerBIN**  | `string` | Número de identificación del adquirente.                            |
| **data.mastercard.data.acquirerICA**  | `string` | Código de institución del adquirente.                               |
| **data.mastercard.data.acquirerName** | `string` | Nombre del adquirente.                                              |
| **data.mastercard.data.acquirerCID**  | `string` | Identificador del cliente del adquirente.                           |
| **data.mastercard.data.status**       | `string` | Estado detallado de la operación (`SUCCESS`, `REJECTED`, `FAILED`). |
| **data.mastercard.data.reason**       | `string` | Razón relacionada con la operación realizada.                       |
| **data.mastercard.data.modelId**      | `string` | Identificador del modelo enrolado.                                  |
| **data.mastercard.data.modelName**    | `string` | Nombre del modelo enrolado.                                         |


### PATCH `/api/model-enrollment`

Este endpoint permite recuperar los datos en la marca asociada y actualizar el modelo enrolado. Actualmente, el servicio está disponible exclusivamente para **Mastercard**.

---

#### **Request**

```json
{
  "uuid": "692b1ce4-7979-4b62-9bab-bda8ad8aa64b",
  "subscription_id": "349"
}

```

Campos de la solicitud:

| Campo               | Tipo     | Descripción                                               |
|---------------------|----------|-----------------------------------------------------------|
| **uuid**            | `string` | Identificador único del registro que se desea actualizar. |
| **subscription_id** | `string` | ID de la suscripción asociada al registro.                |


#### **Response**

```json
{
  "message": "Model updated",
  "data": {
     "mastercard": {
        "uuid": "692b1ce4-7979-4b62-9bab-bda8ad8aa64b",
        "messageType": "MerchantStatusResponse",
        "data": {
           "acquirerBIN": "510510",
           "acquirerICA": "16233",
           "acquirerName": "First Technology Federal Credit Union",
           "acquirerCID": "139423",
           "status": "SUCCESS",
           "reason": "New Record Data",
           "modelId": "123",
           "modelName": "Test Merchant"
        }
    }
  }
}

```

| Campo                                 | Tipo     | Descripción                                                         |
|---------------------------------------|----------|---------------------------------------------------------------------|
| **message**                           | `string` | Mensaje que confirma la actualización del modelo.                   |
| **data**                              | `object` | Datos actualizados relacionados con el modelo.                      |
| **mastercard**                        | `object` | Datos relacionados con la marca.                                    |
| **data.mastercard.uuid**              | `string` | Identificador único del registro actualizado.                       |
| **data.mastercard.messageType**       | `string` | Tipo de mensaje relacionado con el estado del modelo.               |
| **data.mastercard.data**              | `object` | Detalles adicionales relacionados con el modelo.                    |
| **data.mastercard.data.acquirerBIN**  | `string` | Número de identificación del adquirente.                            |
| **data.mastercard.data.acquirerICA**  | `string` | Código de institución del adquirente.                               |
| **data.mastercard.data.acquirerName** | `string` | Nombre del adquirente.                                              |
| **data.mastercard.data.acquirerCID**  | `string` | Identificador del cliente del adquirente.                           |
| **data.mastercard.data.status**       | `string` | Estado detallado de la operación (`SUCCESS`, `REJECTED`, `FAILED`). |
| **data.mastercard.data.reason**       | `string` | Razón relacionada con la operación realizada.                       |
| **data.mastercard.data.modelId**      | `string` | Identificador del modelo actualizado.                               |
| **data.mastercard.data.modelName**    | `string` | Nombre del modelo actualizado.                                      |


---

### DELETE `/api/model-enrollment`

Este endpoint permite gestionar el enrolamiento de modelos en una marca. Actualmente, el servicio está disponible exclusivamente para **Mastercard**.

---

#### **Request**

```json

{
  "reason": "DATA_ENTRY_ERROR",
  "subscription_id": "349",
  "uuid": "692b1ce4-7979-4b62-9bab-bda8ad8aa64b"
}

```

| Campo               | Tipo     | Descripción                                                   |
|---------------------|----------|---------------------------------------------------------------|
| **reason**          | `string` | Razón para eliminar el registro. Ejemplo: `DATA_ENTRY_ERROR`. |
| **subscription_id** | `string` | ID de la suscripción asociada al registro.                    |
| **uuid**            | `string` | Identificador único del registro que se desea eliminar.       |


#### **Response**

```json

{
    "message": "The record was successfully deleted"
}

```
