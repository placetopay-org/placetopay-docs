export const sectionMode = 'nav';

In this section, various use cases will be presented to illustrate the applicability of 3RI in different scenarios, ranging from online payments to card authentication and management.

Each use case will highlight how 3RI can address specific security and efficiency challenges. Through concrete examples, you will gain a deeper understanding of how to implement this service and how it can contribute to greater fraud protection and the creation of a trustworthy digital environment.

See more details in [Supported 3RI Message Types](/en/three-d-s-server/api/terms-and-definitions#supported-3-ri-message-types)

<Note>
    DAF is not required for 3RI processing. However, its use is optional and recommended to improve authentication success rates.
</Note>

## Recurring Payments

A recurring transaction is one in which a periodic charge is made to the cardholder on a scheduled basis. These transactions are common in subscription services, such as memberships, streaming service subscriptions, recurring bill payments, etc.

`POST` https://3dss-dev.placetopay.ws/api/threeds/v2x/sessions

***Use Cases:***

* **Digital service subscriptions:** For example, a monthly subscription to a video streaming platform.
* **Recurring bill payments:** Such as monthly payments for utilities, insurance payments, or loan payments.
* **Membership renewals:** For example, automatic renewal of gym or club memberships.

<Note>
    For VISA, the recurring payment flow is available through the [DAF](/en/three-d-s-server/api/integration/session-d-a-f), which is optional.
</Note>

**First Authentication**

Before making a 3RI request, an EMV 3DS authentication must have been performed where the cardholder is available to authenticate.

### MASTERCARD

***Request Lookup***

```json
{
  "deviceChannel": "BRW",
  "threeDSAuthenticationInd": "RECURRING_TRANSACTION",
  "threeDSChallengeInd": "CHALLENGE_REQUESTED_MANDATE",
  "recurringExpiry": "20250101",
  "recurringFrequency": "2",
  "purchaseInstalData": "2",
  "acctNumber": "5107000000010018",
  "cardExpiryDate": "2902",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseAmount": "10",
  "purchaseCurrency": "USD",
  "reference": "Enero 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** BRW (02)

**threeDSAuthenticationInd:** RECURRING_TRANSACTION (02), indicates that the transaction is a recurrence

**threeDSChallengeInd:** CHALLENGE_REQUESTED_MANDATE (04), the challenge is mandatory

**recurringExpiry:** end date of the subscription

**recurringFrequency:** indicates the number of days between authorizations

**purchaseInstalData:** Indicates the maximum number of authorizations allowed for installment payments.

***Response Lookup***

```json
{
    "action": "redirect",
    "sessionToken": "398864c1e4c8217283b67f0312a2d8ee14e3814c0e000a92d4532bc406f65d2f",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86036/398864c1e4c8217283b67f0312a2d8ee14e3814c0e000a92d4532bc406f65d2f",
    "transactionID": 248002
}
```

**Action:** `redirect` indicates that the API will return a `redirectURL`, which must be used to continue the flow.


### VISA

<Note>
    For Visa, the split payment flow is available through the [DAF](/en/three-d-s-server/api/integration/session-d-a-f) starting from April 2024. For more details about VISA [DAF](/en/three-d-s-server/api/integration/session-d-a-f), which is optional for 3RI flows, please consult the documentation.
</Note>

**Prerequisites:**

1. The **Visa Merchant ID (VMID)** must be available in the subscription.
2. The card range must support processing with [DAF](/en/three-d-s-server/api/integration/session-d-a-f)

Required data in the API request

**[DAF](/en/three-d-s-server/api/integration/session-d-a-f) Data:** The additional keys that must be sent for DAF to be applied with VISA are the following:

* billAddrCity
* billAddrCountry
* billAddrLine1
* billAddrPostCode
* billAddrState
* email
* mobilePhone

***Request Lookup***

```json
{
  "deviceChannel": "BRW",
  "threeDSAuthenticationInd": "RECURRING_TRANSACTION",
  "threeDSChallengeInd": "CHALLENGE_REQUESTED_MANDATE",
  "recurringExpiry": "20260101",
  "recurringFrequency": "2",
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "1.02",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "Enero 2024",
  "billAddrCity": "Medellín",
  "billAddrCountry": "COL",
  "billAddrLine1": "Carrera 65 # 45 - 20",
  "billAddrPostCode": "050004",
  "billAddrState": "ANT",
  "email": "john.doe@evertecinc.com",
  "mobilePhone": {
      "cc": "57",
      "subscriber": "30011122333"
  },
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** BRW (02)

**threeDSAuthenticationInd:** RECURRING_TRANSACTION (02), indicates that the transaction is recurring

**threeDSChallengeInd:** CHALLENGE_REQUESTED_MANDATE (04), the challenge is mandatory

**recurringExpiry:** end date of the subscription

**recurringFrequency:** indicates the number of days between authorizations

**[DAF](/en/three-d-s-server/api/integration/session-d-a-f) Data:** The additional keys that must be sent for DAF to be applied with VISA are the following:

* billAddrCity
* billAddrCountry
* billAddrLine1
* billAddrPostCode
* billAddrState
* email
* mobilePhone


***Response  Lookup***

```json
{
    "action": "redirect",
    "sessionToken": "c56d238b35d23b8cf564f2b6b641ed0e8a3056fb639d9df245d4bec825e4b74a",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86039/c56d238b35d23b8cf564f2b6b641ed0e8a3056fb639d9df245d4bec825e4b74a",
    "transactionID": 248005
}
```

**Action:** `redirect` indicates that the API will return a `redirectURL`, which must be used to continue the flow.

**Subsequent Authentications**

Send a 3RI request using the recurrence value.

### MASTERCARD

***Request Lookup***

```json
{
  "deviceChannel": "RI",
  "threeRIInd": "RECURRING_TRANSACTION",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-09T19:48:20+00:00",
    "threeDSReqPriorRef": "fa4544ea-9002-444a-a891-5fd126735c41"
  },
  "acctNumber": "5107000000010018",
  "cardExpiryDate": "2902",
  "purchaseAmount": "5",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "February 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03), indicates that the channel is RI

**threeRIInd:** RECURRING_TRANSACTION (01) indicates that the transaction is recurring

**threeDSReqPriorAuthMethod:** Method used by the cardholder for authentication.

- FRICTIONLESS_AUTHENTICATION (01), frictionless
- CARDHOLDER_CHALLENGE_OCCURRED (02), with challenge, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorAuthTimestamp:** Date and time in UTC format of the previous authentication. The format is C, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorRef:** The ID granted by the ACS in the previous transaction ***first authentication***, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorAuthData:** The ID granted by the DS in the previous transaction ***first authentication***, if this data is not sent, 3DSS assigns it, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

***Response  Lookup***

```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "2e6bd601-7a61-4fa5-accc-10a30e0d66db",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539",
    "acsTransID": "80fb86d5-35e7-4249-b6df-6905d9c6ba4f",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "3a961497-8ac7-447d-9926-06bf4c1fa1a9",
    "messageVersion": "2.2.0",
    "acsOperatorID": "ACS-V210-ACS-PLACETOPAY-11174",
    "authenticationValue": "xgQiqOYmAAAAAAAAAAAAAAAAAAA=",
    "eci": "07",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "RI",
    "messageCategory": "PA",
    "authMethod": "FRICTIONLESS_AUTHENTICATION",
    "authTimestamp": "2024-09-09T19:52:20+00:00",
    "transactionID": 248003
}
```

**Action:** `continue` indicates that the API will return the authentication information, and therefore it is not necessary to consume additional endpoints to continue the flow.


### VISA

<Note>
    Para Visa está disponible el flujo de pago dividido a través del [DAF](/en/three-d-s-server/api/integration/session-d-a-f) a partir de Abríl de 2024. Consultar para más detalle sobre VISA [DAF](/three-d-s-server/api/integration/session-d-a-f), el cual es opcional para los flujos de 3RI
</Note>

**Prerrequisitos:**

1. El identificador de comercio de **Visa Merchant ID VMID** deberá estar disponible en la subscripción.
2. El rango de tarjetas debe soportar el procesamiento con [DAF](/en/three-d-s-server/api/integration/session-d-a-f)

Datos requeridos en la petición API

**Datos [DAF](/en/three-d-s-server/api/integration/session-d-a-f):** las llaves adicionales que se deberán enviar para que se aplique el [DAF](/en/three-d-s-server/api/integration/session-d-a-f) con VISA son los siguientes

* billAddrCity
* billAddrCountry
* billAddrLine1
* billAddrPostCode
* billAddrState
* email
* mobilePhone

***Request Lookup***

```json
{
  "deviceChannel": "RI",
  "threeRIInd": "RECURRING_TRANSACTION",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-09T20:06:30+00:00",
    "threeDSReqPriorRef": "3b632ce4-26ea-407d-a2a0-4a7b27c91c14"
  },
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "1.00",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "February 2024",
  "billAddrCity": "Medellín",
  "billAddrCountry": "COL",
  "billAddrLine1": "Carrera 65 # 45 - 20",
  "billAddrPostCode": "050004",
  "billAddrState": "ANT",
  "email": "john.doe@evertecinc.com",
  "mobilePhone": {
      "cc": "57",
      "subscriber": "30011122333"
  },
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03) indicates that the channel is RI

**threeRIInd:** RECURRING_TRANSACTION (01) indicates that the transaction is recurring

**threeDSReqPriorAuthMethod:** Method used by the cardholder for authentication.

- FRICTIONLESS_AUTHENTICATION (01), frictionless
- CARDHOLDER_CHALLENGE_OCCURRED (02), with challenge, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorAuthTimestamp:** Date and time in UTC format of the previous authentication. The format is C, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorRef:** The ID granted by the ACS in the previous transaction **first authentication**, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorAuthData:** The ID granted by the DS in the previous transaction ***first authentication***, if this data is not sent, 3DSS assigns it, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**[DAF](/en/three-d-s-server/api/integration/session-d-a-f) Data:** The additional keys that must be sent for [DAF](/en/three-d-s-server/api/integration/session-d-a-f) to be applied with VISA are the following:

* billAddrCity
* billAddrCountry
* billAddrLine1
* billAddrPostCode
* billAddrState
* email
* mobilePhone

***Response Lookup***

```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "0e0ee43c-9601-4e29-9c8d-32b893ded4db",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539V3",
    "acsTransID": "ab8b1aec-2cf9-4d60-a45f-8d499894dae5",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "072b329b-ca7f-47ff-a6b0-ff5a3d6321cb",
    "messageVersion": "2.2.0",
    "acsOperatorID": "10078025",
    "authenticationValue": "BpkCBIU4VgAAAABkhAJTdYknEmE=",
    "eci": "05",
    "messageExtension": [
        {
            "name": "DAF Extension",
            "id": "A000000003-003",
            "criticalityIndicator": false,
            "data": {
                "chAccReqID": "MUHZx0nojuVVAZJwPD4CWps0RuxUPxepI8sk57Yd/s4=",
                "authPayProcessReqInd": "01",
                "version": "1.0",
                "authPayCredStatus": "Y",
                "dafAdvice": "01"
            }
        }
    ],
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "RI",
    "messageCategory": "PA",
    "authMethod": "FRICTIONLESS_AUTHENTICATION",
    "authTimestamp": "2024-09-09T20:52:36+00:00",
    "transactionID": 248013
}
```

**Action:** `continue` indicates that the API will return the authentication information, and therefore it is not necessary to consume additional endpoints to continue the flow.

---

## Installment Payments

An installment transaction is one in which the total purchase amount is divided into smaller periodic payments over a set period of time. These payments may include interest or other fees associated with financing the purchase.

Unlike a recurring transaction, in an installment transaction, the cardholder makes a single purchase that is divided into several payments, instead of authorizing multiple separate charges. Each payment may require individual authorization, but the cardholder does not need to authorize future payments when making the initial purchase. Additionally, the installment purchase has a limit on the number of authorizations (***purchaseInstalData***) and ***recurringExpiry***, and the amounts are cumulative. The recurrence is limited by the recurringExpiry date and the amount is always the same, or at least that is the maximum.

<Note>
    When authentication is performed with recurrence/installment payment, it is understood that the cardholder agrees to have their card number stored.
</Note>

`POST` https://3dss-dev.placetopay.ws/api/threeds/v2x/sessions

***Use Cases:***

* **Online installment purchases:** For example, buying an item such as a computer and splitting the payment into monthly installments.
* **Financing products or services:** Such as buying home furniture, electronics, or medical services that offer installment financing options.
* **Vacation payment plans:** Travel agencies that offer the option to pay for vacations in several payments before the travel date.

<Note>
    For VISA, the installment payment flow is available through [DAF](/en/three-d-s-server/api/integration/session-d-a-f)
</Note>

**First Authentication**

Before making a 3RI request, an EMV 3DS authentication must have been performed where the cardholder is available to authenticate.

### MASTERCARD

***Request Lookup***

```json
{
  "deviceChannel": "BRW",
  "threeDSAuthenticationInd": "INSTALMENT_TRANSACTION",
  "threeDSChallengeInd": "CHALLENGE_REQUESTED_MANDATE",
  "recurringExpiry": "20250101",
  "recurringFrequency": "2",
  "purchaseInstalData": "2",
  "acctNumber": "5107000000010018",
  "cardExpiryDate": "2902",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseAmount": "1000",
  "purchaseCurrency": "USD",
  "reference": "January 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** BRW (02)

**threeDSAuthenticationInd:** INSTALMENT_TRANSACTION (03) indicates that the transaction is an installment

**threeDSChallengeInd:** CHALLENGE_REQUESTED_MANDATE (04), the challenge is mandatory

**recurringExpiry:** End date of the subscription

**recurringFrequency:** Indicates the number of days between authorizations

**purchaseInstalData:** Indicates the maximum number of authorizations allowed for installment payments.

***Response Lookup***

```json
{
    "action": "redirect",
    "sessionToken": "d6aa0439b5f0e29e6a9413321962cf962593130717098cbcde322b6bb50808fb",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86048/d6aa0439b5f0e29e6a9413321962cf962593130717098cbcde322b6bb50808fb",
    "transactionID": 248014
}
```

**Action:** `redirect` indicates that the API will return a `redirectURL` that must be used to continue the flow.


### VISA

***Request Lookup***

```json
{
  "deviceChannel": "BRW",
  "threeDSAuthenticationInd": "INSTALMENT_TRANSACTION",
  "threeDSChallengeInd": "CHALLENGE_REQUESTED_MANDATE",
  "recurringExpiry": "20260101",
  "recurringFrequency": "2",
  "purchaseInstalData": "2",
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "1000",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "Enero 2024",
  "billAddrCity": "Medellín",
  "billAddrCountry": "COL",
  "billAddrLine1": "Carrera 65 # 45 - 20",
  "billAddrPostCode": "050004",
  "billAddrState": "ANT",
  "email": "john.doe@evertecinc.com",
  "mobilePhone": {
      "cc": "57",
      "subscriber": "30011122333"
  },
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** BRW (02)

**threeDSAuthenticationInd:** INSTALMENT_TRANSACTION (03) indicates that the transaction is an installment

**threeDSChallengeInd:** CHALLENGE_REQUESTED_MANDATE (04), the challenge is mandatory

**recurringExpiry:** End date of the subscription

**recurringFrequency:** Indicates the number of days between authorizations

**[DAF](/en/three-d-s-server/api/integration/session-d-a-f) Data:** The additional keys that must be sent for [DAF](/en/three-d-s-server/api/integration/session-d-a-f) to be applied with VISA are the following:

* billAddrCity
* billAddrCountry
* billAddrLine1
* billAddrPostCode
* billAddrState
* email
* mobilePhone

***Response Lookup***

```json
{
    "action": "redirect",
    "sessionToken": "96c03fe78346d11024057dfccbc8eed58b736de36631c8ff25e5c154386ade1f",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86104/96c03fe78346d11024057dfccbc8eed58b736de36631c8ff25e5c154386ade1f",
    "transactionID": 248070
}
```

**Action:** `redirect` indicates that the API will return a `redirectURL` that must be used to continue the flow.


**Autenticaciones posteriores**

Envíe una solicitud 3RI por el valor del pago a plazos

### MASTERCARD

***Request Lookup***

```json
{
  "deviceChannel": "RI",
  "threeRIInd": "INSTALMENT_TRANSACTION",
  "recurringExpiry": "20250101",
  "recurringFrequency": "2",
  "purchaseInstalData": "2",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T16:12:47+00:00",
    "threeDSReqPriorRef": "51bbcd10-0c31-4efc-ad49-ba9bdea2f413"
  },
  "acctNumber": "5107000000010018",
  "cardExpiryDate": "2902",
  "purchaseAmount": "500",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "Febrero 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03), indica que el canal es RI

**threeRIInd:** INSTALMENT_TRANSACTION (02), indica que la transacción es a plazos

**threeDSReqPriorAuthMethod:** Método que fue usado por el tarjetahabiente para la autenticación.
- FRICTIONLESS_AUTHENTICATION (01) sin fricción,
- CARDHOLDER_CHALLENGE_OCCURRED (02), con fricción, consultar la sesión Obtener los datos del threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorAuthTimestamp:** Fecha y hora en formato UTC de la autenticación previa. El formato es C, consultar la sesión Obtener los datos del threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorRef:** El ID otorgado por el ACS en la transacción previa ***primera autenticación***, consultar la sesión Obtener los datos del threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorAuthData:** El ID otorgado por el DS en la transacción previa ***primera autenticación***, si este dato no es enviado 3DSS lo asigna, consultar la sesión Obtener los datos del threeDSRequestorPriorAuthenticationInfo

***Response  Lookup***


```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "f5e8b9c4-5cfd-461d-9115-e51fe7d5c42a",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539",
    "acsTransID": "98d5739a-c623-4512-9f87-a48368848d44",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "def67c44-653a-4879-b500-935d8429b4a4",
    "messageVersion": "2.2.0",
    "acsOperatorID": "ACS-V210-ACS-PLACETOPAY-11174",
    "authenticationValue": "xgRKM8pzAAAAAAAAAAAAAAAAAAA=",
    "eci": "07",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "RI",
    "messageCategory": "PA",
    "authMethod": "FRICTIONLESS_AUTHENTICATION",
    "authTimestamp": "2024-09-10T16:16:19+00:00",
    "transactionID": 248067
}
```

**Actión:** continue indica que la API retornara la información de la autenticación, y por ende no es necesario consumir endpoints adicionales para continuar con el flujo

### VISA

<Note>
    Para Visa está disponible el flujo de pago dividido a través del [DAF](/en/three-d-s-server/api/integration/session-d-a-f) a partir de Abríl de 2024. Consultar para más detalle sobre VISA [DAF](/en/three-d-s-server/api/integration/session-d-a-f), el cual es opcional para los flujos de 3RI
</Note>

**Prerrequisitos:**

1. El identificador de comercio de **Visa Merchant ID VMID** deberá estar disponible en la subscripción.
2. El rango de tarjetas debe soportar el procesamiento con [DAF](/en/three-d-s-server/api/integration/session-d-a-f)

Datos requeridos en la petición API

**Datos [DAF](/en/three-d-s-server/api/integration/session-d-a-f):** las llaves adicionales que se deberán enviar para que se aplique el [DAF](/en/three-d-s-server/api/integration/session-d-a-f) con VISA son los siguientes

* billAddrCity
* billAddrCountry
* billAddrLine1
* billAddrPostCode
* billAddrState
* email
* mobilePhone

***Request Lookup***

```json
{
  "deviceChannel": "RI",
  "threeRIInd": "INSTALMENT_TRANSACTION",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T16:35:31+00:00",
    "threeDSReqPriorRef": "f0bb9172-018d-42ae-b2ad-715e274bddef"
  },
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "500",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "Febrero 2024",
  "billAddrCity": "Medellín",
  "billAddrCountry": "COL",
  "billAddrLine1": "Carrera 65 # 45 - 20",
  "billAddrPostCode": "050004",
  "billAddrState": "ANT",
  "email": "john.doe@evertecinc.com",
  "mobilePhone": {
      "cc": "57",
      "subscriber": "30011122333"
  },
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03) indica que el canal es RI

**threeRIInd:** INSTALMENT_TRANSACTION (02) indica que la transacción es a plazos

**threeDSReqPriorAuthMethod:** Método que fue usado por el tarjetahabiente para la autenticación.

- FRICTIONLESS_AUTHENTICATION (01), sin fricción,
- CARDHOLDER_CHALLENGE_OCCURRED (02), con fricción, consultar la sesión Obtener los datos del threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorAuthTimestamp:** Fecha y hora en formato UTC de la autenticación previa. El formato es C, consultar la sesión Obtener los datos del threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorRef:** El ID otorgado por el ACS en la transacción previa ***primera autenticación***, consultar la sesión Obtener los datos del threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorAuthData:** El ID otorgado por el DS en la transacción previa **primera autenticación**, si este dato no es enviado 3DSS lo asigna, consultar la sesión Obtener los datos del threeDSRequestorPriorAuthenticationInfo

**Datos [DAF](/en/three-d-s-server/api/integration/session-d-a-f):** las llaves adicionales que se deberán enviar para que se aplique el [DAF](/en/three-d-s-server/api/integration/session-d-a-f) con VISA son los siguientes

* billAddrCity
* billAddrCountry
* billAddrLine1
* billAddrPostCode
* billAddrState
* email
* mobilePhone

***Response  Lookup***


```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "50709e2a-4dad-4c60-acaa-c5d3e1ede924",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539V3",
    "acsTransID": "3cdfa009-4018-4230-a72b-658587a5794c",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "72455b8f-5a57-4716-93fe-b72d3878805b",
    "messageVersion": "2.2.0",
    "acsOperatorID": "10078025",
    "authenticationValue": "BpkCBSMnAAAAAMNQhAJUdYknEmE=",
    "eci": "05",
    "messageExtension": [
        {
            "name": "DAF Extension",
            "id": "A000000003-003",
            "criticalityIndicator": false,
            "data": {
                "chAccReqID": "MUHZx0nojuVVAZJwPD4CWps0RuxUPxepI8sk57Yd/s4=",
                "authPayProcessReqInd": "01",
                "version": "1.0",
                "authPayCredStatus": "Y",
                "dafAdvice": "01"
            }
        }
    ],
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "RI",
    "messageCategory": "PA",
    "authMethod": "FRICTIONLESS_AUTHENTICATION",
    "authTimestamp": "2024-09-10T19:45:25+00:00",
    "transactionID": 248109
}
```

**Actión:** continue indica que la API retornara la información de la autenticación, y por ende no es necesario consumir endpoints adicionales para continuar con el flujo


---

## Split Shipment

This type of transaction is used to indicate that the transaction corresponds to a split shipment. In a Split Shipment scenario, an order or reservation is paid in several transactions because the services or products are provided at different times. Although the initial order is unique, the delivery of its components is split, and each part can be charged when it is ready or confirmed.

Split Shipments allow merchants to request a new CAVV to obtain liability protection for subsequent authorizations that may be necessary due to multiple authorizations related to a single order. This type of request can be made by any merchant who needs to process several authorizations associated with a single authentication.

***Data to consider when processing split shipments:***

* The name of the 3DS requestor **threeDSRequestorName** and the merchant name **merchantName** must be the same in the initial authentication request and in each of the associated 3RI requests.
* The total value of all 3RI requests must not exceed the sum of the amount of the initial authentication request and the total of the amounts already authorized. Issuers must track the total value using transaction data from both the direct authorization and the **EMV 3DS** authentication.

`POST` https://3dss-dev.placetopay.ws/api/threeds/v2x/sessions

***Use Cases:***

* **Orders with multiple items:** a customer places an order for several products that are not all available in the warehouse at the same time. Therefore, the merchant decides to ship the items in several deliveries, depending on availability.

| Event                                                                          | Value | Description                                                                                                            |
|---------------------------------------------------------------------------------|-------|------------------------------------------------------------------------------------------------------------------------|
| Initial authentication                                                          | $167  | Initial authentication for the total amount of the order.                                                              |
| Initial authorization of the first good/service.                                | $25   | Authorization for the first good/service using the CAVV from the previous initial authentication.                      |
| 3RI request for the second good/service.                                        | $12   | Send a 3RI request for the value of the second good/service.                                                           |
| Authorization as MIT reauthorization for a second good/service.                 | $12   | Authorization for the second good/service using the CAVV from the previous 3RI request.                                |
| 3RI request for the third and last good/service.                                | $130  | Send a 3RI request for the value of the third and last good/service.                                                   |
| Authorization as MIT reauthorization for the third and last good/service.       | $130  | Authorization for the third and last good/service using the CAVV from the previous 3RI request.                        |

<Note>
    For Visa, the split shipment flow is available through [DAF](/en/three-d-s-server/api/integration/session-d-a-f), which is optional for the 3RI flow.
</Note>

**First Authentication**

***Initial authentication for the total amount of the order.***

Before making a 3RI request, an EMV 3DS authentication must have been performed where the cardholder is available to authenticate for the total value of the order. This initial authentication can be used for the authorization associated with the first delivery of the goods/services.

### MASTERCARD

***Request Lookup***

```json
{
  "deviceChannel": "BRW",
  "threeDSAuthenticationInd": "PAYMENT_TRANSACTION",
  "threeDSChallengeInd": "CHALLENGE_REQUESTED_MANDATE",
  "acctNumber": "5107000000010018",
  "cardExpiryDate": "2902",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseAmount": "167",
  "purchaseCurrency": "USD",
  "reference": "January 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** BRW (02)

**threeDSAuthenticationInd:** PAYMENT_TRANSACTION (01) indicates that the transaction is a payment

**threeDSChallengeInd:** CHALLENGE_REQUESTED_MANDATE (04) the challenge is mandatory

***Response Lookup***

```json
{
    "action": "redirect",
    "sessionToken": "dc6c2a30c763d7ce640dcf0a98b5d172e3f86c62c3dea3ea1175469d0e6befae",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86152/dc6c2a30c763d7ce640dcf0a98b5d172e3f86c62c3dea3ea1175469d0e6befae",
    "transactionID": 248118
}
```

**Action:** `redirect` indicates that the API will return a `redirectURL` that must be used to continue the flow.

### VISA

***Request Lookup***

```json
{
  "deviceChannel": "BRW",
  "threeDSAuthenticationInd": "PAYMENT_TRANSACTION",
  "threeDSChallengeInd": "CHALLENGE_REQUESTED_MANDATE",
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "167",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "January 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** BRW (02) - Browser

**threeDSAuthenticationInd:** PAYMENT_TRANSACTION (01) indicates that the transaction is a payment

**threeDSChallengeInd:** CHALLENGE_REQUESTED_MANDATE (04), the challenge is mandatory

***Response Lookup***

```json
{
    "action": "redirect",
    "sessionToken": "1e7c2e6f2516a07020f30f8e5ef63bca7de42e16ac9498b61f2a8efd5ba52968",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86160/1e7c2e6f2516a07020f30f8e5ef63bca7de42e16ac9498b61f2a8efd5ba52968",
    "transactionID": 248126
}
```
**Action:** `redirect` indicates that the API will return a `redirectURL` that must be used to continue the flow.

**3RI request for the second good/service.**

Send a 3RI request for the value of the second good/service.

### MASTERCARD

***Request Lookup***

```json
{
  "deviceChannel": "RI",
  "threeRIInd": "SPLIT_OR_DELAYED_SHIPMENT",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-08-14T16:16:01+00:00",
    "threeDSReqPriorRef": "bd8571cb-f4f3-4ec6-ac23-d7ec11038c1c"
  },
  "acctNumber": "5107000000010018",
  "cardExpiryDate": "2902",
  "purchaseAmount": "12",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "February 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03) indicates that the channel is RI

**threeRIInd:** SPLIT_OR_DELAYED_SHIPMENT (06) indicates that the transaction is a split or delayed shipment

**threeDSReqPriorAuthMethod:** Method used by the cardholder for authentication.
- FRICTIONLESS_AUTHENTICATION (01), frictionless
- CARDHOLDER_CHALLENGE_OCCURRED (02), with challenge, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorAuthTimestamp:** Date and time in UTC format of the previous authentication. The format is C, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorRef:** The ID granted by the ACS in the previous transaction ***first authentication***, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorAuthData:** The ID granted by the DS in the previous transaction ***first authentication***, if this data is not sent, 3DSS assigns it, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

***Response Lookup***

```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "4159591c-bb88-4321-a295-0e6397377d3b",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539",
    "acsTransID": "b4ec2f82-106b-469b-897d-f2aa37bbf25f",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "dc477252-ff8d-433d-b44a-4f8edbb0cae8",
    "messageVersion": "2.2.0",
    "acsOperatorID": "ACS-V210-ACS-PLACETOPAY-11174",
    "authenticationValue": "xgTkbC8MAAAAAAAAAAAAAAAAAAA=",
    "eci": "07",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "RI",
    "messageCategory": "PA",
    "authMethod": "FRICTIONLESS_AUTHENTICATION",
    "authTimestamp": "2024-09-10T20:19:30+00:00",
    "transactionID": 248121
}
```

**Action:** `continue` indicates that the API will return the authentication information, and therefore it is not necessary to consume additional endpoints to continue the flow.

### VISA

***Request Lookup***

```json
{
  "deviceChannel": "RI",
  "threeRIInd": "SPLIT_OR_DELAYED_SHIPMENT",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T20:33:55+00:00",
    "threeDSReqPriorRef": "68ea3861-fa27-429b-8633-ff3f6a288f71"
  },
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "12",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "February 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03) indicates that the channel is RI

**threeRIInd:** SPLIT_OR_DELAYED_SHIPMENT (06), indicates that the transaction is a split or delayed shipment

**threeDSReqPriorAuthMethod:** Method used by the cardholder for authentication.
- FRICTIONLESS_AUTHENTICATION (01) frictionless
- CARDHOLDER_CHALLENGE_OCCURRED (02) with challenge, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorAuthTimestamp:** Date and time in UTC format of the previous authentication. The format is C, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorRef:** The ID granted by the ACS in the previous transaction ***first authentication***, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorAuthData:** The ID granted by the DS in the previous transaction ***first authentication***, if this data is not sent, 3DSS assigns it, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

***Response Lookup***

```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "87b8930d-8523-4083-8780-67adf3aeca96",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539V3",
    "acsTransID": "b02b97b8-6748-4ecb-9f42-441b7d83d9cd",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "26281147-cee2-4683-a538-c70fad690a08",
    "messageVersion": "2.2.0",
    "acsOperatorID": "10078025",
    "authenticationValue": "AJkCBxaRcQAAAASwhAJUdYknEmE=",
    "eci": "05",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "RI",
    "messageCategory": "PA",
    "authMethod": "FRICTIONLESS_AUTHENTICATION",
    "authTimestamp": "2024-09-10T20:35:17+00:00",
    "transactionID": 248127
}
```

**Action:** `redirect` indicates that the API will return a `redirectURL` that must be used to continue the flow.

**3RI request for the third and last good/service**

Send a 3RI request for the value of the third and last good/service.

### MASTERCARD

***Request Lookup***

```json
{
  "deviceChannel": "RI",
  "threeRIInd": "SPLIT_OR_DELAYED_SHIPMENT",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T20:16:01+00:00",
    "threeDSReqPriorRef": "49c34627-aa6b-41dc-bdc8-e21c0276d9ce"
  },
  "acctNumber": "5107000000010018",
  "cardExpiryDate": "2902",
  "purchaseAmount": "130",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "February 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03) indicates that the channel is RI

**threeRIInd:** SPLIT_OR_DELAYED_SHIPMENT (06), indicates that the transaction is a split or delayed shipment

**threeDSReqPriorAuthMethod:** Method used by the cardholder for authentication.
- FRICTIONLESS_AUTHENTICATION (01) frictionless
- CARDHOLDER_CHALLENGE_OCCURRED (02) with challenge, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorAuthTimestamp:** Date and time in UTC format of the previous authentication. The format is C, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorRef:** The ID granted by the ACS in the previous transaction ***first authentication***, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorAuthData:** The ID granted by the DS in the previous transaction ***first authentication***, if this data is not sent, 3DSS assigns it, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

***Response Lookup***

```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "bc925646-c654-4ba2-9e0a-9afaaa5684cc",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539",
    "acsTransID": "187648b7-ae15-4da6-a5df-f7298db768d9",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "a0a446cd-0767-4fa7-942b-e94571f1f37c",
    "messageVersion": "2.2.0",
    "acsOperatorID": "ACS-V210-ACS-PLACETOPAY-11174",
    "authenticationValue": "xgSlHx+5AAAAAAAAAAAAAAAAAAA=",
    "eci": "07",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "RI",
    "messageCategory": "PA",
    "authMethod": "FRICTIONLESS_AUTHENTICATION",
    "authTimestamp": "2024-09-10T20:23:36+00:00",
    "transactionID": 248122
}
```

**Action:** `continue` indicates that the API will return the authentication information, and therefore it is not necessary to consume additional endpoints to continue the flow.

### VISA

***Request Lookup***

```json
{
  "deviceChannel": "RI",
  "threeRIInd": "SPLIT_OR_DELAYED_SHIPMENT",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T20:33:55+00:00",
    "threeDSReqPriorRef": "68ea3861-fa27-429b-8633-ff3f6a288f71"
  },
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "130",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "February 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** BRW (02)

**threeDSAuthenticationInd:** PAYMENT_TRANSACTION (01) indicates that the transaction is a payment

**threeDSChallengeInd:** CHALLENGE_REQUESTED_MANDATE (04) the challenge is mandatory

***Response Lookup***

```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "2f9f285a-f876-4744-adaa-9c1cedf97271",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539V3",
    "acsTransID": "14f3123b-d769-4a14-afea-d6bd5719d332",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "f1ca5639-b587-4cd1-894e-fa14b97b9fdf",
    "messageVersion": "2.2.0",
    "acsOperatorID": "10078025",
    "authenticationValue": "AJkCAWCXJgAAADLIhAJUdYknEmE=",
    "eci": "05",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "RI",
    "messageCategory": "PA",
    "authMethod": "FRICTIONLESS_AUTHENTICATION",
    "authTimestamp": "2024-09-10T20:38:23+00:00",
    "transactionID": 248129
}
```

**Action:** `continue` indicates that the API will return the authentication information, and therefore it is not necessary to consume additional endpoints to continue the flow.

---




**threeDSChallengeInd:** CHALLENGE_REQUESTED_MANDATE (04) the challenge is mandatory


***Response Lookup***


```json
{
    "action": "redirect",
    "sessionToken": "c7bf55043c2d0403e87eaff8895951f70067e48a12a3d46203fd82df3da0a7c1",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86180/c7bf55043c2d0403e87eaff8895951f70067e48a12a3d46203fd82df3da0a7c1",
    "transactionID": 248146
}
```

**Action:** `redirect` indicates that the API will return a `redirectURL` that must be used to continue the flow.




### Booking agent authenticating on behalf of multiple merchants

A cardholder has booked on a travel website (**booking agent**) three items payable to each individual travel provider (**merchant 1, 2, and 3 in the authorization system**). The travel website is not collecting funds, but authenticates on behalf of the 3 travel providers:

* A flight for $170 payable to the airline (**provider/merchant 1**) at the time of booking
* A hotel for which no deposit is required at the time of booking (the hotel **provider/merchant 2** takes the card details in case a no-show payment is required)
* A car rental for which a $50 deposit must be made to the rental company (**seller/merchant 3**) at the time of booking


| **Event**                                             | **Party**               | **Value** | **Description**                                                                                                                                     |
|------------------------------------------------------|-------------------------|-----------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
| Initial authentication by the booking agent          | Booking agent           | $220      | Initial authentication by the booking agent for the amount owed for the order                                                                       |
| The booking agent performs three 3RI transactions    | Booking agent           | $220      | The booking agent performs three 3RI transactions to obtain three independent CAVVs: Airline $170, Hotel $0, Car rental $50                        |
| Authorization for goods/services (Flight)            | Travel merchant 1       | $170      | The airline merchant uses the CAVV from the 3RI transaction with a value of 170 (and its name in the CAVV) to authorize the flight ticket.         |
| Authorization for goods/services (Accommodation)     | Travel merchant 2 (hotel)| $0      | The accommodation merchant uses the CAVV from the 3RI transaction with a value of 0 (and its name in the CAVV) to authorize setting up an MIT.     |
| Authorization for goods/services (Car rental)        | Travel merchant 3       | $50       | The car rental merchant uses the CAVV from the 3RI transaction with a value of 50 (and its name in the CAVV) to authorize the deposit.             |



**Initial authentication by the booking agent**

Initial authentication by the booking agent for the amount owed for the order.

### MASTERCARD

***Request Lookup***

```json
{
    "deviceChannel": "BRW",
    "threeDSAuthenticationInd": "MASTERCARD_THE_PAYMENT_REQUEST_IS_FOR_AN_AGENT_PAYMENT_TRANSACTION",
    "threeDSChallengeInd": "CHALLENGE_REQUESTED_MANDATE",
    "acctNumber": "5107000000010018",
    "cardExpiryDate": "2806",
    "purchaseAmount": "220",
    "redirectURI": "https://www.placetopay.com/web",
    "purchaseCurrency": "USD",
    "messageVersion": "2.2.0"
}
```

**deviceChannel:** 02 - Browser

**threeDSAuthenticationInd:** 85 indicates that the transaction is for other payments

**threeDSChallengeInd: CHALLENGE_REQUESTED_MANDATE: (04)** the challenge is mandatory

***Response Lookup***

```json
{
    "action": "redirect",
    "sessionToken": "a52df573f6a0a8071714958671d018030c90fc1e6cdc00ac4b7b50a35403da53",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86184/a52df573f6a0a8071714958671d018030c90fc1e6cdc00ac4b7b50a35403da53",
    "transactionID": 248150
}
```

**Action:** `redirect` indicates that the API will return a `redirectURL` that must be used to continue the flow.


### VISA

***Request Lookup***

```json
{
  "deviceChannel": "BRW",
  "threeDSAuthenticationInd": "PAYMENT_TRANSACTION",
  "threeDSChallengeInd": "CHALLENGE_REQUESTED_MANDATE",
  "recurringExpiry": "20260101",
  "recurringFrequency": "2",
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "220",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "January 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** BRW (02) - Browser

**threeDSAuthenticationInd:** PAYMENT_TRANSACTION (01) indicates that the transaction is a payment

**threeDSChallengeInd:** CHALLENGE_REQUESTED_MANDATE (04), the challenge is mandatory

***Response Lookup***

```json
{
    "action": "redirect",
    "sessionToken": "e672a6977da87394e43b3da848a754f0fc0c3f73153e4adb781fc54db1e80525",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86196/e672a6977da87394e43b3da848a754f0fc0c3f73153e4adb781fc54db1e80525",
    "transactionID": 248162
}
```

**Action:** `redirect` indicates that the API will return a `redirectURL` that must be used to continue the flow.

**3RI transactions for airline**

The booking agent performs the 3RI transaction to obtain the CAVV and provide it to travel merchant 1 (airline)

### MASTERCARD

***Request Lookup***

```json
{
  "deviceChannel": "RI",
  "threeRIInd": "MASTERCARD_3RI_IS_FOR_AN_AGENT_PAYMENT_TRANSACTION",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T22:21:27+00:00",
    "threeDSReqPriorRef": "c524216d-a19e-4a6b-ae1c-40b82c59fe38"
  },
  "acctNumber": "5107000000010018",
  "cardExpiryDate": "2902",
  "purchaseAmount": "170",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "March 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03) indicates that the channel is 3RI

**threeRIInd:** MASTERCARD_3RI_IS_FOR_AN_AGENT_PAYMENT_TRANSACTION (85), indicates that the transaction is for other payments

**threeDSReqPriorAuthMethod:** Method used by the cardholder for authentication.
- FRICTIONLESS_AUTHENTICATION (01), frictionless
- CARDHOLDER_CHALLENGE_OCCURRED (02), with challenge, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorAuthTimestamp:** Date and time in UTC format of the previous authentication. The format is C, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorRef:** The ID granted by the ACS in the previous transaction (first authentication), see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorAuthData:** The ID granted by the DS in the previous transaction (first authentication), if this data is not sent, 3DSS assigns it, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

***Response Lookup***

```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "1045a464-161f-4538-a769-9a0f84e27a3d",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539",
    "acsTransID": "f31f4da1-7ac1-4be4-b37a-9e28d8e4eb9e",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "a0dca8a6-5fc5-49f9-96b2-8ee5c9e51508",
    "messageVersion": "2.2.0",
    "acsOperatorID": "ACS-V210-ACS-PLACETOPAY-11174",
    "authenticationValue": "xgSFPEJIAAAAAAAAAAAAAAAAAAA=",
    "eci": "07",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "RI",
    "messageCategory": "PA",
    "authMethod": "FRICTIONLESS_AUTHENTICATION",
    "authTimestamp": "2024-09-10T22:34:13+00:00",
    "transactionID": 248159
}
```
**Action:** `continue` indicates that the API will return the authentication information, and therefore it is not necessary to consume additional endpoints to continue the flow.

### VISA

***Request Lookup***

```json
{
  "deviceChannel": "RI",
  "threeRIInd": "OTHER_PAYMENT",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T22:44:39+00:00",
    "threeDSReqPriorRef": "9e4c13a7-0813-4402-9c53-687a01303f78"
  },
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "170",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "February 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03) indicates that the channel is 3RI

**threeRIInd:** OTHER_PAYMENT (11) indicates that the transaction is for other payment

***Response Lookup***

```json
 {
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "1a53d143-230f-47b9-b886-a201ee867489",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539V3",
    "acsTransID": "179f6511-b042-41f3-939d-7f862a527751",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "f5eb0bae-dccf-498e-b639-4abf5e86b162",
    "messageVersion": "2.2.0",
    "acsOperatorID": "10078025",
    "authenticationValue": "AJkCAhAyeQAAAEJohAJUdYknEmE=",
    "eci": "05",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "RI",
    "messageCategory": "PA",
    "authMethod": "FRICTIONLESS_AUTHENTICATION",
    "authTimestamp": "2024-09-10T22:46:32+00:00",
    "transactionID": 248164
}
```

**Action:** `continue` indicates that the API will return the authentication information, and therefore it is not necessary to consume additional endpoints to continue the flow.

---

## Delayed Shipment

Allows merchants to maintain liability protection beyond 90 days after an initial authentication.
Merchants can use this feature when, for example, a shipment/service is delayed for more than 90 days.
If the 3RI request is successful, a new CAVV will be generated for the merchant, granting another 90 days of liability protection.

When merchants request a new CAVV through a 3RI authentication, they must do so within 90
days from the date of the initial authentication. Merchants should only send this type of request if they need liability
protection beyond 90 days from the initial authentication. They should delay the request for a new CAVV as much as possible
within the 90-day period. If the initial CAVV has expired, although it no longer provides liability protection, issuers must consider
that it can still be used by the merchant as proof that authentication was performed.

***Data to consider when processing split shipments:***

* The 3DS requestor name **threeDSRequestorName** and the merchant name **merchantName** must be the same in the initial authentication request and in each associated 3RI request
* The total value of all 3RI requests must not exceed the amount of the initial authentication request and the total of already authorized amounts

`POST` https://3dss-dev.placetopay.ws/api/threeds/v2x/sessions


***Use Cases:***

* **Pre-sale products:** a customer buys a product on pre-sale, such as a book or an electronic device that is not yet available. The card is charged when the purchase is made, but the product will be shipped weeks or months later when it becomes available.
* **Out-of-stock products:** a customer buys a product that is not in stock at the moment, but will be shipped once available. The card is charged at the time of order, and the product is shipped when inventory is replenished.
* **Orders with scheduled shipments:** a customer buys several products but requests that the shipment be made on a specific future date. Payment is processed immediately, but the shipment is delayed until the requested date.

| Event                                                      | Value | Description                                                                                                                                               |
|------------------------------------------------------------|-------|-----------------------------------------------------------------------------------------------------------------------------------------------------------|
| Initial authentication                                     | $112  | Initial authentication for the total order amount.                                                                                                        |
| Initial authorization of the first good/service.           | $0    | Perform $0 authorization to set up the future MIT using the CAVV from the previous initial authentication.                                                |
| 3RI request for a delayed good or service.                 | $112  | Send a 3RI request for the value of the delayed good or service. (e.g., day 85 after initial authentication)                                              |
| Authorization as MIT reauthorization for the good/service. | $112  | Perform authorization for the good or service using the CAVV from the previous 3RI request. (e.g., day 120 after initial authentication)                  |

<Note>
    For Visa, the split shipment flow is available through [DAF](/en/three-d-s-server/api/integration/session-d-a-f), which is optional for the 3RI flow.
</Note>

**First Authentication**

Initial authentication for the total order amount.

Before making a 3RI request, an EMV 3DS authentication must have been performed where the cardholder is available to authenticate for the total order value. This initial authentication can be used for the authorization associated with the first delivery of goods/services.


### MASTERCARD

***Request Lookup***

```json
{
  "deviceChannel": "BRW",
  "threeDSAuthenticationInd": "PAYMENT_TRANSACTION",
  "threeDSChallengeInd": "CHALLENGE_REQUESTED_MANDATE",
  "acctNumber": "5107000000010018",
  "cardExpiryDate": "2902",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseAmount": "112",
  "purchaseCurrency": "USD",
  "reference": "January 2024",
  "messageVersion": "2.2.0"
}
```

**DeviceChannel:** BRW (02)

**ThreeDSAuthenticationInd:** PAYMENT_TRANSACTION (01) indicates that the transaction is a payment

**ThreeDSChallengeInd:** CHALLENGE_REQUESTED_MANDATE (04) the challenge is mandatory

***Response Lookup***

```json
{
    "action": "redirect",
    "sessionToken": "c793365493edc34b17a7097ea8a33fdb5853d8e0da62d39ca9e49e6c021a641f",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86167/c793365493edc34b17a7097ea8a33fdb5853d8e0da62d39ca9e49e6c021a641f",
    "transactionID": 248133
}
```

**Action:** redirect indicates that the API will return a redirectURL that must be consumed to continue the flow


### VISA

***Request Lookup***

```json
{
  "deviceChannel": "BRW",
  "threeDSAuthenticationInd": "PAYMENT_TRANSACTION",
  "threeDSChallengeInd": "CHALLENGE_REQUESTED_MANDATE",
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "112",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "January 2024",
  "messageVersion": "2.2.0"
}
```

**DeviceChannel:** BRW (02) - Browser

**ThreeDSAuthenticationInd:** PAYMENT_TRANSACTION (01) indicates that the transaction is a payment

**ThreeDSChallengeInd:** CHALLENGE_REQUESTED_MANDATE (04) the challenge is mandatory

***Response Lookup***

```json
{
    "action": "redirect",
    "sessionToken": "3dcdb5b0d1403b0b1e14348037a3c74f202bf18d73233597a07a38963721b18e",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86170/3dcdb5b0d1403b0b1e14348037a3c74f202bf18d73233597a07a38963721b18e",
    "transactionID": 248136
}
```

**Action:** redirect indicates that the API will return a redirectURL that must be consumed to continue the flow


**3RI request for a delayed good/service.**

Send a 3RI request for the value of the second good/service

### MASTERCARD

***Request Lookup***

```json
{
  "deviceChannel": "RI",
  "threeRIInd": "SPLIT_OR_DELAYED_SHIPMENT",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T21:06:02+00:00",
    "threeDSReqPriorRef": "2dd8d5d0-8563-4ae5-aa9e-23d31fa6fb85"
  },
  "acctNumber": "5107000000010018",
  "cardExpiryDate": "2902",
  "purchaseAmount": "112",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "February 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03) indicates the channel is RI

**threeRIInd:** SPLIT_OR_DELAYED_SHIPMENT (06), indicates the transaction is a split or delayed shipment

**threeDSReqPriorAuthMethod:** Method used by the cardholder for authentication.
- FRICTIONLESS_AUTHENTICATION (01) frictionless,
- CARDHOLDER_CHALLENGE_OCCURRED (02) with challenge, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorAuthTimestamp:** Date and time in UTC format of the previous authentication. The format is C, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorRef:** The ID provided by the ACS in the previous transaction ***first authentication***, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**threeDSReqPriorAuthData:** The ID provided by the DS in the previous transaction ***first authentication***, if this data is not sent 3DSS assigns it, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

***Response Lookup***

```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "f91b89a9-7924-48de-97ab-8cc58bc5fcc2",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539",
    "acsTransID": "cc3b5ff3-9dd7-44ae-bfa0-472de466f449",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "a730d64c-ddb1-4f99-8f2c-4591d00021e3",
    "messageVersion": "2.2.0",
    "acsOperatorID": "ACS-V210-ACS-PLACETOPAY-11174",
    "authenticationValue": "xgQkuJ5tAAAAAAAAAAAAAAAAAAA=",
    "eci": "07",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "RI",
    "messageCategory": "PA",
    "authMethod": "FRICTIONLESS_AUTHENTICATION",
    "authTimestamp": "2024-09-10T21:07:09+00:00",
    "transactionID": 248135
}
```

**Action:** continue indicates that the API will return the authentication information, so there is no need to consume additional endpoints to continue the flow

### VISA

***Request Lookup***

```json
{
  "deviceChannel": "RI",
  "threeRIInd": "SPLIT_OR_DELAYED_SHIPMENT",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T21:10:29+00:00",
    "threeDSReqPriorRef": "7f7c0594-7e0f-4b13-bd45-6d180c35ffb0"
  },
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "112",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "February 2024",
  "messageVersion": "2.2.0"
}
```

**DeviceChannel:** RI (03) indicates the channel is RI

**ThreeRIInd:** SPLIT_OR_DELAYED_SHIPMENT (06), indicates the transaction is a split or delayed shipment

**ThreeDSReqPriorAuthMethod:** Method used by the cardholder for authentication.
- FRICTIONLESS_AUTHENTICATION (01) frictionless,
- CARDHOLDER_CHALLENGE_OCCURRED (02) with challenge, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**ThreeDSReqPriorAuthTimestamp:** Date and time in UTC format of the previous authentication. The format is C, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**ThreeDSReqPriorRef:** The ID provided by the ACS in the previous transaction ***first authentication***, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

**ThreeDSReqPriorAuthData:** The ID provided by the DS in the previous transaction **first authentication**, if this data is not sent 3DSS assigns it, see the session Get the data from threeDSRequestorPriorAuthenticationInfo

***Response Lookup***

```json
 {
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "0ec3a36a-3c91-4864-bfc0-730300027805",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539V3",
    "acsTransID": "4483ff06-0f36-45a2-aa13-b7f88564910b",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "8360727e-22ff-4c23-bef8-ba2510eaf59b",
    "messageVersion": "2.2.0",
    "acsOperatorID": "10078025",
    "authenticationValue": "AJkCAREXeQAAACvAhAJUdYknEmE=",
    "eci": "05",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "RI",
    "messageCategory": "PA",
    "authMethod": "FRICTIONLESS_AUTHENTICATION",
    "authTimestamp": "2024-09-10T21:12:29+00:00",
    "transactionID": 248138
}
```

**Action:** continue indicates that the API will return the authentication information, so there is no need to consume additional endpoints to continue the flow

---

## Other Payments/Commerce Between Multiple Parties

**Other payments** is the category reserved for scenarios of **commerce between multiple parties** that may occur when several parties are involved in processing multiple authorizations associated with a single travel booking, or when several parties in sectors other than travel are involved in processing multiple authorizations associated with a single payment from the cardholder's perspective.

In the initial authentication request and associated 3RI requests, booking agents/service providers should also use the appropriate naming conventions and identifiers for the use case they are authenticating for:

* Authentication only on behalf of a single merchant
* Authentication on behalf of multiple merchants
* Authenticating themselves and on behalf of another merchant

Similarly to split shipments, issuers must track the total value using both authorization and authentication transaction data. This is necessary because the booking agent/merchant service provider cannot make a 3RI request for all parties involved in the transaction, and as such, the issuer cannot assume that the sum of all 3RI requests will equal the total of the initial authentication amount, but the 3RI amounts must not exceed the originally authenticated amount.

Booking agent authenticating on behalf of a single merchant

The cardholder has booked an item on a travel agent's website, for example, a flight
worth $395, which must be paid to the seller (i.e., the airline, who will be the merchant in the
authorization system) or charged by them at the time of booking, but the travel agent handles the authentication.

| **Event**                                             | **Party**               | **Amount** | **Description**                                                                                                                                     |
|--------------------------------------------------------|-------------------------|-----------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
| Initial authentication by the booking agent          | Booking agent           | $395      | Initial authentication for the total order amount by the booking agent                                                                              |
| Authorization for goods/services                     | Travel merchant 1       | $395      | The booking agent provides the CAVV from the initial authentication to the seller, allowing them to authorize for the total amount                  |



**Initial authentication by the booking agent**

Initial authentication for the total order amount by the booking agent

### MASTERCARD

***Request Lookup***

```json
{
  "deviceChannel": "BRW",
  "threeDSAuthenticationInd": "MASTERCARD_THE_PAYMENT_REQUEST_IS_FOR_AN_AGENT_PAYMENT_TRANSACTION",
  "threeDSChallengeInd": "CHALLENGE_REQUESTED_MANDATE",
  "acctNumber": "5107000000010018",
  "cardExpiryDate": "2902",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseAmount": "395",
  "purchaseCurrency": "USD",
  "reference": "January 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** BRW (02) - Browser

**threeDSAuthenticationInd:** PAYMENT_TRANSACTION (01) indicates the transaction is a payment

**threeDSChallengeInd:** CHALLENGE_REQUESTED_MANDATE (04), challenge is mandatory


***Response Lookup***

```json
{
    "action": "redirect",
    "sessionToken": "cf980dc8f7bc550243c9aa49e36902474b36dfcddd0d5671f78a924311c8bdc0",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86177/cf980dc8f7bc550243c9aa49e36902474b36dfcddd0d5671f78a924311c8bdc0",
    "transactionID": 248143
}
```

**Action:** redirect indicates that the API will return a redirectURL that must be consumed to continue the flow


### VISA

***Request Lookup***

```json
{
  "deviceChannel": "BRW",
  "threeDSAuthenticationInd": "PAYMENT_TRANSACTION",
  "threeDSChallengeInd": "CHALLENGE_REQUESTED_MANDATE",
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseAmount": "395",
  "purchaseCurrency": "USD",
  "reference": "January 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** BRW (02) - Browser

**threeDSAuthenticationInd:** PAYMENT_TRANSACTION (01) indicates the transaction is a payment

**threeDSChallengeInd:** CHALLENGE_REQUESTED_MANDATE (04), challenge is mandatory


***Response Lookup***

```json
{
    "action": "redirect",
    "sessionToken": "c7bf55043c2d0403e87eaff8895951f70067e48a12a3d46203fd82df3da0a7c1",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86180/c7bf55043c2d0403e87eaff8895951f70067e48a12a3d46203fd82df3da0a7c1",
    "transactionID": 248146
}
```

**Action:** redirect indicates that the API will return a redirectURL that must be consumed to continue the flow



### Booking agent authenticating on behalf of multiple merchants

A cardholder has booked on a travel website (**booking agent**) three items payable to each individual travel provider (**merchant 1, 2, and 3 in the authorization system**). The travel website is not collecting funds, but authenticates on behalf of the 3 travel providers:

* A flight for $170 payable to the airline **provider/merchant 1** at the time of booking
* A hotel for which no deposit is required at booking (the hotel **provider/merchant 2 takes the card details in case a no-show payment is required**)
* A car rental for which a $50 deposit must be made to the rental company **seller/merchant 3** at the time of booking


| **Event**                                                 | **Party**                       | **Amount** | **Description**                                                                                                                                                         |
|------------------------------------------------------------|---------------------------------|-----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Initial authentication by the booking agent              | Booking agent                   | $220      | Initial authentication by the booking agent for the amount due for the order                                                                                           |
| The booking agent performs three 3RI transactions        | Booking agent                   | $220      | The booking agent performs three 3RI transactions to obtain three independent CAVVs: Airline $170, Hotel $0, Car Rental $50                                            |
| Authorization for goods/services (Flight)                | Travel merchant 1               | $170      | The airline merchant uses the CAVV from the 3RI transaction with a value of 170 (and its name in the CAVV) to authorize the flight ticket.                             |
| Authorization for goods/services (Accommodation)         | Travel merchant 2 (hotel)       | $0        | The accommodation merchant uses the CAVV from the 3RI transaction with a value of 0 (and its name in the CAVV) to authorize setting up an MIT.                         |
| Authorization for goods/services (Car rental)            | Travel merchant 3               | $50       | The car rental merchant uses the CAVV from the 3RI transaction with a value of 50 (and its name in the CAVV) to authorize the deposit.                                 |



**Initial authentication by the booking agent**

Initial authentication by the booking agent for the amount due for the order.

### MASTERCARD

***Request Lookup***

```json
{
    "deviceChannel": "BRW",
    "threeDSAuthenticationInd": "MASTERCARD_THE_PAYMENT_REQUEST_IS_FOR_AN_AGENT_PAYMENT_TRANSACTION",
    "threeDSChallengeInd": "CHALLENGE_REQUESTED_MANDATE",
    "acctNumber": "5107000000010018",
    "cardExpiryDate": "2806",
    "purchaseAmount": "220",
    "redirectURI": "https://www.placetopay.com/web",
    "purchaseCurrency": "USD",
    "messageVersion": "2.2.0"
}
```

**deviceChannel:** 02 - Browser

**threeDSAuthenticationInd:** 85 indicates the transaction is other payments

**threeDSChallengeInd: CHALLENGE_REQUESTED_MANDATE: (04)** challenge is mandatory

***Response Lookup***

```json
{
    "action": "redirect",
    "sessionToken": "a52df573f6a0a8071714958671d018030c90fc1e6cdc00ac4b7b50a35403da53",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86184/a52df573f6a0a8071714958671d018030c90fc1e6cdc00ac4b7b50a35403da53",
    "transactionID": 248150
}
```

**Action:** redirect indicates that the API will return a redirectURL that must be consumed to continue the flow


### VISA

***Request Lookup***

```json
{
  "deviceChannel": "BRW",
  "threeDSAuthenticationInd": "PAYMENT_TRANSACTION",
  "threeDSChallengeInd": "CHALLENGE_REQUESTED_MANDATE",
  "recurringExpiry": "20260101",
  "recurringFrequency": "2",
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "220",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "January 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** BRW (02) - Browser

**threeDSAuthenticationInd:** PAYMENT_TRANSACTION (01) indicates the transaction is a payment

**threeDSChallengeInd:** CHALLENGE_REQUESTED_MANDATE (04), challenge is mandatory

***Response Lookup***

```json
{
    "action": "redirect",
    "sessionToken": "e672a6977da87394e43b3da848a754f0fc0c3f73153e4adb781fc54db1e80525",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86196/e672a6977da87394e43b3da848a754f0fc0c3f73153e4adb781fc54db1e80525",
    "transactionID": 248162
}
```

**Action:** redirect indicates that the API will return a redirectURL that must be consumed to continue the flow

**3RI transactions airline**

The booking agent performs the 3RI transaction to obtain the CAVV and provide it to travel merchant 1 (airline)

### MASTERCARD

***Request Lookup***

```json
{
  "deviceChannel": "RI",
  "threeRIInd": "MASTERCARD_3RI_IS_FOR_AN_AGENT_PAYMENT_TRANSACTION",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T22:21:27+00:00",
    "threeDSReqPriorRef": "c524216d-a19e-4a6b-ae1c-40b82c59fe38"
  },
  "acctNumber": "5107000000010018",
  "cardExpiryDate": "2902",
  "purchaseAmount": "170",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "March 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03) indicates the channel is 3RI

**threeRIInd:** MASTERCARD_3RI_IS_FOR_AN_AGENT_PAYMENT_TRANSACTION (85), indicates the transaction is other payments

**threeDSReqPriorAuthMethod:** Method used by the cardholder for authentication.
- FRICTIONLESS_AUTHENTICATION (01), frictionless,
- CARDHOLDER_CHALLENGE_OCCURRED (02), with challenge, see the session to get the threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthTimestamp:** Date and time in UTC format of the prior authentication. The format is C, see the session to get the threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorRef:** The ID granted by the ACS in the previous transaction (first authentication), see the session to get the threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthData:** The ID granted by the DS in the previous transaction (first authentication), if this data is not sent, 3DSS assigns it, see the session to get the threeDSRequestorPriorAuthenticationInfo data


***Response Lookup***

```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "1045a464-161f-4538-a769-9a0f84e27a3d",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539",
    "acsTransID": "f31f4da1-7ac1-4be4-b37a-9e28d8e4eb9e",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "a0dca8a6-5fc5-49f9-96b2-8ee5c9e51508",
    "messageVersion": "2.2.0",
    "acsOperatorID": "ACS-V210-ACS-PLACETOPAY-11174",
    "authenticationValue": "xgSFPEJIAAAAAAAAAAAAAAAAAAA=",
    "eci": "07",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "RI",
    "messageCategory": "PA",
    "authMethod": "FRICTIONLESS_AUTHENTICATION",
    "authTimestamp": "2024-09-10T22:34:13+00:00",
    "transactionID": 248159
}
```
**Action:** continue indicates that the API will return the authentication information, so it is not necessary to consume additional endpoints to continue the flow


### VISA

***Request Lookup***

```json
{
  "deviceChannel": "RI",
  "threeRIInd": "OTHER_PAYMENT",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T22:44:39+00:00",
    "threeDSReqPriorRef": "9e4c13a7-0813-4402-9c53-687a01303f78"
  },
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "170",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "February 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03) indicates the channel is 3RI

**threeRIInd:** OTHER_PAYMENT (11) indicates the transaction is other payment

***Response Lookup***

```json
 {
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "1a53d143-230f-47b9-b886-a201ee867489",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539V3",
    "acsTransID": "179f6511-b042-41f3-939d-7f862a527751",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "f5eb0bae-dccf-498e-b639-4abf5e86b162",
    "messageVersion": "2.2.0",
    "acsOperatorID": "10078025",
    "authenticationValue": "AJkCAhAyeQAAAEJohAJUdYknEmE=",
    "eci": "05",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "RI",
    "messageCategory": "PA",
    "authMethod": "FRICTIONLESS_AUTHENTICATION",
    "authTimestamp": "2024-09-10T22:46:32+00:00",
    "transactionID": 248164
}
```

**Action:** continue indicates that the API will return the authentication information, so it is not necessary to consume additional endpoints to continue the flow


**3RI transactions hotel**

### MASTERCARD

***Request Lookup***

```json
{
  "deviceChannel": "RI",
  "threeRIInd": "MASTERCARD_3RI_IS_FOR_AN_AGENT_PAYMENT_TRANSACTION",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T22:21:27+00:00",
    "threeDSReqPriorRef": "c524216d-a19e-4a6b-ae1c-40b82c59fe38"
  },
  "acctNumber": "5107000000010018",
  "cardExpiryDate": "2902",
  "purchaseAmount": "0",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "April 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03) indicates the channel is 3RI

**threeRIInd:** MASTERCARD_3RI_IS_FOR_AN_AGENT_PAYMENT_TRANSACTION (85) indicates the transaction is other payments

**threeDSReqPriorAuthMethod:** Method used by the cardholder for authentication.

- FRICTIONLESS_AUTHENTICATION (01) frictionless,
- CARDHOLDER_CHALLENGE_OCCURRED (02) with challenge, see the session to get the threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthTimestamp:** Date and time in UTC format of the prior authentication. The format is C, see the session to get the threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorRef:** The ID granted by the ACS in the previous transaction (first authentication), see the session to get the threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthData:** The ID granted by the DS in the previous transaction (first authentication), if this data is not sent, 3DSS assigns it, see the session to get the threeDSRequestorPriorAuthenticationInfo data

***Response Lookup***

```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "32c88ea6-7841-4c8b-9067-b84c99b20784",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539",
    "acsTransID": "fa92fe01-84f7-4ae7-a3f1-1dd50f97ebef",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "634b8dc1-aa5b-48c3-b367-022156663c81",
    "messageVersion": "2.2.0",
    "acsOperatorID": "ACS-V210-ACS-PLACETOPAY-11174",
    "authenticationValue": "xgRTaR2SAAAAAAAAAAAAAAAAAAA=",
    "eci": "07",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "RI",
    "messageCategory": "PA",
    "authMethod": "FRICTIONLESS_AUTHENTICATION",
    "authTimestamp": "2024-09-10T22:36:05+00:00",
    "transactionID": 248160
}
```
**Action:** continue indicates that the API will return the authentication information, so it is not necessary to consume additional endpoints to continue the flow

### VISA

***Request Lookup***

```json
{
  "deviceChannel": "RI",
  "threeRIInd": "OTHER_PAYMENT",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T22:44:39+00:00",
    "threeDSReqPriorRef": "9e4c13a7-0813-4402-9c53-687a01303f78"
  },
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "0",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "March 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03) indicates the channel is 3RI

**threeRIInd:** OTHER_PAYMENT (11) indicates the transaction is other payments

**threeDSReqPriorAuthMethod:** Method used by the cardholder for authentication.
- FRICTIONLESS_AUTHENTICATION (01) frictionless,
- CARDHOLDER_CHALLENGE_OCCURRED (02), with challenge, see the session to get the threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthTimestamp:** Date and time in UTC format of the prior authentication. The format is C, see the session to get the threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorRef:** The ID granted by the ACS in the previous transaction (first authentication), see the session to get the threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthData:** The ID granted by the DS in the previous transaction (first authentication), if this data is not sent, 3DSS assigns it, see the session to get the threeDSRequestorPriorAuthenticationInfo data

***Response Lookup***

```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "b9913d5d-4980-4103-b77c-5daf0c7054b0",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539V3",
    "acsTransID": "e9b7726c-6f9a-4606-afe3-09dce49f49a2",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "6f9c449a-0ff3-4438-8c47-e3009ded9cd1",
    "messageVersion": "2.2.0",
    "acsOperatorID": "10078025",
    "authenticationValue": "AJkCB4EjdQAAAAAAhAJUdYknEmE=",
    "eci": "05",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "RI",
    "messageCategory": "PA",
    "authMethod": "01",
    "authTimestamp": "2024-09-10T22:48:07+00:00",
    "transactionID": 248165
}
```

**Action:** continue indicates that the API will return the authentication information, so it is not necessary to consume additional endpoints to continue the flow

**3RI transactions car rental**

The booking agent performs the 3RI transaction to obtain the CAVV and provide it to travel merchant 3 (car rental)

### MASTERCARD

***Request Lookup***

```json
{
  "deviceChannel": "RI",
  "threeRIInd": "85",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T22:21:27+00:00",
    "threeDSReqPriorRef": "c524216d-a19e-4a6b-ae1c-40b82c59fe38"
  },
  "acctNumber": "5107000000010018",
  "cardExpiryDate": "2902",
  "purchaseAmount": "50",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "March 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03) indicates the channel is 3RI

**threeRIInd:** MASTERCARD_3RI_IS_FOR_AN_AGENT_PAYMENT_TRANSACTION (85) indicates the transaction is other payments

**threeDSReqPriorAuthMethod:** Method used by the cardholder for authentication.

- FRICTIONLESS_AUTHENTICATION (01) frictionless,
- CARDHOLDER_CHALLENGE_OCCURRED (02), with challenge, see the session to get the threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthTimestamp:** Date and time in UTC format of the prior authentication. The format is C, see the session to get the threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorRef:** The ID granted by the ACS in the previous transaction (first authentication), see the session to get the threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthData:** The ID granted by the DS in the previous transaction (first authentication), if this data is not sent, 3DSS assigns it, see the session to get the threeDSRequestorPriorAuthenticationInfo data

***Response Lookup***

```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "c34f67dc-7a25-4977-97f7-ca1f961946be",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539",
    "acsTransID": "fd189ecf-c65e-4a7d-9640-89662b850038",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "4680679e-d6ed-48d2-89d2-b73de0828a57",
    "messageVersion": "2.2.0",
    "acsOperatorID": "ACS-V210-ACS-PLACETOPAY-11174",
    "authenticationValue": "xgSELtLrAAAAAAAAAAAAAAAAAAA=",
    "eci": "07",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "RI",
    "messageCategory": "PA",
    "authMethod": "01",
    "authTimestamp": "2024-09-10T22:38:11+00:00",
    "transactionID": 248161
}
```

**Action:** continue indicates that the API will return the authentication information, so it is not necessary to consume additional endpoints to continue the flow


### VISA

***Request Lookup***

```json
{
  "deviceChannel": "RI",
  "threeRIInd": "OTHER_PAYMENT",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T22:44:39+00:00",
    "threeDSReqPriorRef": "9e4c13a7-0813-4402-9c53-687a01303f78"
  },
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "50",
  "redirectURI": "https://www.placetopay.com/web",
  "purchaseCurrency": "USD",
  "reference": "May 2024",
  "messageVersion": "2.2.0"
}
```

***deviceChannel:*** RI (03) indicates the channel is 3RI

***threeRIInd:*** OTHER_PAYMENT(11) indicates the transaction is other payments

***threeDSReqPriorAuthMethod:*** Method used by the cardholder for authentication.

- FRICTIONLESS_AUTHENTICATION(01) frictionless,
- CARDHOLDER_CHALLENGE_OCCURRED (02) with challenge, see the session to get the threeDSRequestorPriorAuthenticationInfo data

***threeDSReqPriorAuthTimestamp:*** Date and time in UTC format of the prior authentication. The format is C, see the session to get the threeDSRequestorPriorAuthenticationInfo data

***threeDSReqPriorRef:*** The ID granted by the ACS in the previous transaction (first authentication), see the session to get the threeDSRequestorPriorAuthenticationInfo data

***threeDSReqPriorAuthData:*** The ID granted by the DS in the previous transaction (first authentication), if this data is not sent, 3DSS assigns it, see the session to get the threeDSRequestorPriorAuthenticationInfo data

***Response Lookup***

```json
 {
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "7a64778d-45de-48ae-8c78-ec688775315d",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539V3",
    "acsTransID": "d4b3bbae-5594-4c89-9cf8-ae2ac3499223",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "5c4c3ec0-d31b-442d-81e8-86025c08cb9d",
    "messageVersion": "2.2.0",
    "acsOperatorID": "10078025",
    "authenticationValue": "AJkCByOJNAAAABOIhAJUdYknEmE=",
    "eci": "05",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "RI",
    "messageCategory": "PA",
    "authMethod": "01",
    "authTimestamp": "2024-09-10T22:49:54+00:00",
    "transactionID": 248166
}
```

**Action:** continue indicates that the API will return the authentication information, so it is not necessary to consume additional endpoints to continue the flow

---

## Unscheduled Card-on-File Transactions

UCOF (Unscheduled Card-on-File) transactions occur when a merchant uses card information stored in their system to make a one-time, unscheduled charge to the customer's card. These transactions are not associated with recurring or installment payments; instead, they are unique transactions that leverage previously stored card information to facilitate payment.

* Online purchases without cardholder intervention: For example, a customer makes a purchase on a website using the option to ***save card for future purchases***. Later, the merchant uses the stored card information to process a payment for an additional purchase without further interaction from the customer.
* Automatic renewals for non-periodic services: Some services do not follow a regular billing cycle but may still use stored card information to facilitate automatic renewal payments. For example, the annual renewal of a software subscription that is not billed monthly but uses stored card information to automatically process payment when the renewal date arrives.
* One-time or unscheduled fee payments: Situations where a customer needs to make a one-time, unscheduled payment to a merchant, such as paying an outstanding invoice, a fee for an additional service, or a last-minute purchase.


`POST` https://3dss-dev.placetopay.ws/api/threeds/v2x/sessions


**Visa No Payment (NPA)**

***First Authentication - Add Card***

**NPA Option:** This option does not require account funds verification.


***Request Lookup***

```json
{
  "deviceChannel": "BRW",
  "messageCategory": "02",
  "threeDSAuthenticationInd": "ADD_CARD",
  "threeDSChallengeInd": "CHALLENGE_REQUESTED_MANDATE",
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "redirectURI": "https://www.placetopay.com/web",
  "reference": "January 2024",
  "messageVersion": "2.2.0",
  "billAddrCity": "Medellín",
  "billAddrCountry": "COL",
  "billAddrLine1": "Carrera 65 # 45 - 20",
  "billAddrPostCode": "050004",
  "billAddrState": "ANT",
  "email": "john.doe@evertecinc.com",
  "mobilePhone": {
      "cc": "57",
      "subscriber": "30011122333"
  }
}
```

**deviceChannel:** BRW (02) - Browser

**messageCategory:** NPA (02) - No payment

**threeDSAuthenticationInd** indicates the type of authentication. Value 04 corresponds to add card.

***Response Lookup***


```json
{
    "action": "redirect",
    "sessionToken": "b8ba7e2e3cb4b7cf8045c8e098bf84e5f77b6b643a1ce19cef9ebe4be8b05473",
    "redirectURL": "https://3dss-dev.placetopay.ws/threeds/v2x/sessions/1268/b8ba7e2e3cb4b7cf8045c8e098bf84e5f77b6b643a1ce19cef9ebe4be8b05473",
    "transactionID": 1312
}
```

**Action:** redirect indicates that the API will return a redirectURL that must be consumed to continue the flow.


**Subsequent Authentications**

***Request Lookup***

```json
{
  "deviceChannel": "RI",
  "threeRIInd": "81",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-05-03T22:48:06+00:00",
    "threeDSReqPriorRef": "5d822226-d2ad-4a43-8270-87c95003dad4",
    "threeDSReqPriorAuthData": "valid_data"
  },
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "1.00",
  "purchaseCurrency": "USD",
  "redirectURI": "https://www.placetopay.com/web",
  "reference": "February 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03) indicates the channel is 3RI

**threeRIInd:** 81 indicates an unscheduled card-on-file transaction

**threeDSReqPriorAuthMethod:** Method used by the cardholder for authentication.
- FRICTIONLESS_AUTHENTICATION(01) frictionless,
- CARDHOLDER_CHALLENGE_OCCURRED(02) with challenge, see the session for threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthTimestamp:** Date and time in UTC format of the prior authentication. The format is C, see the session for threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorRef:** The ID provided by the ACS in the previous transaction ***first authentication***, see the session for threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthData:** The ID provided by the DS in the previous **first authentication** transaction, if this data is not sent, 3DSS assigns it, see the session for threeDSRequestorPriorAuthenticationInfo data

***Response Lookup***


```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "aec4b66f-f4ce-4bbf-9904-0759efa6ea8e",
    "acsReferenceNumber": "PTOPID",
    "acsTransID": "f7a98ab1-37d1-4e20-a7db-8f0491fbdd6d",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "655fabd4-ee08-4bab-963f-68c79063438f",
    "messageVersion": "2.2.0",
    "acsOperatorID": "CAS_OPERD_DR",
    "authenticationValue": "BpkCBBYBJAAAAABkhAEkdYR0cUU=",
    "eci": "05",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "RI",
    "messageCategory": "PA",
    "authMethod": "FRICTIONLESS_AUTHENTICATION",
    "authTimestamp": "2024-05-03T22:49:38+00:00"
}
```

**Action:** continue indicates that the API will return the authentication information, so no additional endpoints need to be consumed to continue the flow.


***Visa No Payment (NPA) and DAF***

The implementation with DAF is optional.

***Request Lookup***

```json
{
  "deviceChannel": "02",
  "messageCategory": "02",
  "threeDSAuthenticationInd": "04",
  "threeDSChallengeInd": "04",
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "redirectURI": "https://www.placetopay.com/web",
  "reference": "January 2024",
  "messageVersion": "2.2.0",
  "billAddrCity": "Medellín",
  "billAddrCountry": "COL",
  "billAddrLine1": "Carrera 65 # 45 - 20",
  "billAddrPostCode": "050004",
  "billAddrState": "ANT",
  "email": "john.doe@evertecinc.com",
  "mobilePhone": {
      "cc": "57",
      "subscriber": "30011122333"
  }
}
```

**deviceChannel:** 02 - Browser

**messageCategory:** The value 02 corresponds to transaction of No payment (NPA)

**threeDSAuthenticationInd**, indicates the type of authentication. Value 04 corresponds to add card.

**DAF Data:** the additional keys that need to be sent to apply DAF with VISA are the following

* billAddrCity
* billAddrCountry
* billAddrLine1
* billAddrPostCode
* billAddrState
* email
* mobilePhone

<Note>
    Also consider the configurations described in the documentation of [DAF](/en/three-d-s-server/api/integration/session-d-a-f)
</Note>

***Response Lookup***


```json
{
    "action": "redirect",
    "sessionToken": "ea515edd9d05e07ad58df6a96adf6b806172de055743099787318236304899f4",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86201/ea515edd9d05e07ad58df6a96adf6b806172de055743099787318236304899f4",
    "transactionID": 248167
}
```

**Action:** redirect indicates that the API will return a redirectURL that must be consumed to continue the flow.


**Subsequent Authentications**

***Request Lookup***

```json
{
  "deviceChannel": "03",
  "threeRIInd": "81",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T22:53:21+00:00",
    "threeDSReqPriorRef": "e59f9e12-aaa5-4f29-a5ce-0acbb90fc2cb"
  },
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "1.00",
  "purchaseCurrency": "USD",
  "redirectURI": "https://www.placetopay.com/web",
  "reference": "February 2024",
  "billAddrCity": "Medellín",
  "billAddrCountry": "COL",
  "billAddrLine1": "Carrera 65 # 45 - 20",
  "billAddrPostCode": "050004",
  "billAddrState": "ANT",
  "email": "john.doe@evertecinc.com",
  "mobilePhone": {
      "cc": "57",
      "subscriber": "30011122333"
  },
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03) indicates the channel is 3RI

**threeRIInd:** 81 indicates an unscheduled card-on-file transaction

**threeDSReqPriorAuthMethod:** Method used by the cardholder for authentication.
- FRICTIONLESS_AUTHENTICATION(01) frictionless,
- CARDHOLDER_CHALLENGE_OCCURRED(02) with challenge, see the session for threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthTimestamp:** Date and time in UTC format of the prior authentication. The format is C, see the session for threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorRef:** The ID provided by the ACS in the previous transaction ***first authentication***, see the session for threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthData:** The ID provided by the DS in the previous **first authentication** transaction, if this data is not sent, 3DSS assigns it, see the session for threeDSRequestorPriorAuthenticationInfo data

**DAF Data:** the additional keys that need to be sent to apply the [DAF](/en/three-d-s-server/api/integration/session-d-a-f) with VISA are the following

* billAddrCity
* billAddrCountry
* billAddrLine1
* billAddrPostCode
* billAddrState
* email
* mobilePhone

<Note>
    Also consider the configurations described in the documentation of [DAF](/en/three-d-s-server/api/integration/session-d-a-f)
</Note>

***Response Lookup***


```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "d48e4da7-889c-41c1-82eb-a8dba4e58d44",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539V3",
    "acsTransID": "710adf8a-aaa2-43a1-9510-80edda02f347",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "b2255f0e-6bce-4a63-973c-396c03abe85d",
    "messageVersion": "2.2.0",
    "acsOperatorID": "10078025",
    "authenticationValue": "BpkCCAAhkgAAAABkhAJUdYknEmE=",
    "eci": "05",
    "messageExtension": [
        {
            "name": "DAF Extension",
            "id": "A000000003-003",
            "criticalityIndicator": false,
            "data": {
                "chAccReqID": "MUHZx0nojuVVAZJwPD4CWps0RuxUPxepI8sk57Yd/s4=",
                "authPayProcessReqInd": "01",
                "version": "1.0",
                "authPayCredStatus": "Y",
                "dafAdvice": "01"
            }
        }
    ],
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "03",
    "messageCategory": "PA",
    "authMethod": "01",
    "authTimestamp": "2024-09-10T22:56:48+00:00",
    "transactionID": 248168
}
```

**Action:** continue indicates that the API will return the authentication information, so no additional endpoints need to be consumed to continue the flow.


***Visa Payment (PA)***

PA Option: This option requires account funds verification. Assign a minimum example value, consider this value in the implementation.

***Request Lookup***

```json
{
  "deviceChannel": "02",
  "messageCategory": "01",
  "threeDSAuthenticationInd": "04",
  "threeDSChallengeInd": "04",
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "1.00",
  "purchaseCurrency": "USD",
  "redirectURI": "https://www.placetopay.com/web",
  "reference": "January 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** 02 - Browser

**messageCategory:** The value 01 corresponds to transaction of payment (PA)

**threeDSAuthenticationInd**, indicates the type of authentication. Value 04 corresponds to add card.

***Response Lookup***


```json
{
    "action": "redirect",
    "sessionToken": "ea515edd9d05e07ad58df6a96adf6b806172de055743099787318236304899f4",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86202/ea515edd9d05e07ad58df6a96adf6b806172de055743099787318236304899f4",
    "transactionID": 248168
}
```

**Action:** redirect indicates that the API will return a redirectURL that must be consumed to continue the flow.


**Subsequent Authentications**

***Request Lookup***

```json
{
  "deviceChannel": "03",
  "threeRIInd": "81",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T22:53:21+00:00",
    "threeDSReqPriorRef": "e59f9e12-aaa5-4f29-a5ce-0acbb90fc2cb"
  },
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "1.00",
  "purchaseCurrency": "USD",
  "redirectURI": "https://www.placetopay.com/web",
  "reference": "February 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03) indicates the channel is 3RI

**threeRIInd:** 81 indicates an unscheduled card-on-file transaction

**threeDSReqPriorAuthMethod:** Method used by the cardholder for authentication. 01 frictionless, 02 with challenge,  consult the session for threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthTimestamp:** Date and time in UTC format of the prior authentication. The format is C, consult the session for threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorRef:** The ID provided by the ACS in the previous transaction ***first authentication***, consult the session for threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthData:** The ID provided by the DS in the previous **first authentication** transaction, if this data is not sent, MPI assigns it, consult the session for threeDSRequestorPriorAuthenticationInfo data

***Response Lookup***


```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "d48e4da7-889c-41c1-82eb-a8dba4e58d44",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539V3",
    "acsTransID": "710adf8a-aaa2-43a1-9510-80edda02f347",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "b2255f0e-6bce-4a63-973c-396c03abe85d",
    "messageVersion": "2.2.0",
    "acsOperatorID": "10078025",
    "authenticationValue": "BpkCCAAhkgAAAABkhAJUdYknEmE=",
    "eci": "05",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "03",
    "messageCategory": "PA",
    "authMethod": "01",
    "authTimestamp": "2024-09-10T22:56:48+00:00",
    "transactionID": 248168
}
```

**Action:** continue indicates that the API will return the authentication information, so no additional endpoints need to be consumed to continue the flow.


***Visa Payment (PA) and DAF***

The implementation with [DAF](/en/three-d-s-server/api/integration/session-d-a-f) is optional.

PA Option: This option requires account funds verification. Assign a minimum example value, consider this value in the implementation.

***Request Lookup***

```json
{
  "deviceChannel": "02",
  "messageCategory": "01",
  "threeDSAuthenticationInd": "04",
  "threeDSChallengeInd": "04",
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "1.00",
  "purchaseCurrency": "USD",
  "redirectURI": "https://www.placetopay.com/web",
  "reference": "January 2024",
  "messageVersion": "2.2.0",
  "billAddrCity": "Medellín",
  "billAddrCountry": "COL",
  "billAddrLine1": "Carrera 65 # 45 - 20",
  "billAddrPostCode": "050004",
  "billAddrState": "ANT",
  "email": "john.doe@evertecinc.com",
  "mobilePhone": {
      "cc": "57",
      "subscriber": "30011122333"
  }
}
```

**deviceChannel:** 02 - Browser

**messageCategory:** The value 01 corresponds to transaction of payment (PA)

**threeDSAuthenticationInd**, indicates the type of authentication. Value 04 corresponds to add card.

**DAF Data:** the additional keys that need to be sent to apply the [DAF](/en/three-d-s-server/api/integration/session-d-a-f) with VISA are the following

* billAddrCity
* billAddrCountry
* billAddrLine1
* billAddrPostCode
* billAddrState
* email
* mobilePhone

<Note>
    Also consider the configurations described in the documentation of [DAF](/en/three-d-s-server/api/integration/session-d-a-f)
</Note>

***Response Lookup***


```json
{
    "action": "redirect",
    "sessionToken": "ea515edd9d05e07ad58df6a96adf6b806172de055743099787318236304899f4",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86202/ea515edd9d05e07ad58df6a96adf6b806172de055743099787318236304899f4",
    "transactionID": 248168
}
```

**Action:** redirect indicates that the API will return a redirectURL that must be consumed to continue the flow.


**Subsequent Authentications**

***Request Lookup***

```json
{
  "deviceChannel": "03",
  "threeRIInd": "81",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T22:53:21+00:00",
    "threeDSReqPriorRef": "e59f9e12-aaa5-4f29-a5ce-0acbb90fc2cb"
  },
  "acctNumber": "4931119220729333",
  "cardExpiryDate": "2902",
  "purchaseAmount": "1.00",
  "purchaseCurrency": "USD",
  "redirectURI": "https://www.placetopay.com/web",
  "reference": "February 2024",
  "billAddrCity": "Medellín",
  "billAddrCountry": "COL",
  "billAddrLine1": "Carrera 65 # 45 - 20",
  "billAddrPostCode": "050004",
  "billAddrState": "ANT",
  "email": "john.doe@evertecinc.com",
  "mobilePhone": {
      "cc": "57",
      "subscriber": "30011122333"
  },
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03) indicates the channel is 3RI

**threeRIInd:** 81 indicates an unscheduled card-on-file transaction

**threeDSReqPriorAuthMethod:** Method used by the cardholder for authentication. 01 frictionless, 02 with challenge,  consult the session for threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthTimestamp:** Date and time in UTC format of the prior authentication. The format is C, consult the session for threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorRef:** The ID provided by the ACS in the previous transaction ***first authentication***, consult the session for threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthData:** The ID provided by the DS in the previous **first authentication** transaction, if this data is not sent, MPI assigns it, consult the session for threeDSRequestorPriorAuthenticationInfo data

**DAF Data:** the additional keys that need to be sent to apply the [DAF](/en/three-d-s-server/api/integration/session-d-a-f) with VISA are the following

* billAddrCity
* billAddrCountry
* billAddrLine1
* billAddrPostCode
* billAddrState
* email
* mobilePhone

<Note>
    Also consider the configurations described in the documentation of [DAF](/en/three-d-s-server/api/integration/session-d-a-f)
</Note>

***Response Lookup***


```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "d48e4da7-889c-41c1-82eb-a8dba4e58d44",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539V3",
    "acsTransID": "710adf8a-aaa2-43a1-9510-80edda02f347",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "b2255f0e-6bce-4a63-973c-396c03abe85d",
    "messageVersion": "2.2.0",
    "acsOperatorID": "10078025",
    "authenticationValue": "BpkCCAAhkgAAAABkhAJUdYknEmE=",
    "eci": "05",
    "messageExtension": [
        {
            "name": "DAF Extension",
            "id": "A000000003-003",
            "criticalityIndicator": false,
            "data": {
                "chAccReqID": "MUHZx0nojuVVAZJwPD4CWps0RuxUPxepI8sk57Yd/s4=",
                "authPayProcessReqInd": "01",
                "version": "1.0",
                "authPayCredStatus": "Y",
                "dafAdvice": "01"
            }
        }
    ],
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "03",
    "messageCategory": "PA",
    "authMethod": "01",
    "authTimestamp": "2024-09-10T22:56:48+00:00",
    "transactionID": 248168
}
```

**Action:** continue indicates that the API will return the authentication information, so no additional endpoints need to be consumed to continue the flow.

---

***Mastercard No Payment (NPA)***

NPA Option: This option does not require account funds verification.

***Request Lookup***

```json
{
  "deviceChannel": "02",
  "messageCategory": "02",
  "threeDSAuthenticationInd": "04",
  "threeDSChallengeInd": "04",
  "acctNumber": "5180300000000005",
  "cardExpiryDate": "2902",
  "redirectURI": "https://www.placetopay.com/web",
  "reference": "MC_3DS_2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** 02 - Browser

**messageCategory:** The value 02 corresponds to transaction of No payment (NPA)

**threeDSAuthenticationInd**, indicates the type of authentication. Value 04 corresponds to add card.

***Response Lookup***


```json
{
    "action": "redirect",
    "sessionToken": "ea515edd9d05e07ad58df6a96adf6b806172de055743099787318236304899f4",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86203/ea515edd9d05e07ad58df6a96adf6b806172de055743099787318236304899f4",
    "transactionID": 248168
}
```

**Action:** redirect indicates that the API will return a redirectURL that must be consumed to continue the flow.


**Subsequent Authentications**

***Request Lookup***

```json
{
  "deviceChannel": "03",
  "threeRIInd": "11",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T22:53:21+00:00",
    "threeDSReqPriorRef": "e59f9e12-aaa5-4f29-a5ce-0acbb90fc2cb"
  },
  "acctNumber": "5180300000000005",
  "cardExpiryDate": "2902",
  "purchaseAmount": "1.00",
  "purchaseCurrency": "USD",
  "redirectURI": "https://www.placetopay.com/web",
  "reference": "February 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03) indicates the channel is 3RI

**threeRIInd:** 11 indicates other payments.

**threeDSReqPriorAuthMethod:** Method used by the cardholder for authentication. 01 frictionless, 02 with challenge,  consult the session for threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthTimestamp:** Date and time in UTC format of the prior authentication. The format is C, consult the session for threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorRef:** The ID provided by the ACS in the previous transaction ***first authentication***, consult the session for threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthData:** The ID provided by the DS in the previous **first authentication** transaction, if this data is not sent, MPI assigns it, consult the session for threeDSRequestorPriorAuthenticationInfo data

***Response Lookup***


```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "d48e4da7-889c-41c1-82eb-a8dba4e58d44",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539V3",
    "acsTransID": "710adf8a-aaa2-43a1-9510-80edda02f347",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "b2255f0e-6bce-4a63-973c-396c03abe85d",
    "messageVersion": "2.2.0",
    "acsOperatorID": "10078025",
    "authenticationValue": "BpkCCAAhkgAAAABkhAJUdYknEmE=",
    "eci": "02",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "03",
    "messageCategory": "PA",
    "authMethod": "01",
    "authTimestamp": "2024-09-10T22:56:48+00:00",
    "transactionID": 248168
}
```

**Action:** continue indicates that the API will return the authentication information, so no additional endpoints need to be consumed to continue the flow.


***Mastercard Payment (PA)***

PA Option: This option requires account funds verification. Assign a minimum example value, consider this value in the implementation.

***Request Lookup***

```json
{
  "deviceChannel": "02",
  "messageCategory": "01",
  "threeDSAuthenticationInd": "04",
  "threeDSChallengeInd": "04",
  "acctNumber": "5180300000000005",
  "cardExpiryDate": "2902",
  "purchaseAmount": "1.00",
  "purchaseCurrency": "USD",
  "redirectURI": "https://www.placetopay.com/web",
  "reference": "MC_3DS_2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** 02 - Browser

**messageCategory:** The value 01 corresponds to transaction of payment (PA)

**threeDSAuthenticationInd**, indicates the type of authentication. Value 04 corresponds to add card.

***Response Lookup***


```json
{
    "action": "redirect",
    "sessionToken": "ea515edd9d05e07ad58df6a96adf6b806172de055743099787318236304899f4",
    "redirectURL": "https://3dss-test.placetopay.com/threeds/v2x/sessions/86203/ea515edd9d05e07ad58df6a96adf6b806172de055743099787318236304899f4",
    "transactionID": 248168
}
```

**Action:** redirect indicates that the API will return a redirectURL that must be consumed to continue the flow.


**Subsequent Authentications**

***Request Lookup***

```json
{
  "deviceChannel": "03",
  "threeRIInd": "11",
  "threeDSRequestorPriorAuthenticationInfo": {
    "threeDSReqPriorAuthMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "threeDSReqPriorAuthTimestamp": "2024-09-10T22:53:21+00:00",
    "threeDSReqPriorRef": "e59f9e12-aaa5-4f29-a5ce-0acbb90fc2cb"
  },
  "acctNumber": "5180300000000005",
  "cardExpiryDate": "2902",
  "purchaseAmount": "1.00",
  "purchaseCurrency": "USD",
  "redirectURI": "https://www.placetopay.com/web",
  "reference": "February 2024",
  "messageVersion": "2.2.0"
}
```

**deviceChannel:** RI (03) indicates the channel is 3RI

**threeRIInd:** 11 indicates other payments.

**threeDSReqPriorAuthMethod:** Method used by the cardholder for authentication. 01 frictionless, 02 with challenge,  consult the session for threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthTimestamp:** Date and time in UTC format of the prior authentication. The format is C, consult the session for threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorRef:** The ID provided by the ACS in the previous transaction ***first authentication***, consult the session for threeDSRequestorPriorAuthenticationInfo data

**threeDSReqPriorAuthData:** The ID provided by the DS in the previous **first authentication** transaction, if this data is not sent, MPI assigns it, consult the session for threeDSRequestorPriorAuthenticationInfo data

***Response Lookup***


```json
{
    "action": "continue",
    "messageType": "ARes",
    "threeDSServerTransID": "d48e4da7-889c-41c1-82eb-a8dba4e58d44",
    "acsReferenceNumber": "3DS_LOA_ACS_EISF_020200_00539V3",
    "acsTransID": "710adf8a-aaa2-43a1-9510-80edda02f347",
    "dsReferenceNumber": "3DS_LOA_DIS_PPFU_020100_00010",
    "dsTransID": "b2255f0e-6bce-4a63-973c-396c03abe85d",
    "messageVersion": "2.2.0",
    "acsOperatorID": "10078025",
    "authenticationValue": "BpkCCAAhkgAAAABkhAJUdYknEmE=",
    "eci": "02",
    "transStatus": "Y",
    "whiteListStatusSource": "03",
    "whiteListStatus": "Y",
    "deviceChannel": "03",
    "messageCategory": "PA",
    "authMethod": "01",
    "authTimestamp": "2024-09-10T22:56:48+00:00",
    "transactionID": 248168
}
```

**Action:** continue indicates that the API will return the authentication information, so no additional endpoints need to be consumed to continue the flow.


---

## Retrieve the threeDSRequestorPriorAuthenticationInfo Data

To obtain the required data, you must initiate a CIT transaction as a **first authentication**. Afterwards, you can query the data from that transaction and use the information from threeDSRequestorPriorAuthenticationInfo in the MIT transaction.

***Request Lookup***

`GET` https://3dss-dev.placetopay.ws/api/v2x/transactions/{transactionID}

***Response Lookup***


```json
{
    "transStatus": "Y",
    "transStatusReason": null,
    "eci": "05",
    "acsTransID": "5d822226-d2ad-4a43-8270-87c95003dad4",
    "dsTransID": "5b3e6516-0a88-41a4-9c20-f97af2003acd",
    "threeDSServerTransID": "fbefea2f-2ae6-4a21-94cc-d7e5083f05a6",
    "sdkTransID": null,
    "authenticationValue": "AAICAImZhwAAAAAAAAEkdYR0cUU=",
    "messageVersion": "2.2.0",
    "authMethod": "CARDHOLDER_CHALLENGE_OCCURRED",
    "authTimestamp": "2024-05-03T22:48:06+00:00",
    "enrolled": "Y",
    "messageCategory": "NPA"
}
```

---

## Improve Authentication Rate with Additional Data
We are pleased to invite you to visit the [Additional Data](/en/three-d-s-server/api/sessions/detail-info) section in our API documentation. This section provides crucial information to optimize the 3DS authentication process.

Including this additional data in your requests allows issuers to perform a more accurate assessment, which can significantly improve the rate of successful authentications.

We recommend reviewing these guidelines to make the most of the API's features and thus offer your users a safer and more efficient experience.

