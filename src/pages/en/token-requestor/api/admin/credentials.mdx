export const description = 'credentials.';
import {ApiReader, CodeGroup, Col, Row} from "../../../../../components/mdx";
export const sectionMode = 'nav';
export const apiRefs = [
  '/api/admin/credentials/edit',
  '/api/admin/credentials/delete',
  '/api/admin/credentials/index',
  '/api/admin/credentials/show',
  '/api/admin/credentials/create'
];

# Credentials

The Administrative Credentials API is designed to manage the credentials used by processors within the systemâ€™s administrative environment.
These credentials are required to interact with protected services, as they contain authentication values.

With this API, it is possible to register new credentials, query them by login, update them with new parameters, delete them when no longer needed, and list them using filters.
Credentials are associated with the `PROCESSOR` role.

<Note> All operations require authentication using valid credentials; more details are available in the authentication section of this documentation. </Note>

### Available Permissions

| Name         | Value                 |
|--------------|------------------------|
| Tokenization | `TOKENIZATION_PROCESS` |

### Default System Roles

| Case           | Role        | Limitation                            | Relationship                                               | Description                                                                                   | Permissions             |
|----------------|-------------|----------------------------------------|------------------------------------------------------------|-----------------------------------------------------------------------------------------------|--------------------------|
| Merchant/Site  | `PROCESSOR` | Operational only. Cannot manage data. | Specifies its consumer and associated sites (INCLUDE)      | Can only generate tokens and cryptograms. No management actions allowed.                     | `TOKENIZATION_PROCESS`   |

---

## Credential Creation

This endpoint allows the creation of new access credentials associated with consumers or sites.
Generated credentials can be used to access protected services according to their role and ACL (Access Control List) restrictions.
Only users with specific administrative permissions can invoke this operation.
Credentials may have the `PROCESSOR` role, each with different requirements and restrictions.
Creation is performed securely by randomly assigning the login and `secretKey`, and registering `INCLUDE`-type ACL rules for the allowed resources.

<Row>
  <Col>
    <ApiReader
      path="/api/admin/credentials/create"
      method="post"
      api={props.refs}
    />
  </Col>

  <Col sticky>
    <br />
    <CodeGroup title="Request" tag="POST" label="/api/admin/credential/create">
      ```bash {{ title: 'Create Credential' }}
      curl -X "POST" https://token-requestor.placetopay.ws/api/admin/credential/create \
      -H "Content-Type: application/json" \
      -d '{
        "auth": {
           "login":"1441d14df19ec88431e513bb990326e1",
           "tranKey":"DGYymv6ohpYwtLWon/iADE/COoo9JXt4jqyk6D006PY=",
           "nonce":"enQ4dXh3YWhkMWM=",
           "seed":"2023-06-21T09:56:06-05:00"
        },
        "data": {
          "name": "Wallet placetopay",
          "description": "Credential for wallet placetopay",
          "role": "PROCESSOR",
          "restrictions": {
            "sites": [
              "34227455-2fe8-4596-8999-9c249dec618a"
            ],
            "consumers": [
              "f5ff8bb0-1db9-433b-8d66-e20ebcbd12ae",
              "06a58597-c416-48d6-a7e1-f5a546b91858"
            ]
          }
        }
      }'
      ```
    </CodeGroup>
  </Col>
</Row>

<Row>
  <Col>
    <ApiReader
      path="/api/admin/credentials/create"
      method="post"
      type="response"
      api={props.refs}
    />
  </Col>

  <Col sticky>
    <br />
    <CodeGroup title="Response">
      ```json {{ title: 'Successful Response' }}
      {
        "status": {
          "status": "OK",
          "reason": "00",
          "message": "The request has been successfully processed"
        },
        "data": {
          "login": "06c258dfab64db74352680fbdc224ffe",
          "secretKey": "ptvCmJF7KgwGmYmL",
          "restrictions": {
            "sites": [
              "34227455-2fe8-4596-8999-9c249dec618a"
            ],
            "consumers": [
              "f5ff8bb0-1db9-433b-8d66-e20ebcbd12ae",
              "06a58597-c416-48d6-a7e1-f5a546b91858"
            ]
          }
        }
      }
      ```
    </CodeGroup>
  </Col>
</Row>

## Credential Query

This operation retrieves the details of a previously generated credential by its login.
It returns all configured attributes, including role, description, status (`isEnabled`), and restrictions.

<Row>
  <Col>
    <ApiReader
      path="/api/admin/credentials/show"
      method="post"
      api={props.refs}
    />
  </Col>

  <Col sticky>
    <br />
    <CodeGroup title="Request" tag="POST" label="/api/admin/credential/show">
      ```bash {{ title: 'Query Credential by Login' }}
      curl -X "POST" https://token-requestor.placetopay.ws/api/admin/credential/show \
      -H "Content-Type: application/json" \
      -d '{
         "auth": {
            "login":"1441d14df19ec88431e513bb990326e1",
            "tranKey":"DGYymv6ohpYwtLWon/iADE/COoo9JXt4jqyk6D006PY=",
            "nonce":"enQ4dXh3YWhkMWM=",
            "seed":"2023-06-21T09:56:06-05:00"
        },
        "login": "06c258dfab64db74352680fbdc224ffe"
      }'
      ```
    </CodeGroup>
  </Col>
</Row>

<Row>
  <Col>
    <ApiReader
      path="/api/admin/credentials/show"
      method="post"
      type="response"
      api={props.refs}
    />
  </Col>

  <Col sticky>
    <br />
    <CodeGroup title="Response">
      ```json {{ title: 'Successful Response' }}
      {
        "status": {
          "status": "OK",
          "reason": "00",
          "message": "The request has been successfully processed",
          "date": "2025-07-22T14:01:00+00:00"
        },
        "data": {
          "login": "06c258dfab64db74352680fbdc224ffe",
          "name": "PTP Credential",
          "description": "Credential for PlacetoPay wallet",
          "role": "PROCESSOR",
          "restrictions": {
            "consumers": [
              "34227455-2fe8-4596-8999-9c249dec618a"
            ],
            "sites": []
          },
          "isEnabled": true,
          "createdAt": "2025-07-09 15:45:05",
          "updatedAt": "2025-07-09 15:45:05"
        }
      }
      ```
    </CodeGroup>
  </Col>
</Row>

## Credential Update

Allows modifying the configurable attributes of an existing credential.
You can update the name, description, role, status (`isEnabled`), and restrictions (consumers, sites, and advanced ACLs).
`login` and `tranKey` cannot be modified.

<Note type='warning'>
If the `restrictions` field is sent, it will replace the current restrictions of the credential. This means existing restrictions will be deleted and new ones will be created.
</Note>

<Row>
  <Col>
    <ApiReader
      path="/api/admin/credentials/edit"
      method="post"
      api={props.refs}
    />
  </Col>

  <Col sticky>
    <br />
    <CodeGroup title="Request" tag="POST" label="/api/admin/credentials/edit">
      ```bash {{ title: 'Edit Credential' }}
      curl -X "POST" https://token-requestor.placetopay.ws/api/admin/credentials/edit \
      -H "Content-Type: application/json" \
      -d '{
         "auth": {
            "login":"1441d14df19ec88431e513bb990326e1",
            "tranKey":"DGYymv6ohpYwtLWon/iADE/COoo9JXt4jqyk6D006PY=",
            "nonce":"enQ4dXh3YWhkMWM=",
            "seed":"2023-06-21T09:56:06-05:00"
        },
        "credential": {
          "login": "06c258dfab64db74352680fbdc224ffe",
          "name": "Updated Name",
          "email": "newemail@example.com",
          "ipAddress": "10.0.0.1",
          "isEnabled": true,
          "restrictions": {
              "consumers": ["34227455-2fe8-4596-8999-9c249dec618a", "893246327-2fe8-4596-8999-9c249dec872b"],
              "sites": ["34227455-2fe8-4596-8999-9c249dec618a"]
          }
        }
      }'
      ```
    </CodeGroup>
  </Col>
</Row>

<Row>
  <Col>
    <ApiReader
      path="/api/admin/credentials/edit"
      method="post"
      type="response"
      api={props.refs}
    />
  </Col>

  <Col sticky>
    <br />
    <CodeGroup title="Response">
      ```json {{ title: 'Successful Response' }}
      {
        "status": {
          "status": "OK",
          "reason": "00",
          "message": "The request has been successfully processed",
          "date": "2025-07-22T14:01:00+00:00"
        },
        "data": {
           "id": "0197efdc-aac3-7394-8f35-f0ce1e244c2c"
        }
      }
      ```
    </CodeGroup>
  </Col>
</Row>

## Credential Deletion

Deletes a credential from the system using its login.
This operation is irreversible and requires administrative privileges.

<Row>
  <Col>
    <ApiReader
      path="/api/admin/credentials/delete"
      method="post"
      api={props.refs}
    />
  </Col>

  <Col sticky>
    <br />
    <CodeGroup title="Request" tag="POST" label="/api/admin/credentials/delete">
      ```bash {{ title: 'Delete Credential' }}
      curl -X "POST" https://token-requestor.placetopay.ws/api/admin/credentials/delete \
      -H "Content-Type: application/json" \
      -d '{
         "auth": {
            "login":"1441d14df19ec88431e513bb990326e1",
            "tranKey":"DGYymv6ohpYwtLWon/iADE/COoo9JXt4jqyk6D006PY=",
            "nonce":"enQ4dXh3YWhkMWM=",
            "seed":"2023-06-21T09:56:06-05:00"
        },
        "login": "06c258dfab64db74352680fbdc224ffe"
      }'
      ```
    </CodeGroup>
  </Col>
</Row>

<Row>
  <Col>
    <ApiReader
      path="/api/admin/credentials/delete"
      method="post"
      type="response"
      api={props.refs}
    />
  </Col>

  <Col sticky>
    <br />
    <CodeGroup title="Response">
      ```json {{ title: 'Successful Response' }}
      {
        "status": {
          "status": "OK",
          "reason": "00",
          "message": "The request has been successfully processed",
          "date": "2025-07-09T15:47:14+00:00"
        }
      }
      ```
    </CodeGroup>
  </Col>
</Row>

## List Credentials

Lists registered credentials with support for filtering and pagination.
You can filter by name, role, sites, consumers, or creation date range.

<Row>
  <Col>
    <ApiReader
      path="/api/admin/credentials/index"
      method="post"
      api={props.refs}
    />
  </Col>

  <Col sticky>
    <br />
    <CodeGroup title="Request" tag="POST" label="/api/admin/credentials">
      ```bash {{ title: 'List Credentials' }}
      curl -X "POST" https://token-requestor.placetopay.ws/api/admin/credentials \
      -H "Content-Type: application/json" \
      -d '{
        "auth": {
           "login":"1441d14df19ec88431e513bb990326e1",
           "tranKey":"DGYymv6ohpYwtLWon/iADE/COoo9JXt4jqyk6D006PY=",
           "nonce":"enQ4dXh3YWhkMWM=",
           "seed":"2023-06-21T09:56:06-05:00"
        },
        "filters": {
          "role": "PROCESSOR"
        },
        "page": {
          "number": 1,
          "size": 10
        }
      }'
      ```
    </CodeGroup>
  </Col>
</Row>

<Row>
  <Col>
    <ApiReader
      path="/api/admin/credentials/index"
      method="post"
      type="response"
      api={props.refs}
    />
  </Col>

  <Col sticky>
    <br />
    <CodeGroup title="Response">
      ```json {{ title: 'Successful Response' }}
      {
        "status": {
          "status": "OK",
          "reason": "00",
          "message": "The request has been successfully processed",
          "date": "2025-07-09T15:48:00+00:00"
        },
        "data": [
          {
            "login": "06c258dfab64db74352680fbdc224ffe",
            "name": "PTP Credential",
            "role": "PROCESSOR",
            "isEnabled": true,
            "createdAt": "2025-07-09 15:45:05",
            "updatedAt": "2025-07-09 15:46:27"
          }
        ],
        "links": {
          "first": "/admin/credentials?page=1",
          "last": "/admin/credentials?page=1",
          "prev": null,
          "next": null
        },
        "meta": {
          "current_page": 1,
          "from": 1,
          "last_page": 1,
          "path": "/admin/credentials",
          "per_page": 10,
          "to": 1,
          "total": 1
        }
      }
      ```
    </CodeGroup>
  </Col>
</Row>
