# Actions
The administrator will have access to several modules that allow them to manage the system, create and manage other users, and perform various actions.

<Note>
    It is important to note that the administrator will not be able to create, cancel, authorize, or pay declared taxes. The administrator user will only be able to view and download tax returns, according to the default settings. The settings can be changed to add or remove permissions for administrator users.
</Note>

The following explains how the system works without modifying permissions and how these permissions can be edited to change the default system settings.

## Companies
The companies module allows you to manage organizations and the tax-paying users that belong to them. You can also define the permissions these users will have within the company.
<img src="/Selfdeclarations/Admin_user/companies.png"/>

The actions are:

### Create

To create a company within the system, click **Create Company** located in the upper right corner of the module, above the table or list.

The form will then open with the data to register the company. Enter all the requested data and finish by clicking **Save**.
<img src="/Selfdeclarations/Admin_user/companies_options_create.png"/>

**It is important to note:**

- *A company can have several types of associated declarations*
- *An inactive company cannot use the platform's features*
- *Two companies cannot have the same document number in the system*

### View
The **View** action will display detailed company information and allow you to perform other actions.

To view a record, press the **View** action, located in the **"Options"** column of the table or list.

<img src="/Selfdeclarations/Admin_user/companies_options_view.png"/>
The company's basic information will be displayed, and tabs will be available from which you can: create another company, edit an existing one, create authorization files, associate users, and add declarants for the company (These actions will be explained later).
<img src="/Selfdeclarations/Admin_user/companies_options_view_tabs.png"/>

**Create authorization files:** This document type allows system administrators to create and manage users. The file type must be: pdf, doc, docx, xls, xlsx, jpeg, jpg, bmp, png or tiff.

When a user is associated with a company, it is possible to add a document that supports linking that user to the organization by selecting the support file.

### Edit
This action will allow you to modify the data entered when creating the company.

To edit a record, click **Edit**, located in the **"Options"** column of the table or list.
<img src="/Selfdeclarations/Admin_user/companies_options_edit.png"/>

The same form used to create the company will open, with the fields already filled in. You can modify and save the changes there.

### Associate Authorized User
This action allows you to define the users who will have access to certain functions within the company. To associate a user with a company, they must first be created in the Authorized Users module.

To link a user to a company that was previously created in the system, click **Authorized User** located in the **"Options"** column of the table or list.
<img src="/Selfdeclarations/Admin_user/companies_options_assoc_bidder.png"/>

The list of already associated users will open.

To associate a user, press the **Associate Authorized User** button.

The form for adding the user will be enabled. From the same form, you can define the user's role or position within the company. This could be a tax auditor, a public accountant, or others. You can also determine whether or not the user has permission to authorize declarations for that company.

Enter the information and save the entry by clicking **Save**.
<img src="/Selfdeclarations/Admin_user/companies_options_assoc_bidder_form.png"/>

<Note>
    It's important to note that this is where all the declarations they must submit within a company are associated with a user.
</Note>

<Note>
    It is also important to note that for the same number of declarants as the declaration settings in the **Number of authorizations required** field, the company must associate the same number of users with **declaration authorizer** privileges with the corresponding position, such as:

    - *Fiscal Auditor and/or*
    - *Public Accountant*
    - *Legal Representative*

    In this same order, the declaration can be signed so that payment can be made by a legal representative, unless only one person is configured in the **Number of authorizations required**, where anyone with **declaration authorizer** privileges can pay. Otherwise, the system will not allow the declarant to make the payment.
</Note>

Once the record is saved, the system will send an email to the user. From there, the user must log in and click **Complete registration**.

<img src="/Selfdeclarations/Admin_user/asso_bidder_registration_email.png"/>
The user must enter the registration information and create a password. The password will allow them to log in and will also be requested when performing actions on the company's declarations. It is clarified that the user will not be able to log in to the system until they are associated with at least one company. To finish, the user presses **Complete Registration**.

If the user was already associated with a company, they will not be prompted to create another password when completing the registration process. Instead, they will be directed to log in with the password they created when they first associated with a company.
<img src="/Selfdeclarations/Admin_user/asso_bidder_registration_form.png"/>

If we return to the list of already associated users, we can see other actions available for those users within the company:
<img src="/Selfdeclarations/Admin_user/companies_assoc_bidder_options.png"/>

- **Reset password:** Clicking this action will send an email to the email address associated with the user, allowing them to reset their password.
- **Activate/Deactivate user:** This action deactivates a user's functions within the company. If the user is associated with other companies, they can continue to perform their functions in companies where they are not deactivated.
- **View user details:** This action will display a window with the associated user's main information and their permissions within the company.
- **Edit record:** This action will allow the user to modify the associated user's information or permissions.
- **Delete record:** This action will only be available if the user has not completed registration. This option will delete the record and will not allow the user to complete the process, even if they have received the email.

### Delete Record

This option allows you to disassociate an authorized user from a company.

To delete a record, click the **Delete Record** action, located in the **"Options"** column of the table or list.

<img src="/Selfdeclarations/Admin_user/companies_options_delete.png"/>
When you click **Delete Record**, an alert message will appear to confirm the action. Clicking **Confirm** will delete the selected record.

## Authorized Users
This module allows you to manage the users who will later be associated with companies.
<img src="/Selfdeclarations/Admin_user/bidders.png"/>

Within the module, you can perform the following functions:

### Create
To create declaring or authorized users, go to the top right corner and click **Create Authorized User**.

The system will enable the form to register the user's information.
<img src="/Selfdeclarations/Admin_user/bidders_create_form.png"/>

Once the information is completed, click **save** to create the user. Please note that created users will not be accessible until they are associated with a company.

### Reset Password
This option will be available for all created users, but if the password is reset for a user who is not yet associated with a company, they will not be able to log in until they are associated.

To reset the password, the user must click the **Reset Password** option, located in the **"Options"** field of the table or list.
<img src="/Selfdeclarations/Admin_user/bidders_options_reset_pass.png"/>

Click **Confirm** in the alert pop-up window.

An email will be sent to the user's associated email address with the option to **Reset Password**.

The system will open a form. Enter the information and click the **Confirm Password Reset** button.

### View
Allows you to access detailed user information. This is accessed from View, located in the "Options" field of the table or list.
<img src="/Selfdeclarations/Admin_user/bidders_options_view.png"/>

### Edit
This action allows you to modify the data with which the user was initially created. When a user is blocked due to excessive password attempts, for example, they can be unblocked from the user status field.

This can be accessed by clicking the **edit (pencil)** action, which is located in the **"Options"** field of the table or list.

<img src="/Selfdeclarations/Admin_user/bidders_options_edit.png"/>
<img src="/Selfdeclarations/Admin_user/bidders_options_edit_form.png"/>

### Delete
This action will allow you to delete a created user as long as they are not associated with a company. When the user is associated with a company, this option will be disabled.

To delete a record, click the **Delete Record** action, located in the **"Options"** column of the table or list.

<img src="/Selfdeclarations/Admin_user/bidders_options_delete.png"/>
When you click the action, an alert message will appear to confirm the action. Click **Confirm** to complete the deletion of the selected record.

## Upload Files
This module allows you to create a group of authorized users or companies using a flat file.

<img src="/Selfdeclarations/Admin_user/file_uploads.png"/>
To upload a file, select the **Upload Flat File** option.

The form will open from which you can select the file to upload. Document requirements will vary depending on whether you need to create companies or users.
<img src="/Selfdeclarations/Admin_user/load_file_form.png"/>

Select the file that should contain the following fields according to what you want to create:

- **User Registration:**
    - COMPANY_DOCUMENT_TYPE: Company ID type
    - COMPANY_DOCUMENT: Company ID number
    - STATUS: Registration status
    - DOCUMENT_TYPE: Document type
    - DOCUMENT: Document number
    - NAME: First name of the authorized user
    - SURNAME: Last name of the authorized user
    - EMAIL: Email address of the authorized user
    - TELEPHONE: Telephone number
    - ADDRESS: Address
    - INCOME_TYPE: Type of income to be managed
    - BIDDER_POSITION: Position/Job title
    - PROFESSIONAL_CARD: Professional card of the authorized user
- **Company Registration:**
    - STATUS: Registration status
    - DOCUMENT_TYPE: Document type
    - DOCUMENT: Document number
    - LEGAL_NAME: Company name
    - COMMERCIAL_NAME: Business name
    - TELEPHONE: Telephone number
    - ADDRESS: Address
    - ITY: City
    - STATE: Department
    - COUNTRY: Country
    - INCOME_TYPE: Type of income to be managed

<Note>
    Files must always be of type: CSV or TSV.
</Note>

To complete the process, press **Upload**. If the file meets the specified conditions, the system will create the records.

## List of declarations
In the list of declarations, you can find the types of declarations that companies have created. These lists will have the same actions available.

<img src="/Selfdeclarations/Admin_user/all_incomes_taxes_lists.png"/>

<Note>
    The administrator does not have permissions to create, edit, approve, or pay declarations. The administrator will only be able to view and download the declarations in PDF format.
</Note>

<img src="/Selfdeclarations/Admin_user/all_incomes_company_register.png"/>

### View
Within the **View** action, the administrator can access more detailed information about the declarations.

To access it, click **View**, located in the **"Options"** column of the table or list.
<img src="/Selfdeclarations/Admin_user/all_incomes_options_view.png"/>

In **View**, you can see several tabs with information about the declaration.

- **Company Registration Tax:** Here you can find detailed information about the declaration, such as: status, total due, among others.
    <img src="/Selfdeclarations/Admin_user/all_income_options_view_company_register.png"/>

- **List of Authorizers:** This option displays the users who authorized the declaration.
    <img src="/Selfdeclarations/Admin_user/all_incomes_options_view_signers.png"/>

- **Actions List:** Here you can see all the company's transactions, such as who created the declaration and when, who authorized it, when and who paid it, among other things.
    <img src="/Selfdeclarations/Admin_user/all_incomes_options_view_actions.png"/>

### Download
This option allows you to download the declaration in PDF format. You can do this by clicking **Download** in the **"Options"** column of the table or list.
<img src="/Selfdeclarations/Admin_user/all_incomes_options_download.png"/>

## Parameterization
This module allows the administrator to configure the system's parameters as desired. It is important to note that this configuration will be applied to all associated companies, meaning all companies will have the same settings, and making changes will affect all companies.

### General Settings
Here you can configure general parameters, such as:

- **Currency Type:** The currency used by the system.
- **User Auto-Unlock Time:** The time after which a locked user is automatically unlocked.
- **Inactivity Lockout Time:** After remaining inactive in the system for this estimated time, the system will automatically log you out.
- **Authentication Attempts Allowed for Account Lockout:** This is the number of login attempts users will have to authenticate. If this number is exceeded, the account will be automatically locked.
- **Number of File Upload Attempts:** This field represents the number of attempts allowed to upload a file.
- **Number of days to enable password changes:** After resetting a password, it cannot be reset again until the number of days parameterized in this field has elapsed.
- **Number of days until password expiration:** After this number of days has elapsed, users will be prompted to change their password for security reasons.
- **Maximum and minimum password character length:** This option allows you to define the minimum and maximum length of passwords.
- **Number of passwords to remember:** This number of passwords is the number the system will store in the database so that, when resetting a password, the same password is not used.
- **Password conditions:** These are the conditions that passwords must meet for the system to accept them.

<img src="/Selfdeclarations/Admin_user/settings_configurations.png"/>

### Declarations
From here you can view and modify the types of declarations or taxes supported by the system.

<img src="/Selfdeclarations/Admin_user/settings_incomes.png"/>

- **View:**
    To view a record, click **View** in the **"Options"** column of the table or list. Clicking **View** will open a screen with two tabs. The first will display the main information for the type of declaration or tax.
    <img src="/Selfdeclarations/Admin_user/settings_incomes_options_view_incomes.png"/>

    The second tab will display the list of companies associated with the selected tax.
    <img src="/Selfdeclarations/Admin_user/settings_incomes_options_view_companies.png"/>

- **Edit:**
    This option allows you to change basic tax data and settings, such as: status changes, number of authorizations, whether you have a multi-credit account, among others. To edit a record, press **Edit**. In the **"Options"** column of the table or list, a screen will open where you can view and modify fields. To save the changes, click **Save**.
    <img src="/Selfdeclarations/Admin_user/settings_incomes_options_edit_screen.png"/>

    The multi-credit option for taxes or declarations is available in this module. When enabled, a menu will appear as shown in the following image.
    <img src="/Selfdeclarations/Admin_user/settings_income_options_edit_multicredit.png"/>

    Enabling the **Multi-credit** field will generate an empty record in which you must complete the fields and then save the changes. To add more than one item, click the **Add** button, which will enable another record. When you finish editing, click the **Save** button to apply the changes.

### Document Types
This option allows you to add, modify, and delete all document types managed by the system, with the exception of the Citizen ID and NIT, which can only be modified.

<img src="/Selfdeclarations/Admin_user/settings_doc_types.png"/>
Within this module, you can perform the following actions:

- **Create:**
    This action allows you to create a new document type within the system. To create a record, click **Create Document Types**, located in the upper right corner, above the table or list.

    The creation form will open, where you must enter a name and alias, and you can choose whether to set it as the default or not. Finally, save the document type.
    <img src="/Selfdeclarations/Admin_user/settings_doc_types_options_create_form.png"/>

- **View:**
    This option will open a screen from which you can perform other actions (create, edit, and delete) and also view the record's detailed data. To view a record, click **View** in the **"Options"** column of the table or list.
    <img src="/Selfdeclarations/Admin_user/settings_doc_types_options_view_screen.png"/>

- **Edit:**
    Allows you to modify the information entered in the document type when it was created. To edit a record, click **Edit** in the **"Options"** column of the table or list. The form will open, from which you can modify the data, and to save changes, click the **Save** button.
    <img src="/Selfdeclarations/Admin_user/settings_doc_types_options_edit_form.png"/>

- **Delete:**
    This option will completely delete the document type from the system, with the exception of Citizen ID and NIT, which cannot be deleted. To delete a record, click **Delete** in the **"Options"** column of the table or list. A warning message will appear to confirm the action; confirming this deletes the record. Please note that for the system to allow deletion of a document type, it cannot be associated with a user.
    <img src="/Selfdeclarations/Admin_user/delete_warning_message.png"/>

### Positions/Job Titles
This module allows you to manage the positions that users will hold within companies.
<img src="/Selfdeclarations/Admin_user/settings_positions.png"/>

The following actions can be performed:

- **Create:**
    Allows you to create positions or job titles that users will hold within the companies with which they are associated. To create a record, click **Create Positions**, located in the upper right corner, above the table or list.

    A screen will open with the form for creating positions. To finish, enter the data and click Save.
    <img src="/Selfdeclarations/Admin_user/settings_positions_options_create_form.png"/>

- **View:**
    Allows you to view the details of the position or job title. Click **View** in the **"Options"** column of the table or list. A screen with two tabs will open. The first will display the record's basic information, and the second will show the positions held by users in the companies.
    <img src="/Selfdeclarations/Admin_user/settings_positions_options_view_position.png"/>
    <img src="/Selfdeclarations/Admin_user/settings_positions_options_view_bidders.png"/>

- **Edit:**
    Allows you to modify the basic information entered when creating the record. Use the **Edit** option, located in the **"Options"** of the table or list.
    <img src="/Selfdeclarations/Admin_user/settings_positions_options_edit_form.png"/>

- **Delete:**
    Allows you to delete a position or job title from the system, as long as no user currently holds that position in any company. To delete a record, click **Delete**, located in the **"Options"** column of the table or list. An alert message will appear to confirm the action. Once confirmed, the record is deleted.

## Security
### Administrator Users
This module allows you to manage administrator users, including the user itself. The functionalities are the same and are managed in the same way as those previously mentioned in **Authorized User**.
<img src="/Selfdeclarations/Admin_user/security_users.png"/>

The actions are as follows:

- **Create:**
    To create a record, click **Create User**, located in the upper right corner, above the table or list.

    A screen will open with the user creation form. Enter the data and click Save to finish.
    <img src="/Selfdeclarations/Admin_user/security_users_options_create_form.png"/>

    <Note>
        It is clarified that the system does not allow creating two users with the same email address.
    </Note>

- **Reset Password:**
    To reset a password, select the **Reset Password** option in the **"Options"** column of the table or list. An alert message will appear requesting confirmation.
    To finish, press **Confirm**. An email will then be sent to the associated address to execute the password change.

- **View:**
    To view a record, click **View** in the **"Options"** column of the table or list. A screen with several tabs will open. The first tab will display the user's basic information. The second tab will allow you to assign the user roles and permissions.
    <img src="/Selfdeclarations/Admin_user/security_users_options_view_users.png"/>
    <img src="/Selfdeclarations/Admin_user/security_users_options_view_roles.png"/>

- **Edit:**
    To edit a record, click **Edit**, located in the **"Options"** column of the table or list. A screen will open where you can modify the data with which the user was created.
    <img src="/Selfdeclarations/Admin_user/security_users_options_edit_form.png"/>

- **Delete:**
    This action will not be available for the default administrator user; any other administrator users created can be deleted later. To delete a record, click **Delete**, in the **"Options"** column of the table or list. An alert message will appear confirming the request. To finish, select the **Confirm** button.

### API Clients
This module will allow external clients to integrate with the self-declaration platform by consuming a web service. Any user can integrate into the system through the interface, through flat files, or through the web service (API).
<img src="/Selfdeclarations/Admin_user/security_api.png"/>

- **Create:**
    To create an API user, go to **Create API Clients**, located in the upper right corner, above the table or list.

    The API client creation form will open. Enter the requested information and click **Save** to finish.
    <img src="/Selfdeclarations/Admin_user/security_api_create_form.png"/>

    When you save the information, an email will be sent with the information to access the services (username and password). Within the email, you will find the option **Our API** where you can log in and use the web services.
    <img src="/Selfdeclarations/Admin_user/security_api_create_email.png"/>

- **Reset Password:**
    This action will generate new authentication data for the user. These will be sent to the email address in the same way as when creating the user. To **Reset Password**, click this option, located under **"Options"** in the table or list.

- **View:**
    This action allows you to view more information about the record. This option will open a screen with two tabs. In the first tab, you can see the detailed information about the record, and in the second tab, you can manage the user's permissions within the API web service. To view the details of an API user, click **View**, located in the **"Options"** column in the table or list.
    <img src="/Selfdeclarations/Admin_user/security_api_view_tab1.png"/>
    <img src="/Selfdeclarations/Admin_user/security_api_view_tab2.png"/>

- **Edit:**
    This option allows you to modify the data entered when the user was created. To edit a user, click the **Edit** action, which is located in the **"Options"** column in the table or list.
    <img src="/Selfdeclarations/Admin_user/security_api_edit_form.png"/>

### Roles and Permissions
This module allows you to manage different types of roles and their permissions. It is important to note that only administrator users can have these roles and their respective permissions; declaring users cannot be assigned these roles within the system.
<img src="/Selfdeclarations/Admin_user/security_roles_permissions.png"/>

- **Create:**
    To create a record, click **Create Roles**, located in the upper right corner, above the table or list. A screen will open requesting the data to create the role. After entering the data, save the information to complete the creation.
    <img src="/Selfdeclarations/Admin_user/security_roles_permissions_options_create_form.png"/>

- **View:**
    This option allows you to perform different actions. To view a record, click the **View** action, located in the **"Options"** column of the table or list. A screen with several tabs will open:

        - In the first tab, you can see the basic information about the role in detail.
        <img src="/Selfdeclarations/Admin_user/security_roles_permissions_options_view_rol.png"/>

        - In the second tab, the following actions will be available:
            - **Add a permission:** Click the search box next to the **Add** button, then select the permission(s), and then click the **Add** button. Clicking the button will automatically save the changes and display the added permissions in the records in the table or list.
            - **Deactivate or activate a role permission:** In the **"Options"** column, there is an action called **Deny?**. Clicking on this action disables that permission within the role and changes the action to **Enable?**. Clicking on it reactivates the role permission.
            - **Delete a permission:** This action, unlike the previous one, does not activate or deactivate it, but rather deletes the permission from the user. This action is recommended when you know that the user will not need that permission again. If you know that the permission will likely be needed again soon, it is better to use the **Disable?**/Enable?** action.
        <img src="/Selfdeclarations/Admin_user/security_roles_permissions_options_view_permissions.png"/>

        - The third tab displays all the users associated with that role.
        <img src="/Selfdeclarations/Admin_user/security_roles_permissions_options_view_users.png"/>

## Action Log
This module allows the user to view in detail all actions performed in the system by any type of user, for example, what a user performed in the system, when, whether changes or queries were made, among others.
<img src="/Selfdeclarations/Admin_user/history_logs_records.png"/>

In this module, the following actions can be performed:

- **View:**
    Log information can be viewed in more detail by clicking **View**, located in the **"Options"** column of the table or list.
    <img src="/Selfdeclarations/Admin_user/history_logs_records_options_view_screen.png"/>

- **Export to CSV:**
    The user can download a CSV file containing all the logs of the actions performed in the system. To export the file, click **Export to CSV**, located at the bottom of the screen, below the table.
    <img src="/Selfdeclarations/Admin_user/history_logs_records_options_export.png"/>

- **Delete:**
    This option will allow the user to delete the entire history of actions performed. To delete the entire history, click **Delete**, located at the bottom of the screen, below the table.
    <img src="/Selfdeclarations/Admin_user/history_logs_records_options_delete.png"/>

    Clicking **Delete** will generate an alert message to confirm the action. If the user is sure of their decision, they should confirm the request.
