import { HeroPattern } from '@/components/HeroPattern'

<HeroPattern />

export const apiRefs = ['/autopay/balance']

## Check amount to be charged {{ id: 'balance', tag: 'POST', label: '{{baseURL}}/autopay/balance' }}

<Note type="warning">
    **baseURL**: This is the base URL of the client/merchant application, which must be provided by the merchant and configured during the AutoPay onboarding process.
</Note>

<Note type="warning">
    **Authentication (Basic Authentication):** This endpoint requires authentication via the `Authorization` header.
    The merchant must validate the credentials configured for AutoPay on each incoming request. See more at [**Contract authentication**](/autopay/contract-authentication).
</Note>

<Row>
    <Col>
      This endpoint allows retrieving the amount that must be charged for an AutoPay.
      It returns two values:

      - **amount:** total amount to be charged in the current cycle.
      - **min_amount:** minimum amount required to execute the charge.

      It can be used to validate whether there are pending amounts before starting a payment or automatic reconciliation process.
        <ApiReader
            path="/autopay/balance"
            method="POST"
            api={props.refs}
        />
    </Col>
    <Col sticky={true}>
     <CodeGroup title="Solicitud" tag="POST" label="{{baseURl}}/autopay/balance">
 ```bash {{ title: 'Obtener balance' }}
        curl -X "POST" {{baseURl}}/autopay/balance \
        -H "Content-Type: application/json" \
        -H "Authorization: Basic <base64(username:password)>" \
        -d '{
            "reference": "ACC00012345",
            "id": "2972c13d-6315-4da3-80d7-64c24eb232ad"
        }'
  ```
        </CodeGroup>
    </Col>
</Row>

<Row>
    <Col>
        <ApiReader
            path="/autopay/balance"
            method="POST"
            type="response"
            api={props.refs}
        />
    </Col>
    <Col sticky>
        <br />
        <CodeGroup title="Respuesta">
            ```json {{ title: '200: Successful response' }}
            {
              "status": {
                 "status": "OK",
                 "reason": "00",
                 "message": "Successful response",
                 "date": "2025-09-29T17:09:29-05:00"
              },
              "id": "2972c13d-6315-4da3-80d7-64c24eb232ad",
              "amount": {
                 "currency": "USD",
                 "total": 10
              },
              "min_amount": {
                 "currency": "USD",
                 "total": 5
              }
            }
            ```
            ```json {{ title: '400: Not found' }}
            {
                "status": {
                    "status": "FAILED",
                    "reason": "404",
                    "message": "Balance Not found",
                    "date": "2025-09-29T17:09:29-05:00"
                }
            }
            ```
            ```json {{ title: '400: Invalid authentication' }}
            {
                "status": {
                    "status": "FAILED",
                    "reason": "BR",
                    "message": "he authentication does not contains all the required parameters (login, tranKey, seed, nonce)",
                    "date": "2025-09-29T17:09:29-05:00"
                }
            }
            ```
            ```json {{ title: '400: Invalid authentication - Incorrect credentials' }}
            {
                "status": {
                    "status": "FAILED",
                    "reason": "101",
                    "message": "Authentication failed 103.",
                    "date": "2025-09-29T17:09:29-05:00"
                }
            }
            ```
        </CodeGroup>
    </Col>
</Row>






