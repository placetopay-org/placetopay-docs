export const sectionMode = 'nav';
export const description =
  'On this page, you will find information about the API to create and check the status of a Session.'

export const apiRefs = ['/api/create-session', '/api/check-session-status'];

## Create session {{ id: 'create-a-session', tag: 'POST', label: '/api/verification/session' }}

<Row>
  <Col>
    This endpoint allows you to create an account verification session.

    <ApiReader
      path="/api/create-session"
      method="post"
      api={props.refs}
    />

  </Col>
  <Col sticky>
    <CodeGroup title="Request" tag="POST" label="/api/session">
    ```bash {{ title: 'cURL' }}
    curl -X "POST" https://checkout-test.placetopay.com/api/verification/session \
      -H "Content-Type: application/json" \
      -d '{
          "locale": "es_CO",
          "auth": {
            "login": "aabbccdd1234567890aabbccdd123456",
            "tranKey": "ABC123example456trankey+789abc012def3456ABC=",
            "nonce": "NG5vejc2b41xdm8=",
            "seed": "2024-04-19T12:06:56-05:00"
          },
          "user": {
            "name": "John",
            "surname": "Doe",
            "email": "john_doe@mail.com"
          },
          "returnUrl": "https://www.placetopay.com",
          "locale": "es_PR"
      }'
    ```
    </CodeGroup>
  </Col>
</Row>

<Row>
  <Col>
    <ApiReader
      path="/api/create-session"
      method="post"
      type="response"
      api={props.refs}
    />
  </Col>

  <Col sticky>
    <br />
    <CodeGroup title="Response">
    ```json {{ title: '200' }}
    {
      "status": {
        "status": "OK",
        "reason": "00",
        "message": "string",
        "date": "2021-09-21T09:34:48-05:00"
      },
      "data": {
        "requestId": "9bd89c8d-6097-4d69-8ce9-d9b5ec35d8ea",
        "redirectUrl": "https://account-validator.placetopay.com/verification/redirect/9bd89c8d-6097-4d69-8ce9-d9b5ec35d8ea",
        "expiresAt": "2024-04-19 17:36:57"
      }
    }
    ```
    ```json {{ title: '400' }}
    {
      "status": {
        "status": "FAILED",
        "reason": "BR",
        "message": "The field user.email is required.",
        "date": "2024-04-19T20:15:04+00:00"
      }
    }
    ```
    </CodeGroup>
  </Col>
</Row>

---
## Check session status {{ id: 'check-session-status', tag: 'POST', label: '/api/verification/query' }}

   This endpoint allows you to check the status of a created session.

    <Note>
      Account information will only be displayed for the first 10 minutes, and only if the account verification was successful.
    </Note>

 ### Possible statuses

 Name | Description
 ---------|----------
  APPROVED | The account was successfully verified.
  REJECTED | The account verification was rejected.
  FAILED | A system error occurred.
  PENDING | The account verification is in process.


  ### Status reasons

  Code | Description
  ---------|----------
   ?C | The verification was canceled by the user.
   05 | The verification was rejected for general reasons.
   BR | The request data was incorrect.
   00 | The verification was successfully completed.
   ?- | The verification is in the validation process.
   38 | Number of attempts exceeded.
   HX | A service error occurred.
   X3 | The provided information is invalid.
   X5 | Invalid social security number.
   XN | Invalid account number.
   ?* | Pending validation by micro-deposits.

<Row>
  <Col>
    <ApiReader
      path="/api/check-session-status"
      method="post"
      api={props.refs}
    />
  </Col>

   <Col sticky>
      <CodeGroup title="Request" tag="POST" label="api/verification/query">
      ```bash {{ title: 'cURL' }}
      curl -X "POST" https://checkout-test.placetopay.com/api/verification/query \
        -H "Content-Type: application/json" \
        -d '{
              "auth": {
                "login": "aabbccdd1234567890aabbccdd123456",
                "tranKey": "ABC123example456trankey+789abc012def3456ABC=",
                "nonce": "NG5vejc2b41xdm8=",
                "seed": "2024-04-19T12:06:56-05:00"
              },
              "requestId": "1f630ff7-9c02-4da4-82d4-d676709acb21"
        }'
      ```
      </CodeGroup>
    </Col>
</Row>

<Row>
  <Col>
    <ApiReader
      path="/api/check-session-status"
      method="post"
      type="response"
      api={props.refs}
    />
  </Col>

  <Col sticky>
    <br />
    <CodeGroup title="Response">
    ```json {{ title: '200' }}
    {
      "status": {
        "status": "PENDING",
        "reason": "?-",
        "message": "The request is pending",
        "date": "2022-08-30T18:33:25+00:00"
      },
      "data": {
        "requestId": "9bd8e975-c793-4888-afa7-15faee550fa5",
        "expiresAt": "2024-04-19 21:12:00"
      }
    }
    ```
    ```json {{ title: '400' }}
    {
      "status": {
        "status": "REJECTED",
        "reason": "BR",
        "message": "There are no results for the query",
        "date": "2024-04-19T21:11:09+00:00"
      }
    }
    ```
    </CodeGroup>
  </Col>
</Row>

