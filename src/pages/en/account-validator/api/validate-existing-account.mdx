export const sectionMode = 'nav';
export const description =
  'On this page, you will find information about the Validate Existing Account API.'

export const apiRefs = ['/api/validate-existing-account'];


## Validate Existing Account {{ id: 'validate-existing-account', tag: 'POST', label: '/api/verification/validate' }}

    Once the initial session creation has been successfully completed, you can perform validations on the account as many times as needed. You only need the account information and the verification code provided in the previous process.

    **Validations performed:**

    Currently, the result of the validations is based on the following rules:

    1. **Existing account validation:** Verifies that the account exists and has gone through a session creation process from the account validator UI, and that the generated token belongs to the merchant being authenticated.
    2. **Active account validation:** Verifies that the account exists and is active with the account validation provider (PLAID, VaultPopular, Business Accounts, or MOCK as applicable).
    3. **Available amount validation:** Verifies that the account being validated has an amount greater than or equal to the amount sent in the request.

### Status reasons

Code | Description
---------|----------
 05 | The verification was rejected for general reasons.
 BR | The request data was incorrect.
 00 | The verification was successfully completed.
 XA | Amount not available for this account.
 HX | A service error occurred.
 X3 | The provided information is invalid.
 X5 | Invalid social security number.
 XN | Invalid account number.


 ### Possible statuses

 Name | Description
 ---------|----------
  APPROVED | The account was successfully verified.
  REJECTED | The account verification was rejected.
  FAILED | A system error occurred.


<Row>
  <Col>
    <ApiReader
      path="/api/validate-existing-account"
      method="post"
      api={props.refs}
    />
  </Col>

   <Col sticky>
      <CodeGroup title="Request" tag="POST" label="api/verification/validate">
      ```bash {{ title: 'cURL' }}
      curl -X "POST" https://account-validator.placetopay.com/api/verification/validate \
        -H "Content-Type: application/json" \
        -d '{
              "auth": {
                "login": "aabbccdd1234567890aabbccdd123456",
                "tranKey": "ABC123example456trankey+789abc012def3456ABC=",
                "nonce": "NG5vejc2b41xdm8=",
                "seed": "2024-04-19T12:06:56-05:00"
              },
              "account": {
                "bankCode": "221571473",
                "bankName": "FIRSTBANK PUERTO RICO",
                "accountType": "CCD",
                "accountNumber": "41111111111111111",
                "franchise": "_221571473_",
                "verificationCode": "eyJhbYuiOiJSUzI1NmS1.eyJhY2NvdW50SGFzaCI6IjhkMzJkN2VjYjEyZDZmYjRmN2VlZmMzN2U4MmY2ZjI3YzNiYmY5Nzc3NjJkODAxZjQxYWZhN2Q0NWQ2YzI4YzU5YTU2NTM3YmZhM2E0NTM0MzhiMmU5M2Q4ODVkZDRiNDA1MjM5MjUwY2QzZGFkMDhhMzM2ZTJjYjM0Mjg0Y2RiIiwib25UZXN0IjpmYWxzZSwic2VydmljZSI6InBybWxjIiwiaWQiOjM4OX0.bXBuhT_xhA5vKJv3yVFJXYSYFJ4d49gmWuK2AC33GUfviAs2gSxrwZ8EHtFH4w37Pjzmq3y96uQZrllroGSlF7PySRqwxfNnem92ZKOs4EsFkzOdfBh73Z-RmCpKY6n5BQDjvVIg8hkwb2umnotjig1Zz_yHCBcvqQj5qkjj1N8HyT3KQtTOzItfDb4qf7uEAzONbcSN8YRYuRKvBMxKgJMSdeIu8Ah3zMOAhLxa1X0XnRr0a1gYudqQLowpnwQ7SP31Y_I3IlrXdBZqIYI12cciY_N1c11MsDuM1mtWhA0aJeVVzgdyq_DS0WOAiZy6Lsd26vY1ZR5Q5OsHYVIF5g"
              },
              "payment": {
                "amount": {
                  "currency": "USD",
                  "total": 100
                }
              },
              "locale": "en_US"
        }'
      ```
      </CodeGroup>
    </Col>
</Row>

<Row>
  <Col>
    <ApiReader
      path="/api/validate-existing-account"
      method="post"
      type="response"
      api={props.refs}
    />
  </Col>

  <Col sticky>
    <br />
    <CodeGroup title="Response">
    ```json {{ title: '200' }}
    {
        "status": "APPROVED",
        "reason": "00",
        "message": "The request has been successfully approved",
        "date": "2024-04-19T20:51:52+00:00"
    }
    ```
    ```json {{ title: '400' }}
    {
      "status": {
        "status": "FAILED",
        "reason": "BR",
        "message": "The selected payment.amount.currency is invalid.",
        "date": "2024-04-19T21:33:00+00:00"
      }
    }
    ```
    </CodeGroup>
  </Col>
</Row>
