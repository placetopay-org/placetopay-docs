import { HeroPattern } from '@/components/HeroPattern'
import { CenteredContainer } from '@/components/CenteredContainer'

<HeroPattern />

export const description =
  'Conoce el protocolo de autenticación de micrositio personalizado y cómo generar tu autenticación.';
  
# Authentication

The following authentications are available for the personalized microsite service:

## Web Services Security (WSS)  {{ id: 'WSS' }}

It is clarified that the authentication is formed by the merchant according to its standards and preferences.
and preferences, if necessary the login and trankey generated by Placetopay-evertec could be provided.
Placetopay-evertec.

### Authentication example:

All web requests must be authenticated with Web Services Security.
UsernameToken Profile 1.1.

**Example**

Placetopay will always send the following authentication object for each request made.

**login:** credential `login` provided when you start your integration. Site identifier.

**secretKey**: Credential `secretKey` provided at the start of your integration. Site secret key.

**seed:** This is the date on which the authentication was generated. The date must be in ISO 8601 format.    
Ejemplo: `2023-06-21T09:56:06-05:00`

**nonce:** Arbitrary value that identifies a request as unique.   
It is generated and used for other operations.   
At the time of sending, it must be encoded in base 64.   
Example: `nonce = 12345678`

Keep in mind that `nonce` and `seed` are generated, `login` and `trankey` are provided by
the merchant or the gateway, with that information the data to send should be:

- ` Base64(SHA-256(nonce + seed + tranKey))`  
- `tranKey = dsRL5wIymrySr9TgsYtxWZEIb5/RtW1v3n3xLqQZKj4=`  
- ` Base64(Nonce) `  
- `nonce = MTIzNDU2Nzg=`  

The resulting trankey value is `Base64(SHA-256(nonce + seed + tranKey))`.


The nonce within the `SHA-256` is not encoded in `Base64`, it is only encoded as a
parameter.


``` json {{ 'title': 'Autenticación de Ejemplo' }}
{
 "auth": {
  "login": "usuarioprueba",
  "tranKey": "dsRL5wIymrySr9TgsYtxWZEIb5/RtW1v3n3xLqQZKj4=",
  "nonce": "MTIzNDU2Nzg=",
  "seed": "2025-01-29T17:02:49-05:00"
 }
 ...
}
```

## JSON Web Token (JWT) 
Type of authentication created to follow the JSON Web Token (JWT) standard. 

<CenteredContainer>
  <ImageZoom
      src="/Json_web_token (JWT).png"
      alt="diagrama flujo token"
      className="w-full h-auto shadow rounded-md my-0 transition-transform duration-300 ease-in-out cursor-pointer hover:scale-110 focus:scale-110" 
  />
</CenteredContainer>

Placetopay uses the authentication service to obtain the token that will be sent on each request.
The basic authentication is constructed by concatenating the username and password,
encoded in base64.

<Note> The request to obtain the token is made via GET </Note>

``` json
{
 "headers": {
 "Authorization": "Basic base64(username . password)"
 }
}
```

When making the authentication request, Placetopay expects the following structure in response:
``` json 

{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",
  "token_type": "Bearer",
  "expires": "1674520892"
}

```

The **"expires ”** field corresponds to the timestamp indicating the date when the token will expire.
It is recommended to follow the standard token expiration time of 1 hour duration.
duration.

Subsequently, the following information will be sent in each of the requests to the.
service:

``` json 

{
 "headers": {
 "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
 }
}
```

## Support for customized headers

Additionally, with the JWT authentication type we support the sending of custom headers as required by the service in each
headers as required by the service in each of the requests.[Customized headers](https://docs.guzzlephp.org/en/stable/request-options.html#headers)

























































