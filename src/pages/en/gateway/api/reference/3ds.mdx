export const sectionMode = 'nav';
export const apiRefs = ['/gateway/mpi/lookup', '/gateway/mpi/query']

## 3DS Lookup {{ id: 'mpi-lookup-request', tag: 'POST', label: '/gateway/mpi/lookup' }}

<Row>
    <Col>
        Performs the initial 3DS validation process, returning the data so that the user can continue with the process

        <ApiReader
            path="/gateway/mpi/lookup"
            method="post"
            type="multiRequest"
            api={props.refs}
        />
    </Col>

    <Col sticky>
        <CodeGroup title="Solicitud" tag="POST" label="/gateway/mpi/lookup">
            ```bash {{ title: 'Version 2x' }}
            curl -X "POST" https://api-co-dev.placetopay.ws/gateway/mpi/lookup \
            -H "Content-Type: application/json" \
            -d '{
                "auth": {
                    "login": "6dd490faf9cb87a9862245da41170ff2",
                    "tranKey": "81RuiCFgrjJ5VlSzTLqyC2cekqvq7vXQQwG1131+WK0=",
                    "nonce": "bmVybzNzYms4cmE=",
                    "seed": "2024-11-21T11:30:33-05:00"
                },
                "buyer": {
                    "address": {
                        "country": "CO",
                        "state": "CUN",
                        "city": "Bogota",
                        "street": "cra 75 c 57 f 55",
                        "postalCode": "110741",
                    }
                },
                "payer": {
                    "name": "payer name",
                    "surname": "payer surname",
                    "email": "email@payer.com",
                    "mobile": "+573195505458",
                    "address": {
                        "country": "CO",
                        "state": "CUN",
                        "city": "Bogota",
                        "street": "cra 75 c 57 f 55",
                        "postalCode": "110741",
                        "phone": "3195505452"
                    }
                },
                "payment": {
                    "reference": "1234567890",
                    "description": "Testing payment",
                    "amount": {
                        "currency": "COP",
                        "total": 20000
                    }
                },
                "instrument": {
                    "card": {
                        "number": "4111111111111111",
                        "expiration": "05/28",
                        "cvv": "123"
                    }
                },
                "subscription": {
                    "reference": "311161",
                    "description": "Suscripción de prueba 001"
                },
                "returnUrl": "https://www.your-site.com/return?reference=1234567890",
                "version": "v2x"
            }'
            ```

            ```bash {{ title: 'Version 2' }}
                curl -X "POST" https://api-co-dev.placetopay.ws/gateway/mpi/lookup \
                -H "Content-Type: application/json" \
                -d '{
                "locale": "es_CO",
                "auth": {
                    "login":"c51ce410c124a10e0db5e4b97fc2af39",
                    "tranKey":"VQOcRcVH2DfL6Y4B4SaK6yhoH/VOUveZ3xT16OQnvxE=",
                    "nonce":"NjE0OWVkODgwYjNhNw==",
                    "seed":"2021-09-21T09:34:48-05:00"
                },
                "payment": {
                    "reference": "1122334455",
                    "description": "Testing Payment",
                    "amount": {
                        "currency": "USD",
                        "total": 100
                    }
                },
                "instrument": {
                    "card": {
                        "number": "4110760000000008",
                        "expiration": "12/20",
                        "cvv": "123"
                    }
                },
                "returnUrl": "https://www.your-site.com/return?reference=1234567890"
            }'
            ```
        </CodeGroup>
    </Col>
</Row>

<Row>
    <Col>
        <ApiReader
            path="/gateway/mpi/lookup"
            method="post"
            type="multiResponse"
            api={props.refs}
        />
    </Col>

    <Col sticky>
        <br />

        <CodeGroup title="Respuesta">
            ```json {{ title: 'Version 2x' }}
            {
                "status": {
                    "status": "OK",
                    "reason": "00",
                    "message": "La petición se ha procesado correctamente",
                    "date": "2021-09-21T12:09:36-05:00"
                },
                "data": {
                    "action": "redirect",
                    "version": "v2x",
                    "sessionToken": "658aa6f85dd76d0189f1a7d085fc7fbfb735ca408bdaf1f9973fe10d6c6e8f9b",
                    "redirectUrl": "https://3ds-server-to-authenticate.com/3ds",
                    "id": 262147
                }
            }
            ```
            ```json {{ title: 'Version 2' }}
            {
                "status": {
                    "status": "OK",
                    "reason": "00",
                    "message": "La petición se ha procesado correctamente",
                    "date": "2021-09-21T11:50:46-05:00"
                },
                "data": {
                    "version": "v2",
                    "sessionToken": "658aa6f85dd76d0189f1a7d085fc7fbfb735ca408bdaf1f9973fe10d6c6e8f9b",
                    "redirectUrl": "https://3ds-server-to-authenticate.com/3ds",
                    "identifier": "262147",
                }
            }
            ```
        </CodeGroup>
    </Col>
</Row>

---

## 3DS Query {{ id: 'mpi-query-request', tag: 'POST', label: '/gateway/mpi/query' }}

<Row>
    <Col>
        Once the user has completed the authentication process in 3DS, this endpoint is used to obtain the result of their operation

        > ### Important Note
        >
        > *When consuming this service **NOT** the transaction is being authenticated by default, the value of `data` must be taken from the response and sent in the `instrument.threeDS`*
            
        <ApiReader
            path="/gateway/mpi/query"
            method="post"
            type="multiRequest"
            api={props.refs}
        />
    </Col>

    <Col sticky>
        <CodeGroup title="Solicitud" tag="POST" label="/gateway/mpi/query">
            ```bash {{ title: 'Version 2' }}
            curl -X "POST" https://api-co-dev.placetopay.ws/gateway/mpi/query \
            -H "Content-Type: application/json" \
            -d '{
                "auth": {
                    "login":"c51ce410c124a10e0db5e4b97fc2af39",
                    "tranKey":"VQOcRcVH2DfL6Y4B4SaK6yhoH/VOUveZ3xT16OQnvxE=",
                    "nonce":"NjE0OWVkODgwYjNhNw==",
                    "seed":"2021-09-21T09:34:48-05:00"
                },
                "id": 1
            }'
            ```
            ```bash {{ title: 'Version 1' }}
            curl -X "POST" https://api-co-dev.placetopay.ws/gateway/mpi/query \
            -H "Content-Type: application/json" \
            -d '{
                "auth": {
                    "login":"c51ce410c124a10e0db5e4b97fc2af39",
                    "tranKey":"VQOcRcVH2DfL6Y4B4SaK6yhoH/VOUveZ3xT16OQnvxE=",
                    "nonce":"NjE0OWVkODgwYjNhNw==",
                    "seed":"2021-09-21T09:34:48-05:00"
                },
                "instrument": {
                    "card": {
                        "number": "4110760000000008",
                        "expiration": "12/20",
                        "cvv": "123"
                    }
                },
                "id": "1"
            }'
            ```
        </CodeGroup>
    </Col>
</Row>

<Row>
    <Col>
        <ApiReader
            path="/gateway/mpi/query"
            method="post"
            type="multiResponse"
            api={props.refs}
        />
    </Col>

    <Col sticky>
        <br />
        <CodeGroup title="Respuesta">
            ```json {{ title: 'Version 2X' }}
            {
                "status": {
                    "status": "OK",
                    "reason": "00",
                    "message": "La petición se ha procesado correctamente",
                    "date": "2024-11-21T15:29:09-05:00"
                },
                "data": {
                    "version": "v2x",
                    "id": 262163,
                    "enrolled": "Y",
                    "authenticated": "Y",
                    "eci": "05",
                    "cavv": "AJkCB0KIWAAAHoSAFwMmdUeHIJE=",
                    "xid": "30798e5b-281c-41ca-bf4d-093f9588d932",
                    "extra": {
                        "transStatusReason": null,
                        "acsTransId": "abd9e00e-03fa-4d59-af16-9efec7bdbd3a",
                        "threeDSServerTransID": "eac1309e-1bb5-43c2-b22b-ba2e39e830c8"
                    },
                    "validSignature": true
                }
            }
            ```

            ```json {{ title: 'Version 2' }}
            {
                "status": {
                    "status": "OK",
                    "reason": "00",
                    "message": "La petición se ha procesado correctamente",
                    "date": "2021-09-21T11:40:03-05:00"
                },
                "data": {
                    "identifier": 1,
                    "enrolled": "Y",
                    "authenticated": "Y",
                    "validSignature": true,
                    "eci": "05",
                    "cavv": "AAACCZJiUGVlF4U5AmJQEwAAAAA=",
                    "xid": "604a4cde-8964-4b75-9e3d-4809cf007a60",
                    "version": "v2",
                    "extra": {
                        "transStatusReason": null,
                        "acsTransId": "bc57ca81-efec-4d8d-b9fa-103876a0a80a",
                        "threeDSServerTransID": "3eb7872e-9cb8-415c-ba9e-d69fb05160bd"
                    }
                }
            }
            ```
        </CodeGroup>
    </Col>
</Row>
