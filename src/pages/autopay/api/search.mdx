import { HeroPattern } from '@/components/HeroPattern'

<HeroPattern />

export const apiRefs = ['/autopay/search']

## Consulta de AutoPagos {{ id: 'search-autopay', tag: 'POST', label: '/autopay/search' }}
Este servicio permite listar los AutoPagos registrados por un comercio y filtrarlos según criterios operativos y de auditoría. Está pensado para consultas administrativas, conciliación y monitoreo del ciclo de vida de los contratos de autopago.

<Row>
    <Col>
        <ApiReader
            path="/autopay/search"
            method="POST"
            api={props.refs}
        />
    </Col>
    <Col sticky>
        <br />
        <CodeGroup title="Solicitud" tag="POST" label="/autopay/search">
            ```bash {{ title: 'General' }}
            curl -X "POST" {{baseURl}}/autopay/search \
            -H "Content-Type: application/json" \
            -d '{
                "auth": {
                    "login":"aabbccdd1234567890aabbccdd123456",
                    "tranKey":"ABC123example456trankey+789abc012def3456ABC=",
                    "nonce":"enQ4dXh3YWhkMWM=",
                    "seed":"2023-06-21T09:56:06-05:00"
                },
                "filters": {
                    "reference": "PAYMENT_1",
                    "id": "328eb09a-363f-48a6-a16e-51c5a58b89ec",
                    "chargeTypes": ["FIXED", "TOTAL_BALANCE"],
                    "status": ["APPROVED", "REJECTED"],
                    "createdAt": {
                        "from": "2025-09-01",
                        "to": "2025-09-30"
                    }
                },
                "pagination": {
                    "perPage": 15,
                    "currentPage": 1
                },
                "locale": "es_ES"
        }'
            ```
        </CodeGroup>
    </Col>
</Row>

<Row>
    <Col>
        <ApiReader
            path="/autopay/search"
            method="POST"
            type="response"
            api={props.refs}
        />
    </Col>
    <Col sticky>
        <br />
        <CodeGroup title="Respuesta">
    ```json {{ title: '200' }}
    {
        "status": {
            "status": "OK",
            "reason": "00",
            "description": "La petición se ha procesado correctamente",
            "date":"2023-06-21T09:56:06-05:00"
        },
        "pagination": {
            "total": 3,
            "perPage": 15,
            "currentPage": 1,
            "lastPage": 1
        },
        "data": [
            {
                "status": {
                    "status": "APPROVED",
                    "reason": "00",
                    "date":"2023-06-21T09:56:06-05:00"
                },
                "id": "328eb09a-363f-48a6-a16e-51c5a58b89ec",
                "payer": {
                    "document": "911111111",
                    "documentType": "CC",
                    "name": "john",
                    "surname": "doe",
                    "email": "john@doe.com",
                    "mobile": "+573111111111"
                },
                "buyer": {
                    "name": "john",
                    "surname": "doe",
                    "email": "john@doe.com",
                },
                "subscription": {
                    "reference": "12345",
                    "description": "Ejemplo de descripción",
                    "amount": {
                        "currency": "USD",
                        "total": 10
                    },
                    "recurring": {
                        "type": "FIXED",
                        "periodicity": "M",
                        "interval": "1",
                        "startDate": "2025-08-24",
                        "nextPayment": "2025-08-24",
                        "dueDate": "2025-09-24",
                        "maxPeriods": 2
                    },
                },
                "dueDay": "25",
                "acceptedAt": "2021-09-24T10:02:17-05:00",
                "createdAt": "2021-09-24T10:02:17-05:00",
                "updatedAt": "2021-09-24T10:02:17-05:00"
            },
            {
                "status": {
                    "status": "REJECTED",
                    "reason": "?C",
                    "date":"2023-06-21T09:56:06-05:00"
                },
                "id": "328eb09a-363f-48a6-a16e-51c5a58b89ec",
                "payer": {
                    "document": "911111111",
                    "documentType": "CC",
                    "name": "john",
                    "surname": "doe",
                    "email": "john@doe.com",
                    "mobile": "+573111111111"
                },
                "subscription": {
                    "reference": "MyReference",
                    "description": "Ejemplo de descripción",
                    "recurring": {
                        "type": "TOTAL_BALANCE",
                        "periodicity": "D",
                        "interval": "1",
                        "startDate": "2025-08-24",
                        "nextPayment": "2025-08-24",
                        "dueDate": "2025-09-24",
                        "maxPeriods": 1
                    },
                },
                "additional": {
                    "customerAccountNumber": "1232312323"
                },
                "acceptedAt": "2021-09-24T10:02:17-05:00",
                "createdAt": "2021-09-24T10:02:17-05:00",
                "updatedAt": "2021-09-24T10:02:17-05:00"
            }
        ]
    }
    ```
            ```json {{ title: '401: Autenticación fallida' }}
                {
                    "status": {
                        "status": "FAILED",
                        "reason": "401",
                        "message": "la autenticación no contiene todos los parámetros requeridos (login, tranKey, seed, nonce)",
                        "date": "2021-09-21T09:34:48-05:00"
                    }
                }
            ```
        </CodeGroup>
    </Col>
</Row>

