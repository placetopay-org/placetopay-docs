import { HeroPattern } from '@/components/HeroPattern'

<HeroPattern />

export const apiRefs = ['/autopay/transactions']

## Transacciones de un AutoPago {{ id: 'transactions-autopay', tag: 'POST', label: '/autopay/transactions' }}
Este servicio permite listar las transacciones de un AutoPago y filtrarlas según criterios operativos y de auditoría. Está pensado para consultas administrativas, conciliación y monitoreo del ciclo de vida de los autopago.

<Row>
    <Col>
        <ApiReader
            path="/autopay/transactions"
            method="POST"
            api={props.refs}
        />
    </Col>
    <Col sticky>
        <br />
        <CodeGroup title="Solicitud" tag="POST" label="/autopay/transactions">
            ```bash {{ title: 'General' }}
            curl -X "POST" {{baseURl}}/autopay/transactions \
            -H "Content-Type: application/json" \
            -d '{
                "auth": {
                    "login":"aabbccdd1234567890aabbccdd123456",
                    "tranKey":"ABC123example456trankey+789abc012def3456ABC=",
                    "nonce":"enQ4dXh3YWhkMWM=",
                    "seed":"2023-06-21T09:56:06-05:00"
                },
                "id": "328eb09a-363f-48a6-a16e-51c5a58b89ec",
                "filters": {
                    "internalReference": "123",
                    "status": ["APPROVED", "REJECTED"],
                    "amount": [
                        "total": "10",
                        "currency": "USD"
                    ],
                    "createdAt": {
                        "from": "2025-09-01",
                        "to": "2025-09-30"
                    }
                },
                "pagination": {
                    "perPage": 15,
                    "currentPage": 1
                },
                "locale": "es_ES"
        }'
            ```
        </CodeGroup>
    </Col>
</Row>

<Row>
    <Col>
        <ApiReader
            path="/autopay/transactions"
            method="POST"
            type="response"
            api={props.refs}
        />
    </Col>
    <Col sticky>
        <br />
        <CodeGroup title="Respuesta">
    ```json {{ title: '200' }}
    {
        "status": {
            "status": "OK",
            "reason": "00",
            "message": "La petición se ha procesado correctamente",
            "date":"2023-06-21T09:56:06-05:00"
        },
        "pagination": {
            "total": 2,
            "perPage": 15,
            "currentPage": 1,
            "lastPage": 1
        },
        "data": [
            {
                "status": {
                    "status": "APPROVED",
                    "reason": "00",
                    "message": "Aprobada",
                    "date": "2024-12-04T00:09:40-05:00"
                },
                "date": "2021-09-24T10:02:17-05:00",
                "transactionDate": "2021-09-24T10:02:18-05:00",
                "internalReference": 230364,
                "reference": "800166551",
                "paymentMethod": "ID_DN",
                "franchise": "diners",
                "franchiseName": "Diners",
                "issuerName": "Diners",
                "amount": {
                    "currency": "USD",
                    "total": 120
                },
                "conversion": {
                    "from": {
                        "currency": "USD",
                        "total": 120
                    },
                    "to": {
                        "currency": "USD",
                        "total": 120
                    },
                    "factor": 1
                },
                "authorization": "999999",
                "receipt": "230364",
                "type": "AUTH_ONLY",
                "refunded": false,
                "lastDigits": "0008",
                "provider": "INTERDIN",
                "discount": null,
                "processorFields": {
                    "id": "cf3e77878a07d6e3ee667c60081dc39d",
                    "b24": "00"
                },
                "additional": {
                    "merchantCode": "1065152",
                    "terminalNumber": "00990099",
                    "credit": {
                        "code": 1,
                        "type": "03",
                        "groupCode": "X",
                        "installments": 3
                    },
                    "totalAmount": 120,
                    "interestAmount": 0,
                    "installmentAmount": 40,
                    "iceAmount": 0,
                    "batch": null,
                    "line": null,
                    "bin": "365454",
                    "expiration": "1122"
                },
                "notificationURL": "https://test.placetopay.ec/redirection/api/notify"
            },
            {
                "status": {
                    "status": "APPROVED",
                    "reason": "00",
                    "message": "Aprobada",
                    "date": "2025-01-24T00:09:40-05:00"
                },
                "date": "2025-01-24T10:02:17-05:00",
                "transactionDate": "2025-01-24T10:02:17-05:00",
                "internalReference": 230389,
                "reference": "800166551",
                "paymentMethod": "ID_DN",
                "franchise": "diners",
                "franchiseName": "Diners",
                "issuerName": "Diners",
                "amount": {
                    "currency": "USD",
                    "total": 120
                },
                "conversion": {
                    "from": {
                        "currency": "USD",
                        "total": 120
                    },
                    "to": {
                        "currency": "USD",
                        "total": 120
                    },
                    "factor": 1
                },
                "authorization": "999999",
                "receipt": "230364",
                "type": "AUTH_ONLY",
                "refunded": false,
                "lastDigits": "0008",
                "provider": "INTERDIN",
                "discount": null,
                "processorFields": {
                    "id": "cf3e77878a07d6e3ee667c60081dc39d",
                    "b24": "00"
                },
                "additional": {
                    "merchantCode": "1065152",
                    "terminalNumber": "00990099",
                    "credit": {
                        "code": 1,
                        "type": "03",
                        "groupCode": "X",
                        "installments": 3
                    },
                    "totalAmount": 120,
                    "interestAmount": 0,
                    "installmentAmount": 40,
                    "iceAmount": 0,
                    "batch": null,
                    "line": null,
                    "bin": "365454",
                    "expiration": "1122"
                },
                "notificationURL": "https://test.placetopay.ec/redirection/api/notify"
            }
        ]
    }
    ```
            ```json {{ title: '400: Autenticación fallida' }}
                {
                    "status": {
                        "status": "FAILED",
                        "reason": "401",
                        "message": "la autenticación no contiene todos los parámetros requeridos (login, tranKey, seed, nonce)",
                        "date": "2021-09-21T09:34:48-05:00"
                    }
                }
            ```
        </CodeGroup>
    </Col>
</Row>

