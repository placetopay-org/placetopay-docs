export const description = 'hold-invoices.';

export const apiRefs = ['/hold'];

# Bloquear o liberar ordenes de pago

Este endpoint permite **bloquear** o **liberar** una orden.
- Cuando una orden de pago es **bloqueada**, su estado de pago aparece como **"en proceso"** en el panel administrativo y **no puede editarse ni eliminarse**.
- Para desbloquearla, se debe usar el campo `revoke: true`.
- La operación requiere el **id único de la orden de pago**, generado por el sistema al momento de su creación.
- Se puede enviar una o múltiples ordenes de pago.

---

## Bloqueo o liberación de orden de pago {{ id: 'hold-invoices', tag: 'POST', label: '/cash/invoice/hold' }}

<Row>
  <Col>
    <ApiReader
      path="/hold"
      method="POST"
      api={props.refs}
    />
  </Col>
  <Col sticky>
    <br />
    <CodeGroup title="Bloquear o Liberar una orden de pago" tag="POST" label="/cash/invoice/hold">
      ```bash {{ title: 'Bloquear orden de pago' }}
      curl -X "POST" https://api-test.placetopay.com/rest/cash/invoice/hold \
      -H "Content-Type: application/json" \
      -d '{
        "auth": {
          "login": "aabbccdd1234567890aabbccdd123456",
          "tranKey": "ABC123example456trankey+789abc012def3456ABC=",
          "nonce": "MTIzNDU2Nzg=",
          "seed": "2018-01-29T17:02:49-05:00"
        },
        "invoice": 675983,
        "revoke": false
      }'
      ```

      ```bash {{ title: 'Liberar orden de pago' }}
      curl -X "POST" https://api-test.placetopay.com/rest/cash/invoice/hold \
      -H "Content-Type: application/json" \
      -d '{
        "auth": {
          "login": "aabbccdd1234567890aabbccdd123456",
          "tranKey": "ABC123example456trankey+789abc012def3456ABC=",
          "nonce": "MTIzNDU2Nzg=",
          "seed": "2018-01-29T17:02:49-05:00"
        },
        "invoice": 675983,
        "revoke": true
      }'
      ```

      ```bash {{ title: 'Bloquear múltiples ordenes de pago' }}
      curl -X "POST" https://api-test.placetopay.com/rest/cash/invoice/hold \
      -H "Content-Type: application/json" \
      -d '{
        "auth": {
          "login": "aabbccdd1234567890aabbccdd123456",
          "tranKey": "ABC123example456trankey+789abc012def3456ABC=",
          "nonce": "MTIzNDU2Nzg=",
          "seed": "2018-01-29T17:02:49-05:00"
        },
        "invoices": [675983, 675984, 675985],
        "revoke": false
      }'
      ```

      ```bash {{ title: 'Liberar múltiples ordenes de pago' }}
      curl -X "POST" https://api-test.placetopay.com/rest/cash/invoice/hold \
      -H "Content-Type: application/json" \
      -d '{
        "auth": {
          "login": "aabbccdd1234567890aabbccdd123456",
          "tranKey": "ABC123example456trankey+789abc012def3456ABC=",
          "nonce": "MTIzNDU2Nzg=",
          "seed": "2018-01-29T17:02:49-05:00"
        },
        "invoices": [675983, 675984, 675985],
        "revoke": true
      }'
      ```
    </CodeGroup>
  </Col>
</Row>

<Row>
  <Col>
    <ApiReader
      path="/hold"
      method="post"
      type="response"
      api={props.refs}
    />
  </Col>
  <Col sticky>
    <br />
    <CodeGroup title="Respuesta">
      ```json {{ title: '200' }}
      {
        "status": {
          "status": "OK",
          "reason": "00",
          "message": "La petición se ha procesado correctamente",
          "date": "2020-07-29T08:09:35-05:00"
        },
        "data": {
          "id": 675983,
          "status": "ACTIVE",
          "debtor": {
            "document": "1234567813",
            "documentType": "CI",
            "name": "ANDREA",
            "surname": "VIDAL FERNANDEZ"
          },
          "payment": {
            "reference": "1234889",
            "description": "E955",
            "amount": {
              "taxes": [
                {
                  "kind": "valueAddedTax",
                  "amount": 0,
                  "base": 0
                },
                {
                  "kind": "airportTax",
                  "amount": 0,
                  "base": 0
                }
              ],
              "details": [
                {
                  "kind": "subtotal",
                  "amount": 30.12
                }
              ],
              "currency": "USD",
              "total": 30.12
            },
            "allowPartial": false,
            "subscribe": false
          },
          "altReference": "054",
          "createdAt": "2020-07-28",
          "expirationDate": "2021-03-25 10:14:24",
          "finalDate": "2021-04-30 23:59:59",
          "siteId": 40
        }
      }
      ```

      ```json {{ title: '200 - Múltiple' }}
      {
        "status": {
          "status": "OK",
          "reason": "00",
          "message": "La petición se ha procesado correctamente",
          "date": "2025-10-14T17:20:27-05:00"
        },
        "count": 3
      }
      ```

        ```json {{ title: '400: Respuesta fallida' }}
        {
            "status": {
                "status": "FAILED",
                "reason": "BR",
                "message": "El campo invoice es obligatorio.",
                "date": "2021-09-21T09:34:48-05:00"
            }
        }
        ```

        ```json {{ title: '401: Authenticación fallida' }}
        {
            "status": {
                "status": "FAILED",
                "reason": "401",
                "message": "la autenticación no contiene todos los parámetros requeridos (login, tranKey, seed, nonce)",
                "date": "2021-09-21T09:34:48-05:00"
            }
        }
        ```
    </CodeGroup>
  </Col>
</Row>
